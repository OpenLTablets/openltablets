<?xml version="1.0"?>

<!-- 
basedir is eclipse.project.dir 
-->
<project name="pre.build" default="build.all" basedir="..">

<property name="grammar.dir" value="grammars"/>
<property name="grammar.src.output.dir" value="grammars"/>

<property name="lib.root.dir" value="../org.openl.lib.javacc"/>

<target name="build.all" depends="javacc_all" />

<taskdef name="javacc_2" classname="org.apache.tools.ant.taskdefs.optional.javacc.JavaCC_2"/>

<target name="javacc_all">
	<antcall target="javacc_one">
		<param name="grammar.name" value="jgrammar"/>
	</antcall>
<!--	
	<antcall target="javacc_one">
		<param name="grammar.name" value="constexpr"/>
	</antcall>
-->	
</target>


<target name="javacc_one">

<mkdir dir="${grammar.src.output.dir}/org/openl/grammars/${grammar.name}"/>

<javacc_2 
    target="${grammar.dir}/${grammar.name}.jj" 
    outputdirectory="${grammar.src.output.dir}/org/openl/grammars/${grammar.name}"
    javacchome="${lib.root.dir}/javacc-3.0/bin/lib" 
    static="false"
/>


</target>


</project>
