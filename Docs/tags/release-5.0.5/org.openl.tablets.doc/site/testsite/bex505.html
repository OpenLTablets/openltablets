<h1>OpenL Business Expression Language (BEX)</h1>

OpenL language framework have been designed from the ground to allow flexible combination of grammar and semantics. 
OpenL Business Expression language proves this statement on practice by extending existing OpenL Java grammar and semantics 
presented in org.openl.j configuration by new grammar and semantic concepts that allow users to write "natural language" expressions.

<h2>Java Business Object Model as Basis for OpenL Business Vocabulary(OBV)</h2>


As always, OpenL minimizes the necessary effort required to build a Business Vocabulary. 
Using of BEX does not require any special mapping, the existing Java BOM automatically becomes the basis for 
OBV. For example, the following expressions are equivalent
<p>

<table><tr><td class="box">
<code class="box">driver.age</code> 
</td></tr></table>

and 


<table><tr><td class="box">
<code class="box">Age <b>of the</b> Driver</code>    
</td></tr></table>


<p>
Another example:
<p>
<table><tr><td class="box">
<code class="box">policy.effectiveDate </code> 
</td></tr></table>

and 

<table><tr><td class="box">
<code>Effective Date <b>of the</b> Policy</code> 
</td></tr></table>


<p>
As you can see from these examples, if your Java model correctly reflects Business Vocabulary there is no further action needed.
In cases where Java Model is not satisfactory you still can apply custom type-safe mapping(renaming) that always have been part
of OpenL Framework.      

<h2>New Keywords, how to avoid possible naming conflicts</h2>


In the previous chapter we introduced new keyword <b>of the</b>. There are other (self-explanatory) keywords in BEX language:

<code>
<ul>
  <li>is less than</li>
  <li>is more than</li>
  <li>is less or equal</li>
  <li>is no more than</li>
  <li>is more or equal</li>
  <li>is no less than</li>
</ul>
</code>

<p>
We plan to add more keywords to OpenL BEX language, and therefore there is a chance of a name clash with Business Vocabulary. 
The easiest way to avoid this clash is to use upper case notation when referring to the model attributes, because BEX grammar is
case-sensitive and all the new keywords will be in the lower case. For example, there is an attribute called 
<code>isLessThanCoverageLimit</code>. If you refer to it as <code>is less than coverage limit</code>, 
there is going to be a name clash with the keyword, but if you write <code>Is Less Than Coverage Limit</code>, no clash will appear.


The possible direction in extending keywords is to add numerics, measurement units, measure sensitive comparisons, like <code>is longer than</code> 
or <code>is colder than</code> etc. 

 
<h2>Simplifying Expressions with explanatory variables</h2>


For example, we have a (not very) complex expression: 

<p>In Java:
<p>
<table><tr><td class="box">
<code>(vehicle.agreedValue - vehicle.marketValue) / vehicle.marketValue > limitDefinedByUser</code>
</td></tr></table>


<p>In BEX language you can re-write the same expression in a "business-friendly" way:  

<p>
<table><tr><td class="box">
<code>(Agreed Value of the vehicle - Market Value of the vehicle) / Market Value of the vehicle is more than  Limit Defined By User</code>
</td></tr></table>

<p>
Unfortunately, the more complex is the expression, the less comprehensible the "natural language" expression becomes. OpenL BEX offers you
an elegant solution for this problem: 
<p>

<table><tr><td class="box">
<code>
(A - M) / M > X, where
<br>&nbsp;&nbsp;A - Agreed Value of the vehicle,
<br>&nbsp;&nbsp;M - Market Value of the vehicle,
<br>&nbsp;&nbsp;X - Limit Defined By User
  </code>
</td></tr></table>


<p>

The syntax is pretty similar to the one that have been used in scientific publications and is easily understood by anybody. We believe, 
that the syntax provides the best mix of mathematical clarity and business readability.


<h2>Simplifying Expressions by Using "Unique in Scope" concept</h2>


Humans differ from computers, in particular, by their ability to understand the scope of the language expression. For example, if we discuss
an insurance policy and mention "effective date" we don't have to say every time to say "effective date of the policy", the context of the effective
date is clearly understood. On another hand, if we discuss two policies, for example, the old and the new one, we have to say "the effective date of the new policy" 
vs. "the effective date of the old policy". This is necessary, because there are 2 different policies in the context of the conversation. 

<p>    
Similarly, when humans write so called "business documents" - files that serve as a reference point to a rule developer,
they also often use an "implied context" in mind. Therefore they often use in documentation business terms such as Effective Date, 
Driver, Account etc. with implied scope in mind. The "scope resolution" is left to a so-called Rules Engineer, who has to do it by manually 
analyzing BOM and setting appropriate paths from the root objects. 
<p>
OpenL BEX tries to close this semantic gap or at least make it a bit narrower by letting use "unique in scope" attributes. For example, if there is only one 
policy in the scope, user can write just "effective date" instead of "effective date of the policy". OpenL BEX will automatically determine the uniqueness 
of the attribute and either produce a correct path, or will emit error message in case of ambiguous statement. The level of the resolution can be modified 
programmatically and by default equals to 1.   


<h2>OpenL Vocabulary and OpenL BEX</h2>

Since version 5.0.5 OpenL introduced the ability to augment existing Java BOM with different kind of meta-information through OpenL Vocabulary.
As always, we made it accessible through Java API and as Excel tables, giving business users access to the Vocabulary. While Vocabulary can be used for 
many other important  activities, it has one feature that is significant in the context of OpenL BEX - Business Object Attribute Aliasing - or in layman's 
words, the ability to name attribute with alternative names. This gives user an ability to adopt existing Java model names to the business terminology 
in the case when Java model does not reflect it properly. See OpenL Vocabulary for more details  



<h2>Future developments, compatibility etc.</h2>


OpenL BEX is a fairly new development, it will evolve to provide user with new convenient features. In particular,
right now there is no other way to call methods in OpenL except for the old-fashioned Java/C++ style. Nevertheless we want
to state that existing syntax will remain compatible with all future modifications. Also, the ability to use Java style 
constructs together with "natural-language" extensions will stay in the language. And, finally, the last word about using NL 
references in this document - BEX is NOT a NL-tool, it is just a syntax extension of a standard Java grammar that allows your 
expressions in many cases look like normal English phrases. The result will be as good as your Java BOM is, BEX would not be able
to fix a bad design or naming conventions. We strongly recommend that you at least try it and send us your feedback, it does not require
any additional efforts, because BEX is now a standard part of OpenL Tablets. You can use in any place where you previously used Java expressions.


 

