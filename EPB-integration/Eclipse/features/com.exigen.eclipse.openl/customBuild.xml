<project name="OpenL Rules Eclipse feature" default="build-all" basedir=".">

	<description>
	    This script is designed to build runtime projects and
	    copy approprate JAR files to Eclipse plugin projects.
	</description>

	<property name="projectDirectory" value="../" />
	<property name="pluginDirectory" value="./" />
	<property name="buildId" value="7.0.0-SNAPSHOT" />
	<property name="versionReplace" value="false" />
	<property name="versionReplaceList" value="com.exigen.openl=${buildId}" />

	<target name="build-design-time">
		<exec dir="${pluginDirectory}" executable="mvn.bat" failonerror="true">
			<arg line="-U" />
			<arg line="-e" />
			<arg line="clean" />
			<arg line="validate" />
			<env key="MAVEN_TERMINATE_CMD" value="on" />
			<env key="versionReplace" value="${versionReplace}"/>
			<env key="versionReplaceList" value="${versionReplaceList}"/>
		</exec>		
	
		<exec dir="${pluginDirectory}" executable="mvn.bat" failonerror="true">
			<arg line="-U" />
			<arg line="-e" />
			<arg line="install" />
			<env key="MAVEN_TERMINATE_CMD" value="on" />
			<env key="versionReplace" value="false"/>
		</exec>				

	</target>

	<target name="build-sources">	
		<ant dir="sourceTemplatePlugin" antfile="customBuild.xml" />				
	</target>

	<target name="build-run-time">			
		<ant dir="${projectDirectory}/com.exigen.openl">			
			<property name="versionReplace" value="${versionReplace}"/>
			<property name="versionReplaceList" value="${versionReplaceList}"/>
			<property name="projectDirectory" value="${projectDirectory}/com.exigen.openl"/>
		</ant>
	</target>		

	<target name="build-all" depends="build-run-time, build-sources, build-design-time"/>
	<target name="all" depends="build-all"/>
</project>

