<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
          "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html
   xmlns:f="http://java.sun.com/jsf/core"
   xmlns:h="http://java.sun.com/jsf/html"
   xmlns:a4j="http://richfaces.org/a4j"
   xmlns:rich="http://richfaces.org/rich"
   xmlns:c="http://java.sun.com/jstl/core"
   xmlns:ui="http://java.sun.com/jsf/facelets">

<head>
    <a4j:loadStyle src="resource:///css/openl/style1.css" />
    <a4j:loadScript src="resource:///javascript/prototype/prototype-1.5.1.js" />
</head>
<body>
<f:view>
<script type="text/javascript">
  function addDotPart(text) {
    alert("Hi");
       if (! $('dtForm:newDotPart').value.empty() ) return;
       $('dtForm:newDotPart').value = text;
       $('dtForm:dtLink').onclick();
     }
</script>
<a4j:outputPanel id="domainTreePanel">
<table>
<tr><td>
  <a4j:form id="dtForm">
    <h:inputText readonly="true" value="#{domainTreePath.dotExpression}"/>
    <h:inputHidden id="newDotPart" value="#{domainTreePath.newDotPart}" />
    <a4j:commandLink value="Test" reRender="domainTreePanel" id="dtLink"/>
  </a4j:form>
</td></tr>
  <tr><td>
    <ul class="treeOptions">
      <c:forEach items="#{domainTreePath.subExpressions}" var="t">
        <li>#{t} <a href="javascript: void(0);" onclick="addDotPart('#{t}')">..</a></li>
      </c:forEach>
    </ul>
  </td></tr>
</table>
</a4j:outputPanel>
</f:view>
</body>
</html>