<ui:composition
        xmlns:f="http://java.sun.com/jsf/core"
        xmlns:h="http://java.sun.com/jsf/html"
        xmlns:rich="http://richfaces.ajax4jsf.org/rich"        
        xmlns:a4j="https://ajax4jsf.dev.java.net/ajax"
        xmlns:ui="http://java.sun.com/jsf/facelets"
        xmlns:t="http://myfaces.apache.org/tomahawk"
        xmlns:c="http://java.sun.com/jstl/core"
        xmlns:rules="http://openl-tablets.sourceforge.net/jsf"
        template="/facelets/common/webstudioBase.xhtml">
        
       
  <ui:define name="page">  
  	<table>
		<tr>
			<td valign="bottom"><a href="../../jsp/search/allIndexFrame.jsp"><font size="-1">Index</font></a></td>
			<td valign="bottom" align="center"><a href="advSearch.xhtml"><font size="-1">Advanced Search</font></a></td>			
		</tr>
	</table>
	<table class="search-table">
	<th>Business Search</th>
	<tr><td>
	<h:form id="businessSearchForm">
	<fieldset><legend>Properties</legend>  
		<table id="propertySearchTable">
			<c:forEach items="#{bussinessSearch.propForSearch}" var="propDef">
				<tr><td><h:outputLabel for="#{propDef.displayName}" value="#{propDef.displayName}"/></td>
					<c:if test="#{propDef.stringType}">
						<td><h:inputText id="#{propDef.name}" value="#{propDef.value}" /></td>
					</c:if>
					<c:if test="#{propDef.dateType}">
						<td><rich:calendar id="#{propDef.name}" 
										   value="#{propDef.value}"										   
										   popup="true" 
										   enableManualInput="false"
	      								   jointPoint="bottom-left" 
	      								   datePattern="#{propDef.format}"
	      								   defaultTime = "00:00"
	      								   rendered="true"
	      								   timeZone="#{formatPatterns.defaultTimeZone}">
	      						<f:converter converterId="org.openl.DateConverter" />
	      					</rich:calendar>
	      				</td>
					</c:if>
				</tr>				
			</c:forEach>
		</table>
	</fieldset>
	<br/>
	<fieldset>
		<h:panelGrid columns="2" cellspacing="5" >
			<h:outputLabel for="content" value="Table Contains" />
			<h:inputText id="content" value="#{bussinessSearch.tableContain}" />
		</h:panelGrid>
	</fieldset>
	<br />
	<h:commandButton value="Search" action="#{bussinessSearchRequest.search}"/>
	</h:form></td></tr>
	</table>
	
	<c:if test="#{not bussinessSearch.ready}">
  		<p class="warning">There is no valid projects in workspace. Or your session have expired and you need to reload project</p>
	</c:if>
	<c:if test="#{bussinessSearchRequest.searching}">
    	<c:forEach items="#{bussinessSearchRequest.searchResults}" var="tableSearch">
        <br />
        <h:panelGroup rendered="#{not bussinessSearch.studioReadOnly}">
            <img src="#{contextPath}/webresource/images/excel-workbook.png" />
            <h:outputText value="#{tableSearch.xlsLink}" escape="false" />
        </h:panelGroup>
        <br />
        <h:panelGroup>
            <img src="#{contextPath}/webresource/images/viewTable.gif" />
            <h:outputLink value="#{contextPath}/faces/facelets/tableeditor/showTable.xhtml">
                <f:param name="uri" value="#{tableSearch.tableUri}" />
                <h:outputText value="View Table" />
            </h:outputLink>
        </h:panelGroup>
        <br /><br />
        <rules:tableEditor table="#{tableSearch.table}" editable="false" rendered="#{tableSearch.table != null}"
            collapseProps="true">
            <h:outputLink value="javascript:triggerSearch(document.forms.searchForm)">Search</h:outputLink>
        </rules:tableEditor>
        <h:outputText value="No rows selected&lt;br/&gt;" rendered="#{tableSearch.table == null}" escape="false" />
     </c:forEach>
	   
	   <!--<t:dataTable value="#{bussinessSearch.busSearchResBean.tableRes}" var="row" border="3" >
    		<t:columns value="#{bussinessSearch.busSearchResBean.propsForSearch}" var="column" columnId="ind">    		 		
        		<f:facet name="header">
           			<h:outputText value="column.displayName"/>
        		</f:facet>
        			<h:outputText value="#{row.columnName[#column.displayName]}"/>
    		</t:columns>
	   </t:dataTable>
	   -->
	   </c:if>
	
</ui:define>
</ui:composition>