<?xml version="1.0" encoding="utf-8"?>

<ui:composition xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:c="http://java.sun.com/jstl/core"
                xmlns:jsffn="http://rules.openl.org/taglibs/jsffn"
                template="/facelets/common/base.xhtml">

  <ui:define name="page">

    <c:set var="contextPath" value="#{facesContext.externalContext.request.contextPath}"/>

    <div id="stripe"></div>

    <table border="0px" cellspacing="0" cellpadding="0" width="100%" height="90%">
      <tr>
        <td style="height: 440px; width: 100%" valign="middle">
          <div align="center">
            <!-- possible error messages -->
            <c:if test="#{not empty SPRING_SECURITY_LAST_EXCEPTION}">
              <p class="error">
               Wrong user name or/and password
              </p>
              <c:set var="SPRING_SECURITY_LAST_EXCEPTION" value="#{null}"/>
            </c:if>
            <div id="loginKey">
              <!-- form itself -->
              <form action="#{contextPath}/security_login_check" method="post">
              <table id="loginForm" cellspacing="0px">
                <tr>
                  <td align="right">
                    <label for="loginName">
                     Login:
                    </label>
                  </td>

                  <td align="left">
                    <input type="text" class="transparency" name="j_username" id="loginName"/>
                  </td>
                </tr>

                <tr>
                  <td align="right">
                    <label for="loginPassword">
                     Password:
                    </label>
                  </td>

                  <td align="left">
                    <input type="password" class="transparency" name="j_password" id="loginPassword"/>
                  </td>
                </tr>

                <c:if test="#{!param.noRemember}">
                <tr>
                  <td align="right">
                    <label for="rememberMe">
                      Remember me
                    </label>
                  </td>

                  <td align="left">
                    <input type="checkbox" class="transparency" name="rememberMe" id="rememberMe" style="border: none;"/>
                  </td>
                </tr>
                </c:if>

                <tr>
                  <td>&#160;</td>

                  <td align="left">
                    <input type="submit" class="button" id="loginSubmit" value="Login"/>
                    <c:if test="#{autoLogin &amp;&amp; jsffn:isLocalRequest()}">
                      <input type="button" class="button" id="loginAsLocal" value="Login as local" onclick="window.location.href='#{contextPath}'"/>
                    </c:if>
                  </td>
                </tr>
              </table>
            </form>

            <script>
              document.getElementById("loginName").focus();
            </script>
          </div>
        </div>
      </td>
    </tr>

   </table>

</ui:define>
</ui:composition>
