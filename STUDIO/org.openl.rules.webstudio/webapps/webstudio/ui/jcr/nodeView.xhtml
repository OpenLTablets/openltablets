<ui:composition
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
    xmlns:a4j="https://ajax4jsf.dev.java.net/ajax"
	xmlns:rich="http://richfaces.ajax4jsf.org/rich"
	xmlns:ui="http://java.sun.com/jsf/facelets">

	<h:panelGroup rendered="#{userSession.selected.type == 'repository'}">
		<table><tr><td>
		<h:commandButton
		  value="New Project" 
		  onclick="return confirmNewProject();"
		/>
		</td></tr></table>
		<p/>

		<rich:tabPanel  style="height:400px;">
			<rich:tab label="Projects">
				<ui:include src="/ui/jcr/projects.xhtml" />
			</rich:tab>
		</rich:tabPanel>
	</h:panelGroup>

	<h:panelGroup rendered="#{userSession.selected.type == 'file'}">
		<table><tr><td>
		<h:commandButton
		  value="Update"
		  onclick="return confirmUpdateFile();"/>
		</td><td>
		<h:commandButton
		  value="Delete"
		  onclick="return confirmDeleteNode();"
		/>
		</td></tr></table>
	</h:panelGroup>

	<h:panelGroup rendered="#{userSession.selected.type == 'folder'}">
		<table><tr><td>
		<h:commandButton
		  value="New Folder"
		  onclick="return confirmNewFolder();"
		/>
		</td><td>
		<h:commandButton
		  value="New File"
		  onclick="return confirmNewFile();"/>
		</td><td>
		<h:commandButton
		  value="Delete"
		  onclick="return confirmDeleteNode();"
		/>
		</td></tr></table>
	</h:panelGroup>

	<h:panelGroup rendered="#{userSession.selected.type == 'project'}">
		<table><tr><td>
		<h:commandButton
		  value="Update"
		  action="updateProject"
		  onclick="return false;"
		/>
		</td><td>
		<h:commandButton
		  value="Commit"
		  action="commitProject"
		  onclick="return false;"
		/>
		</td><td>
		<h:commandButton 
		  value="Override and Update" 
		  action="revertProject" 
		  onclick="return false;"
		/>
		</td><td>
		<h:commandButton
		  value="Copy"
		  onclick="return confirmCopyProject('#{activeNode.name}');"
		/>
		</td></tr></table>
		<table><tr><td>
		<h:commandButton
		  value="New Folder"
		  onclick="return confirmNewFolder();"
		/>
		</td><td>
		<h:commandButton
		  value="New File"
		  onclick="return confirmNewFile();"/>
		</td><td>
		<h:commandButton
		  value="Delete"
		  onclick="return confirmDeleteNode();"
		/>
		</td></tr></table>
	</h:panelGroup>

	<h:panelGroup rendered="#{userSession.selected.type != 'repository'}">
		<p/>

		<rich:tabPanel switchType="client" style="height:400;">
			<rich:tab label="Properties">
				<h:panelGroup rendered="#{userSession.selected.type == 'file'}">
					<ui:include src="/ui/jcr/node/fileProps.xhtml" />
				</h:panelGroup>
				<h:panelGroup rendered="#{userSession.selected.type == 'folder'}">
					<ui:include src="/ui/jcr/node/folderProps.xhtml" />
				</h:panelGroup>
				<h:panelGroup rendered="#{userSession.selected.type == 'project'}">
					<ui:include src="/ui/jcr/node/projectProps.xhtml" />
				</h:panelGroup>
			</rich:tab>
			<rich:tab label="Versions">
				<ui:include src="/ui/jcr/node/versions.xhtml" />
			</rich:tab>
			<rich:tab label="Elements" rendered="#{userSession.selected.type != 'file'}">
				<ui:include src="/ui/jcr/node/elements.xhtml" />
			</rich:tab>
		</rich:tabPanel>
		
	</h:panelGroup>
	
</ui:composition>
