<?xml version="1.0" encoding="UTF-8"?>
<ui:composition
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:rich="http://richfaces.org/rich"
    template="/pages/layout/framePanel.xhtml">

    <ui:define name="content">
        <style>
            .traceTreeParams {
                border-bottom: 1px solid #dddddd;
                padding-bottom: 5px;
            }

            .traceTreeParams input[type="checkbox"] {
                vertical-align: middle;
            }

            .traceTreeFieldName {
                font-weight: bold;
                margin-right: 5px;
            }

            .tree {
                padding-top: 5px;
            }
            .decisiontable .rf-trn-ico{
                background-image: url("webresource/images/ruleset.gif");
            }
            .rule .rf-trn-ico{
                background-image: url("webresource/images/test_ok.gif");
            }
            .cmatch .rf-trn-ico, .wcmatch .rf-trn-ico, .wcmScore .rf-trn-ico {
                background-image: url("webresource/images/cmatch.gif");
            }
            .cmResult .rf-trn-ico {
                background-image: url("webresource/images/cmatch-check.gif");
            }
            .cmMatch .rf-trn-ico {
                background-image: url("webresource/images/cmatch-match.gif");
            }
            .tbasic .rf-trn-ico {
                background-image: url("webresource/images/tbasic.gif");
            }
            .tbasicMethod .rf-trn-ico, .method .rf-trn-ico {
                background-image: url("webresource/images/method.gif");
            }
            .tbasicOperation .rf-trn-ico {
                background-image: url("webresource/images/tbasic-operation.gif");
            }
            /* TODO: icons for spreadsheet, method, overloadedMethodChoise in trace */
            .spreadsheet .rf-trn-ico {
                background-image: url("webresource/images/spreadsheet.gif");
            }
            .spreadsheetCell .rf-trn-ico {
                background-image: url("webresource/images/value.gif");
            }
            .overloadedMethodChoice .rf-trn-ico {
                background-image: url("webresource/images/tableview.gif");
            }
            .decisionTableCondition_result .rf-trn-ico, .decisionTableIndex_result .rf-trn-ico,
            .decisionTableCondition .rf-trn-ico, .decisionTableIndex .rf-trn-ico {
                background-image: url("webresource/images/test_success.png");
            }
            .decisionTableCondition_fail .rf-trn-ico, .decisionTableIndex_fail .rf-trn-ico {
                background-image: url("webresource/images/test_fail.png");
            }
            .decisionTableCondition_result, .decisionTableIndex_result {
                font-weight: bold;
            }
            .decisionTableCondition_fail, .decisionTableIndex_fail,
            .decisionTableCondition, .decisionTableIndex {
                font-style: italic;
            }
        </style>

        <h:form>
            <h:panelGroup styleClass="traceTreeParams" rendered="#{traceTreeBean.hasDecisionTables()}" layout="block">
                <h:outputText value="Detailed trace tree" styleClass="traceTreeFieldName"/>
                <h:selectBooleanCheckbox id="toggleCheckbox" value="#{traceTreeBean.detailedTraceTree}">
                    <f:ajax event="change" render="traceTree" />
                </h:selectBooleanCheckbox>
            </h:panelGroup>

            <h:panelGroup id="traceTree">
                <rich:tree styleClass="tree" value="#{traceTreeBean.tree}" toggleType="client" var="node">
                    <rich:treeNode styleClass="#{node.type}" >
                        <h:outputLink value="#{node.url}" title="#{node.title}" target="mainFrame">
                            <h:outputText value="#{node.name}" />
                        </h:outputLink>
                    </rich:treeNode>
                </rich:tree>
            </h:panelGroup>
        </h:form>

    </ui:define>

</ui:composition>
