<ui:composition
        xmlns:f="http://java.sun.com/jsf/core"
        xmlns:h="http://java.sun.com/jsf/html"
        xmlns:ui="http://java.sun.com/jsf/facelets"
        xmlns:a4j="http://richfaces.org/a4j"
        xmlns:rich="http://richfaces.org/rich">

    <rich:popupPanel id="genOpenAPISchemaModal" minWidth="530" autosized="true">
        <f:facet name="header">
            <h:outputText value="Generate OpenAPI Schema"/>
        </f:facet>

        <f:facet name="controls">
            <h:graphicImage value="/images/close.gif" class="close"
                            onclick="genOpenAPISchemaHandler.close()" alt="Close"/>
        </f:facet>

        <h:form prependId="true" id="genOpenAPISchemaForm" class="fields">
            <h:panelGrid rendered="#{not projectBean.openAPIFileExists}" columns="2">
                <h:outputText value="Type:" styleClass="required"/>
                <h:selectOneMenu id="openAPIType">
                    <f:selectItems value="#{projectBean.openApiTypes}" var="v" />
                </h:selectOneMenu>
            </h:panelGrid>
            <h:panelGroup rendered="#{projectBean.openAPIFileExists}" styleClass="warning">
                <h:outputText value="Existed OpenAPI Schema file will be overrided: #{projectBean.existedOpenAPIFilePath}"/>
            </h:panelGroup>
            <footer>
                <a4j:commandButton id="genOpenAPIBtn" value="Generate"
                                   rendered="#{not projectBean.openAPIFileExists}"
                                   tabindex="-1"
                                   action="#{projectBean.generateOpenAPISchema}"
                                   oncomplete="if(!#{facesContext.validationFailed}){genOpenAPISchemaHandler.close(); forceReload();}"/>
                <a4j:commandButton id="genOpenAPIBtn2" value="Regenerate"
                                   rendered="#{projectBean.openAPIFileExists}"
                                   tabindex="-1"
                                   action="#{projectBean.regenerateOpenAPISchema}"
                                   oncomplete="if(!#{facesContext.validationFailed}){genOpenAPISchemaHandler.close(); forceReload();}"/>
                <input type="button" value="Close" onclick="genOpenAPISchemaHandler.close()"/>
            </footer>
        </h:form>
    </rich:popupPanel>

    <script>
        //<![CDATA[
        var genOpenAPISchemaHandler = function () {
            const targetForm = 'genOpenAPISchemaModal';
            return {
                show: function () {
                    ws.ui.show(targetForm);
                },
                close: function () {
                    ws.ui.hide(targetForm);
                }
            }
        }();
        //]]>
    </script>

</ui:composition>
