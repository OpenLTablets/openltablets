<?xml version="1.0" encoding="UTF-8"?>
<ui:composition
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:c="http://java.sun.com/jsp/jstl/core"
    xmlns:fn="http://java.sun.com/jsp/jstl/functions">

    <div style="text-align: center; padding:11px">
        &#169; #{versionProperties['openl.copyrightyear']}
        <a style="text-decoration:none; color:#666" href="#{versionProperties['openl.url']}" target="_blank">OpenL Tablets</a>
        <span style="margin: 0 10px">|</span>
        <a style="text-decoration: none" href="mailto:openltablets@eisgroup.com?subject=OpenL Tablets Feedback">Report a problem</a>

        <i style="position:absolute;right:13px;">
            v#{versionProperties['openl.version']}

            <c:set var="commitHash" value="#{fn:endsWith(versionProperties['openl.commit.hash'], '+') ? fn:substringBefore(versionProperties['openl.commit.hash'], '+') : versionProperties['openl.commit.hash']}" />
            <c:set var="commitUrlPrefix" value="#{versionProperties['openl.commit.urlPrefix']}" />
            <c:set var="hasCommitHash" value="#{!empty commitHash and !fn:startsWith(commitHash, '${')}" />
            <c:set var="hasCommitUrl" value="#{!empty commitUrlPrefix and !fn:startsWith(commitUrlPrefix, '${')}" />

            <h:panelGroup rendered="#{hasCommitHash}">
                Revision hash:
                <h:panelGroup rendered="#{hasCommitUrl}">
                    <a href="#{commitUrlPrefix}#{commitHash}">
                        <h:outputText value="#{commitHash}"/>
                    </a>
                </h:panelGroup>
                <h:panelGroup rendered="#{!hasCommitUrl}">
                    <h:outputText value="#{commitHash}"/>
                </h:panelGroup>
            </h:panelGroup>
        </i>
    </div>
</ui:composition>