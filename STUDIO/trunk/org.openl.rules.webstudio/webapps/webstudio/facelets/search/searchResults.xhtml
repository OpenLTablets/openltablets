<ui:composition
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:c="http://java.sun.com/jstl/core"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:a4j="http://richfaces.org/a4j">

    <c:set var="contextPath" value="#{facesContext.externalContext.request.contextPath}" />

    <a4j:repeat var="sr" value="#{searchResults}" binding="#{searchResultsBean.searchResults}">
        <c:set var="result" value="#{sr[1]}" />

        <table width="80%">
            <tr>
                <td style="width: 16px">
                    <h:graphicImage url="/webresource/images/excel.png" rendered="#{searchResultsBean.xlsFile}" />
                    <h:graphicImage url="/webresource/images/word.png" rendered="#{searchResultsBean.docFile}" />
                </td>
                <td style="vertical-align: top">
                    <h:outputLink value="#{contextPath}/jsp/showLinks.jsp?#{searchResultsBean.xlsOrDocUrlLink}"
                        target="show_app_hidden" title="View Result"
                        rendered="#{!searchResultsBean.readOnly or searchResultsBean.canViewTable}">
                        <h:outputText value="#{searchResultsBean.fileHeader}" />
                    </h:outputLink>
                    <h:outputText value="#{searchResultsBean.fileHeader}"
                        rendered="#{searchResultsBean.readOnly and !searchResultsBean.canViewTable}" />
                </td>
            </tr>
            <c:if test="#{searchResultsBean.xlsFile and !searchResultsBean.canViewTable}">
            <tr>
                <td style="width: 16px">
                    <h:graphicImage url="/webresource/images/viewTable.gif" />
                </td>
                <td style="vertical-align: top">
                    <h:outputLink
                        value="#{contextPath}/faces/facelets/tableeditor/showTable.xhtml?uri=#{searchResultsBean.encodedUri}"
                        title="View Table in Table Editor">
                        <h:outputText value="View Table" />
                    </h:outputLink>
                </td>
            </tr>
            </c:if>
            <tr>
                <td />
                <td>
                    <h:outputText value="#{result}" escape="false" />
                </td>
            </tr>
        </table>
        <p />
    </a4j:repeat>

</ui:composition>
