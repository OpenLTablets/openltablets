<ui:composition
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:c="http://java.sun.com/jstl/core"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:a4j="http://richfaces.org/a4j">

    <c:set var="contextPath" value="#{facesContext.externalContext.request.contextPath}" />

    <a4j:repeat var="sr" value="#{searchResults}" binding="#{searchResultsBean.searchResults}">
        <c:set var="uri" value="#{sr[0]}" />
        <c:set var="result" value="#{sr[1]}" />

        <table width="80%">
            <h:panelGroup rendered="#{searchResultsBean.xlsFile and !searchResultsBean.canViewTable}">
            <tr>
                <td style="width: 16px">
                    <h:graphicImage url="/webresource/images/viewTable.gif" />
                </td>
                <td style="vertical-align: top">
                    <h:outputLink
                        value="#{contextPath}/faces/facelets/tableeditor/showTable.xhtml"
                        title="View Table in Table Editor">
                        <f:param name="uri" value="#{uri}" />
                        <h:outputText value="View Table" />
                    </h:outputLink>
                </td>
            </tr>
            </h:panelGroup>
            <tr>
                <td style="width: 16px">
                    <h:graphicImage url="/webresource/images/excel.png" rendered="#{searchResultsBean.xlsFile}" />
                    <h:graphicImage url="/webresource/images/word.png" rendered="#{searchResultsBean.docFile}" />
                </td>
                <td style="vertical-align: top">
                    <h:outputText value="#{searchResultsBean.fileHeader}"
                        rendered="#{!searchResultsBean.projectEditable and !searchResultsBean.canViewTable}" />
                    <h:outputLink value="#{contextPath}/action/launch"
                        target="show_app_hidden" title="View Result"
                        rendered="#{searchResultsBean.projectEditable or searchResultsBean.canViewTable}">
                        <f:param name="uri" value="#{uri}" />
                        <h:outputText value="#{searchResultsBean.fileHeader}" />
                    </h:outputLink>
                </td>
            </tr>
            <tr>
                <td />
                <td>
                    <h:outputText value="#{result}" escape="false" />
                </td>
            </tr>
        </table>
        <p />
    </a4j:repeat>

</ui:composition>
