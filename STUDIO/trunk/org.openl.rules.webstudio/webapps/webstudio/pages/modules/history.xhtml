<ui:composition
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:c="http://java.sun.com/jsp/jstl/core"
    xmlns:jsffn="http://rules.openl.org/taglibs/jsffn"
    xmlns:a4j="http://richfaces.org/a4j"
    template="/pages/layout/view.xhtml">

    <ui:define name="toolbar">     
         <h:panelGrid id="backButtonGrid">
                <h:panelGroup layout="block">
                     <h:outputLink title="#{msg['ws.tables.visited.return']}" styleClass="imageButton"
                        style="background:url('webresource/images/back.png'); border: 0; background-color: transparent !important"
                        onclick="sessionStorage.removeItem(SHOW_HISTORY_ITEM); reloadLeft(); return false;" />
                 </h:panelGroup>
         </h:panelGrid>
    </ui:define>

    <ui:define name="workspace">
        <c:set var="recentlyVisitedTables" value="#{studio.model.recentlyVisitedTables.tables}" />
        
        <h:dataTable id="historyTable" value="#{recentlyVisitedTables}" var="table">
            <h:column>
                <h:graphicImage value="webresource/images/dt3.png" rendered="#{table.type == 'xls.dt'}" />
                <h:graphicImage value="webresource/images/spreadsheet.gif" rendered="#{table.type == 'xls.spreadsheet'}" />
                <h:graphicImage value="webresource/images/tbasic.gif" rendered="#{table.type == 'xls.tbasic'}" />
                <h:graphicImage value="webresource/images/cmatch.gif" rendered="#{table.type == 'xls.columnmatch'}" />
                <h:graphicImage value="webresource/images/data.gif" rendered="#{table.type == 'xls.data'}" />
                <h:graphicImage value="webresource/images/dataobject.gif" rendered="#{table.type == 'xls.datatype'}" />
                <h:graphicImage value="webresource/images/config_obj.gif" rendered="#{table.type == 'xls.environment'}" />
                <h:graphicImage value="webresource/images/method.gif" rendered="#{table.type == 'xls.method'}" />
                <h:graphicImage value="webresource/images/test_ok.gif" rendered="#{table.type == 'xls.test.method'}" />
                <h:graphicImage value="webresource/images/run.gif" rendered="#{table.type == 'xls.run.method'}" />
                <h:graphicImage value="webresource/images/data.gif" rendered="#{table.type == 'xls.properties'}" />
                <h:graphicImage value="webresource/images/leaf_icon.gif" rendered="#{table.type == 'xls.other'}" />
            </h:column>
            <h:column>
                <c:set var="encodedTableUri" value="#{jsffn:encodeURL(table.uri)}" />
                <h:outputLink value="#showTable.xhtml?uri=#{encodedTableUri}&amp;saveTable=false" rendered="#{!studio.model.recentlyVisitedTables.lastVisitedTable.equals(table)}"
                onclick="reloadLeft();" style="white-space:nowrap;" >
                    <h:outputText value="#{table.name}" />
                    <h:panelGroup rendered="#{empty table.name}">
                        <h:outputText value="Environment" rendered="#{table.type == 'xls.environment'}" />
                        <h:outputText value="Properties" rendered="#{table.type == 'xls.properties'}" />
                    </h:panelGroup>
                </h:outputLink>
                <h:panelGroup rendered="#{studio.model.recentlyVisitedTables.lastVisitedTable.equals(table)}" style="font-weight:bold;" >
                    <h:outputText value="#{table.name}" style="white-space:nowrap;" />
                    <h:panelGroup rendered="#{empty table.name}">
                        <h:outputText value="Environment" rendered="#{table.type == 'xls.environment'}" />
                        <h:outputText value="Properties" rendered="#{table.type == 'xls.properties'}" />
                    </h:panelGroup>
                </h:panelGroup>
            </h:column>
        </h:dataTable>
        
        <h:panelGroup rendered="#{empty recentlyVisitedTables}">
            <h:outputText value="#{msg['ws.tables.visited.no']}" />
        </h:panelGroup>
    </ui:define>

</ui:composition>
