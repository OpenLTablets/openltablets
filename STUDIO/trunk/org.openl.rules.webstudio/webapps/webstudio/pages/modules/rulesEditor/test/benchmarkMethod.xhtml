<?xml version="1.0" encoding="UTF-8"?>
<ui:composition
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:a4j="http://richfaces.org/a4j"
    xmlns:rich="http://richfaces.org/rich">

    <script>
      //<![CDATA[
        function toggleSelectAll(nItems) {
            var selectAllCheckBox = document.getElementById("BMForm:BMTable:selectAll");
            for(i = 0; i < nItems; i++) {
                var checkbox = document.getElementById("BMForm:BMTable:" + i + ":BM");
                if (checkbox) {
                    checkbox.checked = selectAllCheckBox.checked;
                }
            }
        }
      //]]>
    </script>

    <style>
        .matrix {
            border-collapse: collapse;
        }
        .matrixColumn {
            border: 1px solid #999999;
            padding: 5px 7px;
        }

        .paramColumn {
            border: 1px solid #999999;
            padding: 0px 0px;
        }
        
        .paramColumn table {
            border-collapse: collapse;
            width: 100%;
        }
        
        .paramColumn th, .paramColumn td {
            padding: 5px 7px;
        }

        .paramColumn th+th, .paramColumn td+td {
            border-left: 1px dotted #999999;
        }
        
        .paramColumn td {
            border-top: 1px dotted #999999
        }
    </style>

    <div class="view_header">Results of benchmarking</div>

    <div class="content">
        <h:form id="BMForm">
            <h:dataTable id="BMTable" value="#{benchmarkMethodBean.benchmarks}" var="item"
                binding="#{benchmarkMethodBean.htmlDataTableBM}" styleClass="matrix"
                columnClasses="none,matrixColumn,paramColumn,matrixColumn,matrixColumn,matrixColumn,matrixColumn,matrixColumn,matrixColumn">
                <h:column>
                    <h:outputText value="#{benchmarkMethodBean.i}." />
                </h:column>
                <h:column>
                    <f:facet name="header">
                        <h:outputText value="Name" />
                    </f:facet>
                    <h:outputLink value="#showTable.xhtml" target="content">
                        <f:param name="uri" value="#{benchmarkMethodBean.uri}" />
                        <h:outputText value="#{benchmarkMethodBean.tableName}" />
                    </h:outputLink>
                </h:column>
                <h:column>
                    <f:facet name="header">
                        <h:outputText value="Parameters" />
                    </f:facet>
                    <table>
                        <tr>
                            <ui:repeat value="#{benchmarkMethodBean.parameters}" var="parameter">
                                <th>#{parameter.name}</th>
                            </ui:repeat>
                        </tr>
                        <tr>
                            <ui:repeat value="#{benchmarkMethodBean.parameters}" var="parameter">
                                <td>
                                    <ui:include src="/pages/modules/rulesEditor/test/parameter.xhtml">
                                        <ui:param name="parameter" value="#{parameter}" />
                                    </ui:include>
                                </td>
                            </ui:repeat>
                        </tr>
                    </table>
                </h:column>
                <h:column>
                    <f:facet name="header">
                        <h:outputText value="Runs(ms)" />
                    </f:facet>
                    <h:outputText value="#{benchmarkMethodBean.msrun}" />
                </h:column>
                <h:column>
                    <f:facet name="header">
                        <h:outputText value="Runs/sec" />
                    </f:facet>
                    <h:outputText value="#{benchmarkMethodBean.runssec}" />
                </h:column>
                <h:column>
                    <f:facet name="header">
                        <h:outputText value="Unit Type" />
                    </f:facet>
                    <h:outputText
                        value="#{benchmarkMethodBean.unitName}" />
                </h:column>
                <h:column>
                    <f:facet name="header">
                        <h:outputText value="Units" />
                    </f:facet>
                    <h:outputText
                        value="#{benchmarkMethodBean.unitRuns}" />
                </h:column>
                <h:column>
                    <f:facet name="header">
                        <h:outputText value="Unit(ms)" />
                    </f:facet>
                    <h:outputText
                        value="#{benchmarkMethodBean.msrununit}" />
                </h:column>
                <h:column>
                    <f:facet name="header">
                        <h:outputText value="Units/sec" />
                    </f:facet>
                    <h:outputText
                        value="#{benchmarkMethodBean.runsunitsec}" />
                </h:column>
                <h:column>
                    <f:facet name="header">
                        <h:selectBooleanCheckbox id="selectAll"
                            onclick="toggleSelectAll(#{benchmarkMethodBean.benchmarkCount})" />
                    </f:facet>
                    <h:selectBooleanCheckbox id="BM" value="#{benchmarkMethodBean.bencmarkSelected}" />
                </h:column>
            </h:dataTable>
            
            <br />

            <a4j:commandButton action="#{benchmarkMethodBean.compare}"
                value="Compare" render="comparedBMTable"/>
            <a4j:commandButton action="#{benchmarkMethodBean.delete}"
                value="Delete" render="comparedBMTable BMTable"/>
            <br />
            <br />
        <h:dataTable id="comparedBMTable" value="#{benchmarkMethodBean.comparedBenchmarks}" var="item"
            binding="#{benchmarkMethodBean.htmlDataTableBMCompared}" styleClass="matrix"
            columnClasses="none,matrixColumn,matrixColumn,matrixColumn,matrixColumn,matrixColumn,matrixColumn,matrixColumn">
            <h:column>
                <h:outputText value="#{benchmarkMethodBean.comparedI}." />
            </h:column>
            <h:column>
                <h:outputText value="#{benchmarkMethodBean.tableName}" />
            </h:column>
            <h:column>
                <h:outputText
                    value="#{benchmarkMethodBean.comparedRunsunitsec}" />
            </h:column>
            <h:column>
                <h:outputText
                    style="#{benchmarkMethodBean.styleForOrder}"
                    value="#{benchmarkMethodBean.comparedOrder}" />
            </h:column>
            <h:column>
                <h:outputText
                    value="#{benchmarkMethodBean.comparedRatio}" />
            </h:column>
        </h:dataTable>

        </h:form>
    </div>
</ui:composition>