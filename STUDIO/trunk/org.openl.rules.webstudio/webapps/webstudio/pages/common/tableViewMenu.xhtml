<?xml version="1.0" encoding="UTF-8"?>
<ui:composition
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:c="http://java.sun.com/jsp/jstl/core"
    xmlns:fn="http://java.sun.com/jsp/jstl/functions">

    <style>
        table.menu {
            position: absolute;
            visibility: hidden;
            border: 1px solid rgb(200, 200, 200);
            background: #ffffff;
            padding: 0 1px;
        }
        span.menuButton {
            border: 1px solid rgb(200, 200, 200);
            padding: 3px;
            display: inline-block;
        }
        .colorButton {
            width: 14px;
            height: 14px;
            display: inline-block;
        }
    </style>

    <script>
        function showmenu(elmnt) {
            document.getElementById(elmnt).style.visibility = "visible";
        }
        function hidemenu(elmnt) {
            document.getElementById(elmnt).style.visibility = "hidden";
        }
    </script>

    <c:set value="#{tableViewMenuBean.filterHolder}" var="filterHolder" />

    <div class="menudiv" style="width: 110px"
        onmouseover="showmenu('blends')" onmouseout="hidemenu('blends')">
        <table cellspacing="0" cellpadding="0">
            <tr>
                <td>
                    <span class="menuButton">
                        <span style="background: #{filterHolder.imageName}" class="colorButton" />
                    </span>
                </td>
            </tr>
            <tr>
                <td>
                    <table class="menu" id="blends">
                        <tr>
                        <c:forEach begin="0" end="#{fn:length(tableViewMenuBean.filterImageNames) - 1}"
                            var="filterId">
                            <c:if test="#{filterHolder.imageName != tableViewMenuBean.filterImageNames[filterId]}">
                            <td>
                                <a href="?#{tableViewMenuBean.requestParams}&amp;filterType=#{filterId}"
                                    title="#{tableViewMenuBean.filterNames[filterId]}">
                                    <span class="colorButton"
                                        style="background: #{tableViewMenuBean.filterImageNames[filterId]}" /></a>
                            </td>
                            </c:if>
                        </c:forEach>
                        <td>
                            <a href="?#{tableViewMenuBean.requestParams}&amp;transparency=down">
                                <img src="webresource/images/arrow_open.png"
                                    title="Less Transparent (#{filterHolder.transparency}%)"/></a>
                        </td>
                        <td>
                            <a href="?#{tableViewMenuBean.requestParams}&amp;transparency=up">
                                <img src="webresource/images/arrow_close.png"
                                    title="More Transparent (#{filterHolder.transparency}%)"/></a>
                        </td>
                        </tr>
                   </table>
                 </td>
             </tr>
         </table>
     </div>

</ui:composition>