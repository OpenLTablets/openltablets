var Tooltip=Class.create({firedTooltips:$H(),initialize:function(d,b,c){var a=this;this.element=$(d);this.content=b;this.params=c;if(c&&c.showOn){this.showOn=c.showOn instanceof Array?c.showOn:[c.showOn]}else{this.showOn=["mouseover"]}if(c&&c.hideOn){this.hideOn=c.hideOn instanceof Array?c.hideOn:[c.hideOn]}else{this.hideOn=["mouseout"]}this.showOn.each(function(f){a.showHandler=a.show.bindAsEventListener(a);Event.observe(a.element,f,a.showHandler)});this.hideOn.each(function(f){a.hideHandler=a.hide.bindAsEventListener(a);Event.observe(a.element,f,a.hideHandler)})},show:function(){var b=this.createTooltip();if(!this.firedTooltips.get(this.element.id)){document.body.appendChild(b);this.firedTooltips.set(this.element.id,b);var a=(this.params&&this.params.position)?this.params.position:"top_right";b.addClassName("tooltip_"+a);this.applyStylesToPointer(b);var c=this.calculateInitPosition(b,a);b.style.left=c[0]+"px";b.style.top=c[1]+"px"}},calculateInitPosition:function(c,a){var b=Element.viewportOffset(this.element);switch(a){case"top_right":b[0]+=(this.element.getWidth()-25);b[1]-=(this.element.getHeight()+c.getHeight()-4);break;case"top_center":break;case"top_left":b[0]-=(c.getWidth()-25);b[1]-=(this.element.getHeight()+c.getHeight()-4);break;case"right_bottom":b[0]+=(this.element.getWidth()+10);b[1]-=4;break;case"right_center":break;case"right_bottom":break;case"bottom_right":break;case"bottom_center":break;case"bottom_left":break;case"left_top":break;case"left_center":break;case"left_bottom":break}return b},applyStylesToPointer:function(b){var c=b.down("div.tooltip_pointer_body");if(c){var a=b.getStyle("backgroundColor");c.setStyle({borderTopColor:a})}},createTooltip:function(){var c=new Element("div");c.id=this.element.id+"_tooltip";c.update(this.content);var d=this.params&&this.params.skin?this.params.skin:"default";var b="tooltip_skin-"+d;var e=this.params&&this.params.pointer==false?false:true;if(e){var f=new Element("div");f.addClassName("tooltip_pointer");f.addClassName(b);var a=new Element("div");a.addClassName("tooltip_pointer_body");f.appendChild(a);c.appendChild(f)}if(this.params){if(this.params.width){c.style.width=this.params.width}else{if(this.params.maxWidth){c.style.maxWidth=this.params.maxWidth}else{c.style.maxWidth="140px"}}}c.addClassName("tooltip");c.addClassName(b);c.addClassName("corner_all");c.addClassName("shadow_all");return c},hide:function(){var a=this.firedTooltips.get(this.element.id);if(a){this.firedTooltips.unset(this.element.id);document.body.removeChild(a)}}});var ScriptLoader=Class.create({initialize:function(){},extractScripts:function(b){if(b){b=b.toString();var d=new RegExp(Prototype.ScriptFragment,"img");var a=b.match(d)||[];var c=new Element("div");(c=$(c)).innerHTML=","+a.join(",");return c.select("script")}},evalScripts:function(a){this.extractScripts(a).each(this.evalScript)},evalScript:function(a){if(a){var c=$$("head")[0];var b=new Element("script");b.type="text/javascript";if(scriptSrc=a.src){b.src=scriptSrc}else{if(scriptBody=(a.innerHTML||a.text)){if(Prototype.Browser.IE){b.text=scriptBody}else{b.appendChild(document.createTextNode(scriptBody))}}}setTimeout(function(){c.appendChild(b)},10)}}});var TableEditor=Class.create({Modes:{VIEW:0,EDIT:1},editorId:-1,mode:null,editable:null,tableContainer:null,currentElement:null,editorName:null,editor:null,editorSwitched:false,baseUrl:null,selectionPos:null,selectionHistory:[],decorator:null,rows:0,columns:0,editCell:null,cellIdPrefix:null,actions:null,editorWrapper:null,switchEditorMenu:null,toolbar:null,fillColorPicker:null,fontColorPicker:null,hasChanges:false,initialize:function(d,b,g,f,e,c){this.mode=e||this.Modes.VIEW;this.editorId=d;this.cellIdPrefix=this.editorId+"_cell-";this.tableContainer=$(d+"_table");this.actions=f;this.editable=c!==false;this.tableContainer.onselectstart=function(){return false};this.tableContainer.onmousedown=function(){return false};if(g){this.editCell=g}this.baseUrl=b;var a=this;Event.stopObserving(document,"click");Event.stopObserving(document,"keydown");Event.stopObserving(document,"keypress");this.tableContainer.stopObserving("dblclick");if(this.mode==this.Modes.EDIT){this.initEditMode()}this.tableContainer.observe("dblclick",function(h){a.handleDoubleClick(h)})},toEditMode:function(b){if(!b){b=$(PopupMenu.lastTarget)}var a;if(b){a=b.id.split(this.cellIdPrefix)[1]}this.mode=this.Modes.EDIT;this.initEditMode();this.editCell=a;this.startEditing()},initEditMode:function(){var a=this;initToolbar();a.toolbar=$(a.editorId).down(".te_toolbar");a.editorWrapper=$(a.editorId+"_editorWrapper");this.decorator=new Decorator("te_selected");Event.observe(document,"click",function(b){a.handleClick(b)});Event.observe(document,"keydown",function(b){a.handleKeyDown(b)});Event.observe(document,"keypress",function(b){a.handleKeyPress(b)});a.toolbar.show();this.computeTableInfo()},handleResponse:function(response,callback){var data=eval(response.responseText);if(data.message){this.error(data.message)}else{if(data.html){this.renderTable(data.html);this.selectElement()}if(data.hasUndo===true||data.hasUndo===false){this.hasChanges=data.hasUndo;this.undoStateUpdated(data.hasUndo);this.redoStateUpdated(data.hasRedo)}if(callback){callback(data)}}},handleError:function(b){if(b.status==399){var a=b.getResponseHeader("Location");if(a){top.location.href=a;return}}this.error("Sorry! Server failed to apply your changes!")},error:function(a){if(this.actions&&this.actions.error){this.actions.error({message:a})}else{alert(a)}},doOperation:function(c,d,a){var b=this;new Ajax.Request(this.buildUrl(c),{parameters:d,onSuccess:function(e){b.handleResponse(e,a)},onFailure:function(e){b.handleError(e)}})},startEditing:function(){if(this.editCell&&this.editCell.indexOf(":")>0){var b=this.editCell.split(":");var a=this.$cell(b);if(a){this.editBeginRequest(a,null,true)}}},renderTable:function(a){this.tableContainer.innerHTML=a.stripScripts();new ScriptLoader().evalScripts(a);this.computeTableInfo()},computeTableInfo:function(){var a=$(this.tableContainer.childNodes[0]);this.rows=0;this.columns=0;var b=a.down("tr");if(b){var c=b.down("td");while(c){this.columns+=c.colSpan?c.colSpan:1;c=c.next("td")}}while(b){var c=b.down("td");if(c){this.rows+=c.rowSpan?c.rowSpan:1}b=b.next("tr")}},save:function(){this.setCellValue();var a=this;var b=true;if(this.actions&&this.actions.beforeSave){b=this.actions.beforeSave()}if(b==false){return}this.doOperation(TableEditor.Operations.SAVE,{editorId:this.editorId},function(c){if(a.actions&&a.actions.afterSave){a.actions.afterSave({newUri:c.uri})}})},saveChanges:function(){this.setCellValue();var b=this;var a=true;if(this.actions&&this.actions.beforeSave){a=this.actions.beforeSave()}if(a==false){return}this.doOperation(TableEditor.Operations.SAVE,{editorId:this.editorId},hideLoader())},rollback:function(){this.doOperation(TableEditor.Operations.ROLLBACK,params,function(a){window.onbeforeunload=Prototype.emptyFunction})},handleClick:function(b){var a=Event.element(b);if(this.editor&&this.editor.is(a)){return}if(this.switchEditorMenu){try{if(this.switchEditorMenu.has(a)){return}}finally{this.switchEditorMenu.hide();this.switchEditorMenu=null}}this.setCellValue();if(this.isCell(a)){this.selectElement(a);this.isFormated(a)}else{if(this.isToolbar(a)){}else{this.tableBlur()}}},isFormated:function(d){var i=this.currentElement;var f=this.decorator;var h=$(this.editorId+"_font_bold");var g=$(this.editorId+"_font_italic");var e=$(this.editorId+"_font_underline");var c=$(this.editorId+"_align_right");var a=$(this.editorId+"_align_center");var j=$(this.editorId+"_align_left");function b(k,l){l?f.decorateToolBar(k):f.undecorateToolBar(k)}b(h,i.style.fontWeight=="bold");b(g,i.style.fontStyle=="italic");b(e,i.style.textDecoration=="underline");b(c,i.style.textAlign=="right");b(a,i.style.textAlign=="center");b(j,i.style.textAlign=="left");b(j,i.style.textAlign=="")},handleDoubleClick:function(b){var a=Event.findElement(b,"td");if(a){switch(this.mode){case this.Modes.EDIT:this.setCellValue();this.editBeginRequest(a);Event.stop(b);break;case this.Modes.VIEW:default:if(this.editable){this.toEditMode(a)}break}}},handleKeyPress:function(a){if(!this.isCell(this.currentElement)){return}if(this.editor){switch(a.keyCode){case 27:this.editor.cancelEdit();break;case 13:if(this.editor.__do_nothing_on_enter!==true){this.setCellValue(this.unescapeHTML(this.currentElement.innerHTML.replace(/<br>/ig,"\n")).strip())}break}return}if(a.keyCode==13){if(this.hasSelection()){this.editBeginRequest(this.currentElement)}return}if(this.hasSelection()){if([a.ctrlKey,a.altKey,a.shiftKey,a.metaKey].any()){return}if(a.charCode!=undefined){if(a.charCode==0){return true}}else{if(a.keyCode<32||TableEditor.isNavigationKey(a.keyCode)){return true}}this.editBeginRequest(this.currentElement,a.charCode||a.keyCode)}},handleKeyDown:function(d){if(!this.isCell(this.currentElement)){return}if(this.editor){switch(d.keyCode){case 113:this.editor.handleF2(d);break;case 114:this.editor.handleF3(d);break}return}if(!TableEditor.isNavigationKey(d.keyCode)){return}if(!this.hasSelection()){this.selectionPos=[1,1];this.selectElement();return}var e=this.selectionPos.clone();if(this.selectionHistory.length>0&&this.selectionHistory.last()[0]==d.keyCode){this.selectElement(null,-1);return}var b=function(g,j){var i=e[g];while(e[g]>=1&&!this.$cell(e)){--e[g]}var h=this.$cell(e);if(!j){e[g]=i}return h};switch(d.keyCode){case 37:case 38:var a=null;var c=d.keyCode==38?0:1;while(--e[c]>=1){a=b.call(this,1-c,true);if(a){if((e[0]+a.rowSpan>=this.selectionPos[0]+c)&&(e[1]+a.colSpan>=this.selectionPos[1]+1-c)){break}}e[1-c]=this.selectionPos[1-c]}if(a){this.selectElement(a,d.keyCode+2)}break;case 39:case 40:var c=d.keyCode==40?0:1;e[c]+=this.currentElement[["rowSpan","colSpan"][c]];if(e[c]>this[["rows","columns"][c]]){break}var f=b.call(this,1-c);if(f){this.selectElement(f,d.keyCode-2)}break}},editBeginRequest:function(a,e,d){if(!d&&Ajax.activeRequestCount>0){return}var b=this;this.selectElement(a);var c=undefined;if(e){c=String.fromCharCode(e)}var f={editorId:this.editorId,row:b.selectionPos[0],col:b.selectionPos[1]};this.doOperation(TableEditor.Operations.GET_CELL_EDITOR,f,function(g){b.editBegin(a,g,c)})},editBegin:function(b,c,a){if(!a){if(c.initValue){a=c.initValue}else{a=this.unescapeHTML(b.innerHTML.replace(/<br>/ig,"\n")).strip()}}var d=this.getCellEditorStyle(b);this.showEditorWrapper(b);this.showCellEditor(c.editor,this.editorWrapper,a,c.params,d);this.editCell=b;this.selectElement(b)},showCellEditor:function(f,g,i,e,b){var j=this;if(f=="array"){var c=e.entryEditor;if(c){e.entryEditor=new TableEditor.Editors[c]("","",e)}}this.editor=new TableEditor.Editors[f](this,g.id,e,i,true,b);this.editorName=f;if(f=="multiline"){var h=this.editor.getInputElement();var a=h.getHeight();h.style.height=(a+20)+"px"}var d=this.getAvailableEditors(f);if(d.size()>0){this.editor.input.oncontextmenu=function(k){if(!j.switchEditorMenu){j.switchEditorMenu=j.createSwitchEditorMenu(d);j.switchEditorMenu.left=k.clientX+2;j.switchEditorMenu.top=k.clientY;j.switchEditorMenu.show();return false}}}},createSwitchEditorMenu:function(c){var a=this;var b=new Element("div");var d=new Element("div");d.className="te_menu_header";d.innerHTML="Switch to:";b.appendChild(d);c.each(function(h){var g=new Element("div");g.className="te_menu_item";var f=new Element("a");f.observe("click",function(){a.switchEditor(h.key)});f.innerHTML=h.value;g.appendChild(f);["mouseover","mouseout"].each(function(e){g.observe(e,function(){this.toggleClassName("te_menu_item_hover")})});b.appendChild(g)});return new Popup(b)},getAvailableEditors:function(b){var a=$H();if(b!="formula"&&b!="text"&&b!="multiline"){a.set("formula","Formula Editor")}if(b=="multiline"){a.set("text","Text Editor")}if(b=="text"){a.set("multiline","Multiline Editor")}return a},switchEditor:function(f,e){var b=this.editor;var d=b.parentElement;var a=b.isCancelled()?b.initialValue:b.getValue();var c=b.style;this.showCellEditor(f,d,a,e,c);b.isCancelled=function(){return true};b.destroy();this.editorSwitched=true},showEditorWrapper:function(a){var c=41;var b=a.offsetWidth-2;if(b<c){a.style.minWidth=c+"px";b=a.offsetWidth-2}this.editorWrapper.style.width=b+"px";this.editorWrapper.style.height=a.offsetHeight-2+"px";var d=Element.positionedOffset(a);this.editorWrapper.style.left=d[0]+"px";this.editorWrapper.style.top=d[1]+"px";this.editorWrapper.show()},getCellEditorStyle:function(a){if(a){return{fontFamily:a.style.fontFamily,fontSize:a.style.fontSize,fontWeight:a.style.fontWeight,fontStyle:a.style.fontStyle,textAlign:a.style.textAlign,padding:"1px"}}},setCellValue:function(b){if(this.editor){if(this.editCell&&this.editCell.style){this.editCell.style.minWidth=null}if(b){this.editor.initialValue=b}if(!this.editor.isCancelled()){var d=this.editor.getValue();var a=this;var c={editorId:this.editorId,row:a.selectionPos[0],col:a.selectionPos[1],value:d,editor:this.editorSwitched?this.editorName:""};this.doOperation(TableEditor.Operations.SET_CELL_VALUE,c)}this.editor.destroy();this.editorWrapper.hide();this.editor=null;this.editorName=null;this.editorSwitched=false}},buildUrl:function(b,c){var a=this.baseUrl+b;if(c){a=a+"?"+c}return a},selectElement:function(d,c){if(d&&this.currentElement&&d.id==this.currentElement.id){return}var e=this.hasSelection();if(d&&c){if(this.selectionPos){this.selectionHistory.push([c,this.selectionPos[0],this.selectionPos[1]])}if(this.selectionHistory.length>10){this.selectionHistory.shift()}}else{if(c==-1){var b=this.selectionHistory.pop();this.selectionPos[0]=b[1];this.selectionPos[1]=b[2]}else{this.selectionHistory.clear()}}if(d){var a=this.elementPosition(d);if(!a){return}this.selectionPos=a}else{if(this.selectionPos){d=this.$cell(this.selectionPos)}}this.decorator.undecorate(this.currentElement);this.decorator.decorate(this.currentElement=d);if(!e!=!this.hasSelection()){this.isSelectedUpdated(!e)}},tableBlur:function(){if(this.currentElement){this.decorator.undecorate(this.currentElement);this.currentElement=null;this.selectionPos=null;this.isSelectedUpdated(false)}},$cell:function(b){var a=$(this.cellIdPrefix+b[0]+":"+b[1]);if(!a){return a}if(!a.rowSpan){a.rowSpan=1}if(!a.colSpan){a.colSpan=1}return a},isCell:function(a){return a&&a.id.indexOf(this.cellIdPrefix)>=0},isToolbar:function(b){if(!b){return false}var c=b.up(".te_toolbar");var a;if(!c){do{if(b.nodeName=="DIV"&&b.hasClassName("cp_palette")){a=b;break}}while(b=b.parentNode)}return(c&&c.up().id.indexOf(this.editorId)>=0)||(a&&a.up().id.indexOf("_color_colorPicker")>=0)},undoredo:function(a){if(Ajax.activeRequestCount>0){return}this.doOperation(a?TableEditor.Operations.REDO:TableEditor.Operations.UNDO,{editorId:this.editorId})},elementPosition:function(a){var d=$(a).id;var c=d.lastIndexOf("-");if(c<0){return null}var b=d.substr(c+1).split(":",2);b[0]=parseInt(b[0]);b[1]=parseInt(b[1]);return b},setAlignment:function(f,d){if(!this.checkSelection()){return}var b=this.currentElement;var c=this;var e=b.style.textAlign;var a;if(e){a=$(this.editorId+"_align_"+e)}else{a=$(this.editorId+"_align_left")}var g={editorId:this.editorId,row:this.selectionPos[0],col:this.selectionPos[1],align:f};if(a){this.decorator.undecorateToolBar(a)}this.decorator.decorateToolBar(d);this.doOperation(TableEditor.Operations.SET_ALIGN,g,function(h){if(c.editor){c.editor.input.style.textAlign=f}b.style.textAlign=f})},selectFillColor:function(b){var a=this;this.currentFillColor=this.currentElement.style.backgroundColor;if(!this.fillColorPicker){this.fillColorPicker=new ColorPicker(b,a.toolbar,function(c){a.setColor(c,TableEditor.Operations.SET_FILL_COLOR)},{showOn:false,onMouseOver:function(){a.decorator.undecorate(a.currentElement)},onColorMouseOver:function(c){a.currentElement.style.backgroundColor=c},onMouseOut:function(){a.currentElement.style.backgroundColor=a.currentFillColor;a.decorator.decorate(a.currentElement)}})}this.fillColorPicker.show()},selectFontColor:function(b){var a=this;this.currentFontColor=this.currentElement.style.color;if(!this.fontColorPicker){this.fontColorPicker=new ColorPicker(b,a.toolbar,function(c){a.setColor(c,TableEditor.Operations.SET_FONT_COLOR)},{showOn:false,onMouseOver:function(){a.decorator.undecorate(a.currentElement)},onColorMouseOver:function(c){a.currentElement.style.color=c},onMouseOut:function(){a.currentElement.style.color=a.currentFontColor;a.decorator.decorate(a.currentElement)}})}this.fontColorPicker.show()},setColor:function(b,a){if(!this.checkSelection()){return}var c={editorId:this.editorId,row:this.selectionPos[0],col:this.selectionPos[1],color:b};this.doOperation(a,c)},indent:function(b){if(!this.checkSelection()){return}var a=this.currentElement;var c={editorId:this.editorId,row:this.selectionPos[0],col:this.selectionPos[1],indent:b};this.doOperation(TableEditor.Operations.SET_INDENT,c,function(d){var e=0;if(a.style.paddingLeft.indexOf("em")>0){e=parseFloat(a.style.paddingLeft)}else{if(a.style.paddingLeft.indexOf("px")>0){e=parseFloat(a.style.paddingLeft)*0.063}}e+=parseInt(b);if(e>=0){a.style.paddingLeft=e+"em"}})},setFontBold:function(d){if(!this.checkSelection()){return}var a=this.currentElement;var c=a.style.fontWeight=="bold";var b=this.decorator;var e={editorId:this.editorId,row:this.selectionPos[0],col:this.selectionPos[1],bold:!c};this.decorator.decorateToolBar(d);this.doOperation(TableEditor.Operations.SET_FONT_BOLD,e,function(f){if(c){a.style.fontWeight="normal";b.undecorateToolBar(d)}else{a.style.fontWeight="bold"}})},setFontItalic:function(c){if(!this.checkSelection()){return}var a=this.currentElement;var d=a.style.fontStyle=="italic";var b=this.decorator;var e={editorId:this.editorId,row:this.selectionPos[0],col:this.selectionPos[1],italic:!d};this.decorator.decorateToolBar(c);this.doOperation(TableEditor.Operations.SET_FONT_ITALIC,e,function(f){if(d){a.style.fontStyle="normal";b.undecorateToolBar(c)}else{a.style.fontStyle="italic"}})},setFontUnderline:function(c){if(!this.checkSelection()){return}var a=this.currentElement;var e=a.style.textDecoration=="underline";var b=this.decorator;var d={editorId:this.editorId,row:this.selectionPos[0],col:this.selectionPos[1],underline:!e};this.decorator.decorateToolBar(c);this.doOperation(TableEditor.Operations.SET_FONT_UNDERLINE,d,function(f){if(e){a.style.textDecoration="none";b.undecorateToolBar(c)}else{a.style.textDecoration="underline"}})},checkSelection:function(){if(!this.hasSelection()){this.error("Nothing is selected");return false}return true},doTableOperation:function(a){if(!this.checkSelection()){return}var b={editorId:this.editorId,row:this.selectionPos[0],col:this.selectionPos[1]};this.doOperation(a,b)},unescapeHTML:function(a){return a.replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&nbsp;/g," ")},hasSelection:function(){return this.selectionPos&&this.currentElement},undoStateUpdated:Prototype.emptyFunction,redoStateUpdated:Prototype.emptyFunction,isSelectedUpdated:Prototype.emptyFunction});TableEditor.Editors=$H();TableEditor.Operations={GET_CELL_EDITOR:"getCellEditor",GET_CELL_VALUE:"getCellValue",SET_CELL_VALUE:"setCellValue",SET_ALIGN:"setAlign",SET_FILL_COLOR:"setFillColor",SET_FONT_COLOR:"setFontColor",SET_FONT_BOLD:"setFontBold",SET_FONT_ITALIC:"setFontItalic",SET_FONT_UNDERLINE:"setFontUnderline",SET_INDENT:"setIndent",REMOVE_ROW:"removeRow",REMOVE_COLUMN:"removeColumn",INSERT_ROW_BEFORE:"insertRowBefore",INSERT_COLUMN_BEFORE:"insertColumnBefore",UNDO:"undo",REDO:"redo",SAVE:"saveTable",ROLLBACK:"rollbackTable"};TableEditor.isNavigationKey=function(a){return a>=37&&a<=41};var Decorator=Class.create({initialize:function(a){this.selectStyleClass=a},decorate:function(a){if(a){a.addClassName(this.selectStyleClass)}},undecorate:function(a){if(a){a.removeClassName(this.selectStyleClass)}},undecorateToolBar:function(a){$(a).removeClassName("te_toolbar_item_pressed")},decorateToolBar:function(a){$(a).addClassName("te_toolbar_item_pressed")}});function openMenu(b,a){a.preventDefault();PopupMenu.sheduleShowMenu(b,a,150)}function closeMenu(){PopupMenu.cancelShowMenu()}var save_item="_save_all";var undo_item="_undo";var redo_item="_redo";var indent_items=["_decrease_indent","_increase_indent"];var align_items=["_align_left","_align_center","_align_right"];var addremove_items=["_insert_row_before","_remove_row","_insert_column_before","_remove_column"];var font_items=["_font_bold","_font_italic","_font_underline"];var color_items=["_fill_color","_font_color"];var other_items=["_help"];var itemClass="te_toolbar_item";var disabledClass="te_toolbar_item_disabled";var overClass="te_toolbar_item_over";var pressedClass="te_toolbar_item_pressed";function initTableEditor(d,a,c,g,f,b){var e=new TableEditor(d,a,c,g,f,b);e.undoStateUpdated=function(h){[save_item,undo_item].each(function(i){processItem(getItemId(d,i),h)})};e.redoStateUpdated=function(h){processItem(getItemId(d,redo_item),h)};e.isSelectedUpdated=function(h){[indent_items,align_items,font_items,color_items,addremove_items,other_items].flatten().each(function(i){processItem(getItemId(d,i),h)})};e.startEditing();return e}function initToolbar(){$$("."+itemClass).each(function(a){processItem(a,false);a.onmouseover=function(){this.addClassName(overClass)};a.onmouseout=function(){this.removeClassName(overClass)}})}function processItem(b,a){if(a){enableToolbarItem(b)}else{disableToolbarItem(b)}}function getItemId(a,b){if(a&&b){return a+b}}function enableToolbarItem(a){if(!isToolbarItemDisabled(a=$(a))){return}a.removeClassName(disabledClass);a.removeClassName(pressedClass);if(a._mouseover){a.onmouseover=a._mouseover}if(a._mouseout){a.onmouseout=a._mouseout}if(a._onclick){a.onclick=a._onclick}a._onmouseover=a._onmouseout=a._onclick=""}function disableToolbarItem(a){if(isToolbarItemDisabled(a=$(a))){return}if(a){a.addClassName(disabledClass);a.removeClassName(pressedClass);a._mouseover=a.onmouseover;a._mouseout=a.onmouseout;a._onclick=a.onclick;a.onmouseover=a.onmouseout=a.onclick=Prototype.emptyFunction}}function isToolbarItemDisabled(a){if(a){return a.hasClassName(disabledClass)&&a._onclick}}var PopupMenu={showChild:function(b,a){document.getElementById(b).style.display=a?"inline":"none"},menu_ie:!!(window.attachEvent&&!window.opera),menu_ns6:document.getElementById&&!document.all,menuON:false,te_menu:undefined,delayedFunction:undefined,disappearFunction:undefined,disappearInterval1:5000,disappearInterval2:1000,delayedState:{extraClass:undefined,evt:{},contentElement:undefined},lastTarget:null,getWindowSize:function(){var b=0,a=0;if(typeof(window.innerWidth)=="number"){b=window.innerWidth;a=window.innerHeight}else{if(document.documentElement&&(document.documentElement.clientWidth||document.documentElement.clientHeight)){b=document.documentElement.clientWidth;a=document.documentElement.clientHeight}else{if(document.body&&(document.body.clientWidth||document.body.clientHeight)){b=document.body.clientWidth;a=document.body.clientHeight}}}return[b,a]},getScrollXY:function(){var b=0,a=0;if(typeof(window.pageYOffset)=="number"){a=window.pageYOffset;b=window.pageXOffset}else{if(document.body&&(document.body.scrollLeft||document.body.scrollTop)){a=document.body.scrollTop;b=document.body.scrollLeft}else{if(document.documentElement&&(document.documentElement.scrollLeft||document.documentElement.scrollTop)){a=document.documentElement.scrollTop;b=document.documentElement.scrollLeft}}}return[b,a]},_showPopupMenu:function(h,c,f){this.cancelDisappear();var d=this.getScrollXY();var j=this.getWindowSize();this.te_menu.style.visibility="hidden";this.te_menu.innerHTML=document.getElementById(h).innerHTML;this.te_menu.style.display="inline";var e=this.te_menu.clientWidth;var g=this.te_menu.clientHeight;var b=c.clientX+5;var i=25;if(b+i+e>j[0]){b=j[0]-i-e}if(b<0){b=0}var a=c.clientY+5;i=5;if((window.opera&&document.body.scrollWidth>j[0])||(window.scrollMaxX&&window.scrollMaxX>0)){i=25}if(a+i+g>j[1]){a=c.clientY-5-g}if(a<0){a=j[1]-i-g}b+=d[0];a+=d[1];if(this.menu_ns6){this.te_menu.style.left=b+"px";this.te_menu.style.top=a+"px"}else{this.te_menu.style.pixelLeft=b;this.te_menu.style.pixelTop=a}if(f){this.te_menu.className="te_menu "+f}else{this.te_menu.className="te_menu"}this.te_menu.style.visibility="visible";this.menuON=true;this.disappearFunction=setTimeout("PopupMenu.closeMenu()",this.disappearInterval1);this.lastTarget=this.delayedState.evt.target||this.delayedState.evt.srcElement},cancelDisappear:function(){if(this.disappearFunction){clearTimeout(this.disappearFunction)}this.disappearFunction=undefined},closeMenu:function(){this.cancelDisappear();if(this.menuON){this.te_menu.style.display="none"}},inMenuDiv:function(a){if(a==undefined){return false}if(a==this.te_menu){return true}if(a.tagName&&a.tagName.toLowerCase()=="a"){return false}return this.inMenuDiv(a.parentNode)},getTarget:function(c){var a=this.menu_ie?window.event:c;var b=undefined;if(a.target){return a.target}else{if(a.srcElement){return a.srcElement}}return undefined},_init:function(c,a,d){document.onclick=function(g){var f=PopupMenu.getTarget(g);if(f&&(f.name!="menurevealbutton")&&!PopupMenu.inMenuDiv(f)){PopupMenu.closeMenu()}return true};try{this.te_menu=document.createElement('<div id="divmenu" class="te_menu" style="display:none; float:none;z-index:5; position:absolute;">')}catch(b){this.te_menu=document.createElement("div");this.te_menu.setAttribute("class","te_menu");this.te_menu.setAttribute("id","divmenu");this.te_menu.style.display="none";this.te_menu.style.cssFloat="none";this.te_menu.style.zIndex="5";this.te_menu.style.position="absolute"}this.te_menu.onmouseout=function(f){if(PopupMenu.getTarget(f)==PopupMenu.te_menu){PopupMenu.cancelDisappear();PopupMenu.disappearFunction=setTimeout("PopupMenu.closeMenu()",PopupMenu.disappearInterval2)}};this.te_menu.onmouseover=function(f){PopupMenu.cancelDisappear()};document.body.appendChild(this.te_menu);this.showPopupMenu=this._showPopupMenu;this.sheduleShowMenu=this._sheduleShowMenu},cancelShowMenu:function(){if(this.delayedFunction){clearTimeout(this.delayedFunction)}this.delayedFunction=undefined},showAfterDelay:function(){if(!document.getElementById(this.delayedState.contentElement)){return}this.te_menu.style.display="none";this._showPopupMenu(this.delayedState.contentElement,this.delayedState.evt,this.delayedState.extraClass)},_sheduleShowMenu:function(c,b,a,d){this.cancelShowMenu();this.delayedState.evt.clientX=b.clientX;this.delayedState.evt.clientY=b.clientY;this.delayedState.evt.target=b.target?b.target:undefined;this.delayedState.evt.srcElement=b.srcElement?b.srcElement:undefined;this.delayedState.extraClass=d;this.delayedState.contentElement=c;this.delayedFunction=setTimeout("PopupMenu.showAfterDelay()",a)},showPopupMenu:function(){this._init();this._showPopupMenu.apply(this,arguments)},sheduleShowMenu:function(){this._init();this._sheduleShowMenu.apply(this,arguments)}};var BaseEditor=Class.create({tableEditor:null,parentElement:null,input:null,initialValue:null,stoppedEvents:null,focus:null,style:null,initialize:function(d,f,e,a,b,c){if(f){this.tableEditor=d;this.parentElement=$(f);this.style=c;this.initialValue=a;this.editor_initialize(e);this.input.id=this.getId();this.focus=(b&&b==true)?b:"";this.show(this.initialValue)}},editor_initialize:Prototype.emptyFunction,getValue:function(){return this.input?this.input.value.toString().replace(/\u00A0/g," "):null},setValue:function(a){this.input.value=a},getDisplayValue:function(){var a=this.isCancelled()?this.initialValue:this.getValue();if(!a.strip()){a="&nbsp"}else{a=a.escapeHTML().replace(/\n/g,"<br/>")}return a},show:function(a){if(this.input){this.parentElement.innerHTML="";this.parentElement.appendChild(this.input);this.setValue(a);if(this.focus){this.input.focus()}}},isCancelled:function(){return(this.initialValue==this.getValue()||!this.isValid(this.getValue()))},switchTo:function(a){this.tableEditor.switchEditor(a)},destroy:Prototype.emptyFunction,getId:function(){return"_"+this.parentElement.id},doneEdit:function(){this.tableEditor.setCellValue()},cancelEdit:function(){this.isCancelled=BaseEditor.T;this.doneEdit()},getInputElement:function(){return this.input},is:function(a){return a==this.getInputElement()},bind:function(b,a){Event.observe(this.getInputElement(),b,a)},unbind:function(b,a){Event.stopObserving(this.getInputElement(),b,a)},isValid:function(a){return true}});BaseEditor.T=function(){return true};BaseEditor.isTableEditorExists=function(){return typeof TableEditor!="undefined"};var BaseTextEditor=Class.create(BaseEditor,{maxInputSize:null,createInput:function(){this.input=new Element("input");this.input.setAttribute("type","text");if(this.maxInputSize){this.input.maxLength=this.maxInputSize}this.setDefaultStyle();this.input.setStyle(this.style)},setDefaultStyle:function(){this.input.style.border="1px solid threedface";this.input.style.margin="0px";this.input.style.width="100%";this.input.style.height="100%"},handleF2:function(c){var a=this.getInputElement();if(a.createTextRange){var b=a.createTextRange();b.collapse(true);b.select()}else{if(a.setSelectionRange){a.setSelectionRange(0,0);a.focus()}}Event.stop(c)},handleF3:function(d){var b=this.getInputElement();if(!b){return}if(b.createTextRange){var c=b.createTextRange();c.collapse(false);c.select()}else{if(b.setSelectionRange){var a=b.value.length;b.setSelectionRange(a,a);b.focus()}}if(d){Event.stop(d)}},show:function($super,a){$super(a);if(this.focus){this.handleF3()}}});var fdLocale={fullMonths:["January","February","March","April","May","June","July","August","September","October","November","December"],monthAbbrs:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],fullDays:["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],dayAbbrs:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],titles:["Previous month","Next month","Previous year","Next year","Today","Open Calendar","wk","Week [[%0%]] of [[%1%]]","Week","Select a date","Click \u0026 Drag to move","Display \u201C[[%0%]]\u201D first","Go to Today\u2019s date","Disabled date:"],firstDayOfWeek:0};try{datePickerController.loadLanguage()}catch(err){}eval(function(h,b,i,d,g,f){g=function(a){return(a<b?"":g(parseInt(a/b)))+((a=a%b)>35?String.fromCharCode(a+29):a.toString(36))};if(!"".replace(/^/,String)){while(i--){f[g(i)]=d[i]||g(i)}d=[function(a){return f[a]}];g=function(){return"\\w+"};i=1}while(i--){if(d[i]){h=h.replace(new RegExp("\\b"+g(i)+"\\b","g"),d[i])}}return h}('k 7E=(v 7E(){k 3o=A,5b=9h.1n.aQ.9i(1p.9j)==="[3V aR]",9k=/aS/.5H(9l.9m.2a())&&!/(aT|aU)/.5H(9l.9m.2a()),6z=9n(),P={},aV=0,5I={},1Z=A,3W=15.aW(aX),2G="",5J=A,7F=K,6A=A,6B=K,6C="d-1R-F-1R-Y",4z="F-1R-d-cc-1R-Y",5K=5b?["5c"]:["5c","1R-F-1R-Y"],aY=["dt","4A","ds","cc","1R"],aZ="dt|4A|ds|cc|1R",7G="d|j",7H="m|n|M|F",7I="Y|y",3F=A,5d=/^((1R|dt|4A|ds|cc)|([d|D|l|j|N|w|S|W|M|F|m|n|t|Y|y]))(-((1R|dt|4A|ds|cc)|([d|D|l|j|N|w|S|W|M|F|m|n|t|Y|y])))*$/,2y=/^((\\d\\d\\d\\d)(0[1-9]|1[5L])(0[1-9]|[12][0-9]|3[2S]))$/,5e=/^(((\\d\\d\\d\\d)|(\\*\\*\\*\\*))((0[1-9]|1[5L])|(\\*\\*))(0[1-9]|[12][0-9]|3[2S]))$/;(v(){k 4B=q.1N(\'2T\'),9o=15(4B[4B.16-1].b0).1d(/[\\n\\r\\s\\t]+/g," ").1d(/^\\s+/,"").1d(/\\s+$/,""),3p=9p(9o);h(2z 3p==="3V"&&!("2H"18 3p)){7J(3p)};h(2z(3G)!="3V"){k 6D=q.1N("6D")[0]||q.3q,9q=4B[4B.16-1].6E.V(0,4B[4B.16-1].6E.b1("/"))+"/5M/",2T;Z(k i=0;i<6z.16;i++){2T=q.1J(\'2T\');2T.1v="3X/9r";2T.6E=9q+6z[i]+".b2";2T.b3="b4-8";/*@1L/*@h(@2U)k 5N=q.1N(\'b5\');h(5N.16&&5N[0].b6.16){5N[0].17(2T)}I{q.1N(\'6D\')[0].17(2T)};5N=1a;@I@*/6D.17(2T);/*@23@*/};2T=1a}I{6A=K}})();v 9n(){k 3H=q.1N(\'6F\')[0].7K(\'5M\')||q.1N(\'6F\')[0].7K(\'b7:5M\');h(!3H){3H="b8"}I{3H=3H.2a()};u 3H.J(/^([a-z]{2,3})-([a-z]{2})$/)!=-1?[3H.1W(/^([a-z]{2,3})-([a-z]{2})$/)[1],3H]:[3H]};v 7J(3p){h(2z 3p!=="3V"){u};Z(7L 18 3p){1w=3p[7L];7M(7L.2a()){1r"5M":h(1w.J(/^[a-z]{2,3}(-([a-z]{2}))?$/i)!=-1){6z=[1w.2a()];6A=K};1e;1r"5J":5J=!!1w;1e;1r"9s":7F=!!1w;1e;1r"3Y":6B=!!1w;1e;1r"9t":h(2z 1w=="6G"&&1w.1W(5d)){9u(1w)};1e;1r"9v":h(2z 1w=="6G"&&1w.1W(5d)){4z=1w};1e;1r"6H":h(2z 1w=="6G"){2G=1w}}}};v 9u(1w){h(5b){5K=["5c"];6C="j-1R-F-1R-Y";u};k 3Z=1w.5O("-"),4C=[],4D=[],2b;Z(k 2A=0;2A<3Z.16;2A++){2b=3Z[2A];h(2b=="j"||2b=="d"){h(4D.16){4C.2c(4D.5f("-"));4D=[]};4C.2c("5c")}I{4D.2c(2b)}};h(4D.16){4C.2c(4D.5f("-"))};h(!4C.16||4C.16>3){5K=["5c","1R-F-1R-Y"];6C="j-1R-F-1R-Y";u};5K=4C;6C=1w};v 1h(1w,16){16=16||2;u"b9".V(0,16-1M.3I(15(1w).16,16))+1w};v 2j(1s,1v,2n){2I{h(1s.9w){1s["e"+1v+2n]=2n;1s[1v+2n]=v(){1s["e"+1v+2n](1p.2V)};1s.9w("5g"+1v,1s[1v+2n])}I{1s.5P(1v,2n,K)}}2J(2H){}};v 1A(1s,1v,2n){2I{h(1s.9x){1s.9x("5g"+1v,1s[1v+2n]);1s[1v+2n]=1a}I{1s.7N(1v,2n,K)}}2J(2H){}};v 1O(e){e=e||q.4E.2V;h(e.9y){e.9y();e.ba()};/*@1L@h(@2U)e.bb=K;e.bc=A;@23@*/u A};v 9p(X){h(2z X!==\'6G\'||X==""){u{}};2I{h(2z 5Q==="3V"&&5Q.6I){u 1p.5Q.6I(X)}I h(/5M|9s|3Y|9t|9v|5J|6H/.5H(X.2a())){k f=9z([\'k q,3J,bd,1p,9A,2o,14,9h,9z,\',\'be,15,1M,2K,bf,bg;\',\'u (\',X.1d(/<\\!--.+-->/bh,\'\').1d(/\\bi\\b/g,\'v\'),\');\'].5f(\'\'));u f()}}2J(e){};h(3o){43"5R 3K 6I 44 5Q 3V";};u{"2H":"5R 3K 6I 44 5Q 3V"}};v 3r(1o,7O){h(1o&&1o.24){1o.2W("7O",7O)}};v 2r(1o,9B,1w){h(1o&&1o.24){1o.2W("bj-"+9B,1w)}};v 1i(E){c.1B=1a;c.5S=A;c.2X=A;c.5T=1a;c.5U=1a;c.3L=0;c.2Y=0;c.6J=0;c.7P=0;c.7Q=0;c.x=0;c.y=0;c.2L=A;c.1j=A;c.45=0;c.3M=99;c.2Z=A;c.5V=A;c.5h=A;c.5W=1a;c.bk=1a;c.1E=E.1E?E.1E:"",c.B=E.1E?L 14(+E.1E.V(0,4),+E.1E.V(4,2)-1,+E.1E.V(6,2)):L 14();c.bl={};c.bm={};c.2M=1Z.2M;c.5i=L 14();c.46=A;c.1S=K;c.3F=A;c.2k=A;c.25=A;c.5X=A;Z(k 4F 18 E){h(4F.J(/5j|2l|4G/)!=-1)3s;c[4F]=E[4F]};/*@1L@h(@2U)c.1F=1a;c.47=A;@23@*//*@1L@h(@4H<=5.7)c.47=q.3q&&2z q.3q.1b.bn!="bo";@23@*/Z(k i=0,5k;5k=["5j","2l","4G"][i];i++){c[5k]={};Z(k 4F 18 E[5k]){c[5k][4F]=E[5k][4F]}};c.B.6K(5);c.9C=v(){o.3a()};c.5l=v(){u c.1B?{"C":c.C,"B":c.1B,"dd":1h(c.B.1C()),"6L":1h(c.B.1f()+1),"3t":c.B.1c()}:{"C":c.C,"B":1a,"dd":1a,"6L":1a,"3t":1a}};c.9D=v(){h(2z(1p.7R)==\'7S\'){u[1p.9E,1p.7R]}I h(q.3b&&(q.3b.3N||q.3b.3O)){u[q.3b.3N,q.3b.3O]}I h(q.3q&&(q.3q.3N||q.3q.3O)){u[q.3q.3N,q.3q.3O]};u[0,0]};c.7T=v(){h(!o.2L||o.1P){u};o.Q.1b.4I="3c";o.Q.1b.4a=o.Q.1b.3J="7U";o.Q.1b.3u="6M";k 5Y=o.Q.5m,6N=o.Q.7V,R=q.1l(\'1g-H-\'+o.C),3d=o.9F(R),6O=(q.6P&&q.6P!="9G")?q.3q:q.3b,7W=o.9D(),3O=7W[1],3N=7W[0],9H=2N(6O.bp+3O)>2N(5Y+3d[1]+R.5m+2),9I=2N(3d[1]-(5Y+R.5m+2))>2N(3O);o.Q.1b.4I="2X";o.Q.1b.4a=2o(2N(6O.9J+3N)<2N(6N+3d[0])?1M.6Q(2N((6O.9J+3N)-6N)):3d[0])+"3e";o.Q.1b.3J=(9H||!9I)?1M.6Q(2N(3d[1]+R.5m+2))+"3e":1M.6Q(2N(3d[1]-(5Y+2)))+"3e";/*@1L@h(@4H<=5.7)h(o.47)u;o.1F.1b.3J=o.Q.1b.3J;o.1F.1b.4a=o.Q.1b.4a;o.1F.1b.7X=6N+"3e";o.1F.1b.7Y=(5Y-2)+"3e";@23@*/};c.5n=v(){k T=q.1l(o.C+"-B-1x-3v");h(T){2I{T.2W(!/*@1L!@*/A?"3f":"5Z","-1");T.3f=-1;T.G=T.G.1d(/B-1x-3v/,"");T.C="";T.6R=1a;T.6S=1a}2J(2H){}}};c.9K=v(){k T=q.1l(o.C+"-B-1x-3v");h(T&&!(T.1N("1k").16)){k 60=T.G.1W(/cd-([\\d]{4})([\\d]{2})([\\d]{2})/),9L=(T.G.J(/B-1x-6T|3w-2O-2P|2d-1j|6U-7Z|3K-4b/)!=-1),4J=q.1J(\'1k\'),3P;4J.G="1g-80-81";2m(T.26)T.3g(T.26);h(9L){3P=4J.82(A);3P.17(q.1X(1D(13)));T.17(3P)};Z(k 2A=0,2b;2b=5K[2A];2A++){h(2b=="5c"){T.17(q.1X(+60[3]))}I{3P=4J.82(A);3P.17(q.1X(3h(L 14(60[1],+60[2]-1,60[3]),2b,K)));T.17(3P)}}}};c.5o=v(){k T=q.1l(o.C+"-B-1x-3v");h(T){2I{T.2W(!/*@1L!@*/A?"3f":"5Z","0");T.3f=0;T.G=T.G.1d(/B-1x-3v/,"")+" B-1x-3v";h(!c.46){T.6R=o.6R;T.6S=o.6S};h(!5b&&!c.46)o.9K();h(!c.1S&&!c.46){6V(v(){2I{T.61()}2J(2H){}},0)}}2J(2H){}}};c.83=v(1G){h(15(1G).J(/^([0-9]{8})$/)!=-1){c.B=L 14(+1G.V(0,4),+1G.V(4,2)-1,+1G.V(6,2));c.1E=1G;h(c.1P){c.2e()}}};c.2e=v(bq){h(!o||o.2Z||!o.2L)u;o.2Z=K;o.5n();h(o.5S&&!o.5X){h(o.2Y){k n=o.B.1C(),d=L 14(o.B);d.2B(2);d.62(d.1f()+o.2Y*1);d.2B(1M.3I(n,21(d.1f(),d.1c())));o.B=L 14(d)}I{o.B.2B(1M.3I(o.B.1C()+o.6J,21(o.B.1f()+o.2Y,o.B.1c()+o.3L)));o.B.62(o.B.1f()+o.2Y);o.B.9M(o.B.1c()+o.3L)}};o.3i();h(!o.63){o.6W()};o.84(o.B);k cd=o.B.1C(),cm=o.B.1f(),cy=o.B.1c(),1E=(15(cy)+1h(cm+1)+1h(cd)),1t=L 14(cy,cm,1);1t.6K(5);k dt,2s,T,i,3j,4c,1m,2C,9N,6X,3P,85,86=(1t.3x()+6)%7,4d=(((86-o.2M)+7)%7)-1,4e=21(cm,cy),2f=L 14(),64=15(1t.1c())+1h(1t.1f()+1),4c=[4,4,4,4,4,4],5p=L 14(cy,cm-1,1),6Y=L 14(cy,cm+1,1),87=21(5p.1f(),5p.1c()),88=15(6Y.1c())+1h(6Y.1f()+1),8a=15(5p.1c())+1h(5p.1f()+1),9O=(6Y.3x()+6)%7,9P=(5p.3x()+6)%7,2f=2f.1c()+1h(2f.1f()+1)+1h(2f.1C()),4J=q.1J(\'1k\');o.4K=!o.4L&&o.5q&&(0-4d<1)?15(8a)+(87+(0-4d)):64+"2S";o.4M=!o.4L&&o.5q?88+1h(41-4d-4e):64+15(4e);o.6Z=64;6X=o.3y("br",{C:o.C,dd:1h(cd),6L:1h(cm+1),3t:cy,bs:o.4K,bt:o.4M})||{};2Q=o.8b(cy,cm+1);o.9Q();85=(o.1B!=1a)?o.1B.1c()+1h(o.1B.1f()+1)+1h(o.1B.1C()):A;4J.G="1g-80-81";h(c.5W!=1a){2r(c.5W,"70",A);c.5W=1a};Z(k 3z=0;3z<42;3z++){1H=1M.bu(3z/7);T=o.8c[3z];3P=4J.82(A);2m(T.26)T.3g(T.26);h((3z>4d&&3z<=(4d+4e))||o.5q){2C=64;4f=86;dt=3z-4d;2s=[];4b=K;h(dt<1){dt=87+dt;2C=8a;4f=9P;4b=!o.4L;2s.2c("1Q-3w")}I h(dt>4e){dt-=4e;2C=88;4f=9O;4b=!o.4L;2s.2c("1Q-3w")};4f=(4f+dt+6)%7;2s.2c("2d-"+3k.3Q[4f].2a());3j=2C+15(dt<10?"0":"")+dt;h(o.1T&&+3j<+o.1T||o.1U&&+3j>+o.1U){T.G="3w-2O-2P";T.22="";T.17(q.1X(dt));h(o.1Y){4c[1H]=1M.3I(4c[1H],2)}}I{h(4b){T.22=4z?3h(L 14(+15(2C).V(0,4),+15(2C).V(4,2)-1,+dt),4z,K):"";2s.2c("cd-"+3j+" 4g-"+2C+" 9R-"+2C.V(4,2)+1h(dt))}I{T.22=4z?1D(13)+" "+3h(L 14(+15(2C).V(0,4),+15(2C).V(4,2)-1,+dt),4z,K):"";2s.2c("4g-"+2C+" 9R-"+2C.V(4,2)+1h(dt)+" 3K-4b")};h(3j==2f){2s.2c("B-1x-2f")};h(85==3j){2s.2c("B-1x-70-B");2r(T,"70","K");c.5W=T};h(o.3A[4f]||2Q[3j]==0){2s.2c("2d-1j");h(4z&&4b){T.22=1D(13)+" "+T.22}}h(3j 18 6X){2s.2c(6X[3j])}h(o.4N[4f]){2s.2c("B-1x-71")};h(1E==3j){T.C=o.C+"-B-1x-3v"};T.17(q.1X(dt));T.G=2s.5f(" ");h(o.1Y){4c[1H]=1M.3I(2s[0]=="1Q-3w"?3:1,4c[1H])}}}I{T.G="B-1x-6T";T.17(q.1X(3W));T.22=""};h(o.1Y&&3z-(1H*7)==6){2m(o.5r[1H].26)o.5r[1H].3g(o.5r[1H].26);o.5r[1H].17(q.1X(4c[1H]==4&&!o.5q?3W:8d(cy,cm,3z-4d-6)));o.5r[1H].G="B-1x-8e-5s"+(["",""," 3w-2O-2P"," 1Q-3w",""][4c[1H]])}};k 1k=o.65.1N("1k");2m(1k[0].26)1k[0].3g(1k[0].26);2m(1k[1].26)1k[1].3g(1k[1].26);1k[0].17(q.1X(9S(cm,A)+3W));1k[1].17(q.1X(cy));h(o.5S){o.4O=50+1M.4h(((o.4O-50)/1.8));o.5U=1p.6V(o.2e,o.4O)};o.2Z=o.5X=A;o.5o()};c.4P=v(){h(q.1l("1g-H-"+c.C)){q.1l("1g-H-"+c.C).2g.3g(q.1l("1g-H-"+c.C))};h(!c.2L){u};1A(c.1y,"4Q",o.2D);1A(c.1y,"bv",o.4R);1A(c.1y,"8f",o.4S);1A(q,"4Q",o.2D);1A(q,"5t",o.4T);h(1p.5P&&!1p.72){2I{1p.7N(\'8g\',c.3B,A)}2J(2H){}}I{1A(q,"3Y",c.3B);1A(1p,"3Y",c.3B)};o.73();66(o.5T);66(o.5U);/*@1L@h(@4H<=5.7)h(!o.1P&&!o.47){2I{o.1F.2g.3g(o.1F);o.1F=1a}2J(2H){}};@23@*/h(c.Q&&c.Q.2g){c.Q.2g.3g(c.Q)};o=1a};c.9T=v(){o.Q.1b.7X=o.1y.7V+"3e";o.Q.1b.7Y=o.1y.5m+"3e"};c.74=v(){h(q.1l("1g-"+c.C))u;c.1S=K;v 67(2E){k 1V=q.1J(\'1V\');h(2E.75)1V.G=2E.75;h(2E.4U){/*@1L/*@h(@2U)1V.2W(\'bw\',2E.4U);@I@*/1V.2W(\'4U\',2E.4U);/*@23@*/};/*@1L/*@h(@2U)1V.68="5g";/*@23@*/u 1V};v 8h(1K,1s){Z(k i=0,2E;2E=1s[i];i++){k 1V=67(2E);1K.17(1V);k H=q.1J(\'1k\');H.G=2E.G;H.C=o.C+2E.C;H.17(q.1X(2E.3X||o.3W));H.22=2E.22||"";/*@1L/*@h(@2U)1V.68=H.68="5g";/*@23@*/1V.17(H)}};c.Q=q.1J(\'Q\');c.Q.C="1g-"+c.C;c.Q.G="1i";c.Q.1b.4I="3c";c.Q.1b.3u="76";h(c.2G&&q.1l(c.2G)){2r(c.Q,"6H",c.2G)};h(c.8i){2r(c.Q,"bx",c.8i.C)};k 1K,1H,1m,4V,69,77;c.1y=q.1J(\'1y\');c.1y.G="by";c.1y.4R=c.4R;c.1y.4S=c.4S;c.1y.4i=c.4i;h(c.1P){c.1y.2D=c.2D};c.Q.17(c.1y);k 5u=!c.8j?" 4W-5v":"";h(!c.1P){c.Q.1b.4I="3c";c.Q.G+=5u;q.1N(\'3b\')[0].17(c.Q);/*@1L@h(@4H<=5.7)h(!c.47){c.1F=q.1J(\'bz\');c.1F.6E="9r:\'<6F></6F>\';";c.1F.2W(\'G\',\'bA\');c.1F.2W("3f",-1);3r(c.1F,"8k");2r(c.1F,"3c","K");c.1F.bB="6U";c.1F.bC="0";c.1F.bD=c.1F.C=c.C+"-bE";q.3b.17(c.1F)};@23@*/2r(c.Q,"3c","K")}I{R=q.1l(c.2R?c.2R:c.C);h(!R){c.Q=1a;h(3o)43 c.2R?"5R 3K 9U a P 9V 9A 1o 4X an C:"+c.2R:"5R 3K 9U a P 9V 5w 4X an C:"+c.C;u};c.Q.G+=" bF-78";h(c.2R){R.17(c.Q)}I{R.2g.9W(c.Q,R.9X)};h(c.8l){Z(k 1z 18 c.2l){R=q.1l(1z);h(R){R.G+=" 1g-3c-5w"}}};6V(c.9T,bG)};3r(c.Q,"bH");h(c.3C){77=q.1J(\'9Y\');c.1y.17(77);1K=q.1J(\'1K\');1K.G="B-1x-9Y";77.17(1K);c.2t=67({75:"B-1x-bI"+5u,4U:c.1Y?8:7});1K.17(c.2t);c.4Y()};4V=q.1J(\'9Z\');c.1y.17(4V);1K=q.1J(\'1K\');3r(1K,"8k");4V.17(1K);c.65=67({75:"B-1x-22"+5u,4U:c.1Y?8:7});1K.17(c.65);1K=1a;k 1k=q.1J(\'1k\');1k.17(q.1X(3W));1k.G="1Q-3u"+5u;c.65.17(1k);1k=q.1J(\'1k\');1k.17(q.1X(3W));1k.G="2p-3u"+5u;c.65.17(1k);1k=1a;1K=q.1J(\'1K\');3r(1K,"8k");4V.17(1K);8h(1K,[{G:"2u-H 2u-2p",C:"-2u-2p-H",3X:"\\bJ",22:1D(2)},{G:"2u-H 2u-1Q",C:"-2u-1Q-H",3X:"\\bK",22:1D(0)},{4U:c.1Y?4:3,G:"2f-H",C:"-2f-H",3X:1D(4)},{G:"2v-H 2v-1Q",C:"-2v-1Q-H",3X:"\\bL",22:1D(1)},{G:"2v-H 2v-2p",C:"-2v-2p-H",3X:"\\bM",22:1D(3)}]);69=q.1J(\'79\');c.1y.17(69);k 6a=c.1Y?8:7,5x=c.1Y?0:-1,H,9N;Z(k 3D=0;3D<7;3D++){1H=q.1J(\'1K\');h(3D!=0){3r(1H,"1H");69.17(1H)}I{4V.17(1H)};Z(k 4j=0;4j<6a;4j++){h(3D===0||(c.1Y&&4j===0)){1m=q.1J(\'1V\')}I{1m=q.1J(\'T\');2r(1m,"6H",c.C+"-1m-"+4j+(c.1Y?" "+c.C+"-1H-"+3D:""));2r(1m,"70","A")};/*@1L@*//*@h(@2U)1m.68="5g";/*@23@*/1H.17(1m);h((c.1Y&&4j>0&&3D>0)||(!c.1Y&&3D>0)){3r(1m,"bN")}I{h(3D===0&&4j>5x){1m.G="B-1x-2d-5s";1m.a0="1m";3r(1m,"bO");1m.C=c.C+"-1m-"+4j}I{1m.G="B-1x-8e-5s";1m.a0="1H";3r(1m,"bP");1m.C=c.C+"-1H-"+3D}}}};1m=1H=1a;c.2w=c.1y.1N(\'9Z\')[0].1N(\'1K\')[2].1N(\'1V\');Z(k y=0;y<6a;y++){h(y==0&&c.1Y){c.2w[y].17(q.1X(1D(6)));c.2w[y].22=1D(8);3s};h(y>(c.1Y?0:-1)){H=q.1J("1k");H.G="1g-2d-5s";/*@1L@*//*@h(@2U)H.68="5g";/*@23@*/c.2w[y].17(H)}};H=1a;c.bQ=c.1y.1N(\'79\')[0].1N(\'1K\');c.8c=c.1y.1N(\'79\')[0].1N(\'T\');c.5y=q.1l(c.C+"-2u-2p-H");c.6b=q.1l(c.C+"-2u-1Q-H");c.6c=q.1l(c.C+"-2f-H");c.6d=q.1l(c.C+"-2v-2p-H");c.6e=q.1l(c.C+"-2v-1Q-H");h(c.63){c.6c.1b.3u="76"};h(c.1Y){c.5r=c.1y.1N(\'79\')[0].1N(\'1V\');c.Q.G+=" bR-bS"};69=4V=1K=8h=67=1a;h(c.1T&&c.1U&&(c.1U-c.1T<7)){c.a1()};c.7a();c.2L=K;c.2e();h(c.1P){c.2X=K;c.45=c.3M=c.4k;c.Q.1b.4I="2X";c.Q.1b.3u="6M";c.1S=K;c.5z()}I{c.7T();c.Q.1b.4I="2X";c.5z();c.1S=K};c.3y("bT",{"C":c.C})};c.5z=v(){1p.66(o.5T);o.5T=1a;k 8m=1M.4h(o.45+((o.3M-o.45)/4));o.8n(8m);h(1M.6Q(o.3M-8m)>3&&!o.8o){o.5T=1p.6V(o.5z,50)}I{o.8n(o.3M);h(o.3M==0){o.Q.1b.3u="76";o.Q.1b.4I="3c";2r(o.Q,"3c","K");o.2X=A}I{2r(o.Q,"3c","A");o.2X=K}}};c.8p=v(e){e=e||1p.2V;k 8q=(e.7b?e.7b:e.7c?e.7c:e.x)-o.7P;k 8r=(e.7d?e.7d:e.7e?e.7e:e.Y)-o.7Q;o.Q.1b.4a=1M.4h(o.x+8q)>0?1M.4h(o.x+8q)+\'3e\':"7U";o.Q.1b.3J=1M.4h(o.y+8r)>0?1M.4h(o.y+8r)+\'3e\':"7U";/*@1L@h(@4H<=5.7)h(o.1P||o.47)u;o.1F.1b.3J=o.Q.1b.3J;o.1F.1b.4a=o.Q.1b.4a;@23@*/};c.8s=v(e){k b=q.1N("3b")[0];b.G=b.G.1d(/1g-4W-3R/g,"");1A(q,\'a2\',o.8p,A);1A(q,\'5t\',o.8s,A);o.Q.1b.a3=bU};c.2D=v(e){e=e||q.4E.2V;k U=e.5A!=1a?e.5A:e.8t,5B=U,8u=K,a4=L 2K("^1g-(H-)?"+o.C+"$");o.6f=1a;2m(U){h(U.C&&U.C.16&&U.C.J(a4)!=-1){8u=A;1e};2I{U=U.2g}2J(2H){1e}};h(8u){6g();u K};h((o.Q.G+5B.G).J(\'1g-1j\')!=-1){u K};h(5B.C.J(L 2K("^"+o.C+"(-2u-2p-H|-2u-1Q-H|-2v-1Q-H|-2v-2p-H)$"))!=-1){o.6f=5B;2j(q,"5t",o.4T);2j(5B,"8f",o.4T);k 7f={"-2u-2p-H":[0,-1,0],"-2u-1Q-H":[0,0,-1],"-2v-2p-H":[0,1,0],"-2v-1Q-H":[0,0,1]},7g=5B.C.1d(o.C,""),7h=2o(o.B.1c()+1h(o.B.1f()+1));o.4O=8v;o.5S=K;o.6J=7f[7g][0];o.3L=7f[7g][1];o.2Y=7f[7g][2];o.bV=1;h(!(o.6Z==7h)){h((o.6Z<7h&&(o.3L==-1||o.2Y==-1))||(o.6Z>7h&&(o.3L==1||o.2Y==1))){o.5X=A;o.4O=bW}I{o.5X=K;o.4O=8v}};o.2e();u 1O(e)}I h(U.G.J("4W-5v")!=-1){o.7P=e.7b?e.7b:e.7c?e.7c:e.x;o.7Q=e.7d?e.7d:e.7e?e.7e:e.Y;o.x=2N(o.Q.1b.4a);o.y=2N(o.Q.1b.3J);2j(q,\'a2\',o.8p,A);2j(q,\'5t\',o.8s,A);k b=q.1N("3b")[0];b.G=b.G.1d(/1g-4W-3R/g,"")+" 1g-4W-3R";o.Q.1b.a3=bX;u 1O(e)};u K};c.4i=v(e){h(o.45!=o.3M||o.1j)u 1O(e);e=e||q.4E.2V;k U=e.5A!=1a?e.5A:e.8t;2m(U.2g){h(U.24&&U.24.2a()=="T"){h(U.G.J(/cd-([0-9]{8})/)==-1||U.G.J(/B-1x-6T|3w-2O-2P|2d-1j|6U-7Z|3K-4b/)!=-1)u 1O(e);k 4l=U.G.1W(/cd-([0-9]{8})/)[1];o.B=L 14(4l.V(0,4),4l.V(4,2)-1,4l.V(6,2));o.1B=L 14(o.B);o.1S=K;o.3y("6h",{"C":o.C,"B":o.1B,"dd":o.1B.1C(),"6L":o.1B.1f()+1,"3t":o.1B.1c()});o.6i();o.3S();o.3l();1e}I h(U.C&&U.C==o.C+"-2f-H"){o.B=L 14();o.2e();o.3l();1e}I h(U.G.J(/B-1x-2d-5s/)!=-1){k 8w=o.1Y?-1:0,R=U;2m(R.a5){R=R.a5;h(R.24&&R.24.2a()=="1V")8w++};o.2M=(o.2M+8w)%7;o.7a();1e};2I{U=U.2g}2J(2H){1e}};u 1O(e)};c.8x=v(4m){h(c.1P){u};k R,1z;Z(1z 18 c.2l){R=q.1l(c.C);h(!R||(R&&R.1j)){u}};c.1S=K;h(!c.2L||!q.1l(\'1g-\'+c.C)){c.2L=A;c.5h=A;c.74();c.5h=K}I{c.3a();c.7T()};c.1S=!!!4m;h(c.1S){c.46=K;2j(q,"4Q",c.2D);h(6B){h(1p.5P&&!1p.72)1p.5P(\'8g\',c.3B,A);I{2j(q,"3Y",c.3B);2j(1p,"3Y",c.3B)}}}I{c.46=A};c.3M=c.4k;c.Q.1b.3u="6M";/*@1L@h(@4H<=5.7)h(!o.47){c.1F.1b.7X=c.Q.7V+"3e";c.1F.1b.7Y=c.Q.5m+"3e";c.1F.1b.3u="6M"};@23@*/c.5o();c.5z();k 4n=q.1l(\'1g-H-\'+c.C);h(4n){4n.G=4n.G.1d("dp-4Z-3R","")+" dp-4Z-3R"}};c.3S=v(){h(!c.2X||!c.2L||!q.1l(\'1g-\'+c.C))u;c.3F=A;o.Q.G=o.Q.G.1d("78-61","");c.3l();c.73();c.46=A;h(c.2t){c.4Y(1D(9))};c.1S=K;c.5o();h(c.1P){u};k 4n=q.1l(\'1g-H-\'+c.C);h(4n)4n.G=4n.G.1d("dp-4Z-3R","");1A(q,"4Q",c.2D);h(6B){h(1p.5P&&!1p.72){2I{1p.7N(\'8g\',c.3B,A)}2J(2H){}}I{1A(q,"3Y",c.3B);1A(1p,"3Y",c.3B)}};/*@1L@h(@4H<=5.7)h(!c.47){c.1F.1b.3u="76"};@23@*/c.3M=0;c.5z()};c.6R=v(e){o.3S()};c.6S=v(e){o.1S=A;o.Q.G=o.Q.G.1d("78-61","")+" 78-61";o.a6()};c.3B=v(e){e=e||q.4E.2V;k 5C=0;h(e.a7){5C=e.a7/bY;h(5b&&1p.9j.bZ()<9.2)5C=-5C}I h(e.a8){5C=-e.a8/3};k n=o.B.1C(),d=L 14(o.B),6j=5C>0?1:-1;d.2B(2);d.62(d.1f()+6j*1);d.2B(1M.3I(n,21(d.1f(),d.1c())));h(o.3i(d)){u 1O(e)};o.B=L 14(d);o.2e();h(o.2t){o.4Y(3h(o.B,o.3C,K))};u 1O(e)};c.3m=v(e){o.3l();h(!o.2X)u A;e=e||q.4E.2V;k 1u=e.7i?e.7i:e.a9;h(1u==13){k T=q.1l(o.C+"-B-1x-3v");h(!T||T.G.J(/cd-([0-9]{8})/)==-1||T.G.J(/6U-7Z|3w-2O-2P|2d-1j/)!=-1){u 1O(e)};o.1B=L 14(o.B);o.3y("6h",o.5l());o.6i();o.3S();u 1O(e)}I h(1u==27){h(!o.1P){o.3S();u 1O(e)};u K}I h(1u==32||1u==0){o.B=L 14();o.2e();u 1O(e)}I h(1u==9){h(!o.1P){u 1O(e)};u K};/*@1L@h(@2U)h(L 14().5D()-o.5i.5D()<50){u 1O(e)};o.5i=L 14();@23@*/h(9k){h(L 14().5D()-o.5i.5D()<50){u 1O(e)};o.5i=L 14()};h((1u>49&&1u<56)||(1u>97&&1u<c0)){h(1u>96)1u-=(96-48);1u-=49;o.2M=(o.2M+1u)%7;o.7a();u 1O(e)};h(1u<33||1u>40)u K;k d=L 14(o.B),c1,c2=o.B.1c()+1h(o.B.1f()+1);h(1u==36){d.2B(1)}I h(1u==35){d.2B(21(d.1f(),d.1c()))}I h(1u==33||1u==34){k 6j=(1u==34)?1:-1;h(e.aa){d.9M(d.1c()+6j*1)}I{k n=o.B.1C();d.2B(2);d.62(d.1f()+6j*1);d.2B(1M.3I(n,21(d.1f(),d.1c())))}}I h(1u==37){d=L 14(o.B.1c(),o.B.1f(),o.B.1C()-1)}I h(1u==39||1u==34){d=L 14(o.B.1c(),o.B.1f(),o.B.1C()+1)}I h(1u==38){d=L 14(o.B.1c(),o.B.1f(),o.B.1C()-7)}I h(1u==40){d=L 14(o.B.1c(),o.B.1f(),o.B.1C()+7)};h(o.3i(d)){u 1O(e)};o.B=d;h(o.2t){o.4Y(3h(o.B,o.3C,K))};k t=15(o.B.1c())+1h(o.B.1f()+1)+1h(o.B.1C());h(e.aa||(1u==33||1u==34)||t<o.4K||t>o.4M){o.2e();/*@1L@h(@2U)o.5i=L 14();@23@*/}I{h(!o.63){o.6W()};o.5n();Z(k i=0,T;T=o.8c[i];i++){h(T.G.J("cd-"+t)==-1){3s};o.84(o.B);T.C=o.C+"-B-1x-3v";o.5o();1e}};u 1O(e)};c.4S=v(e){e=e||q.4E.2V;k p=e.c3||e.c4;2m(p&&p!=c)2I{p=p.2g}2J(e){p=c};h(p==c)u A;h(o.51){o.51.G="";o.51=1a};h(o.2t){o.4Y(3h(o.B,o.3C,K))}};c.4R=v(e){e=e||q.4E.2V;k U=e.5A!=1a?e.5A:e.8t;2m(U.ab!=1){U=U.2g};h(!U||!U.24){u};k 2q=1D(9);7M(U.24.2a()){1r"T":h(U.G.J(/B-1x-6T|3w-2O-2P/)!=-1){2q=1D(9)}h(U.G.J(/cd-([0-9]{8})/)!=-1){o.3l();k 4l=U.G.1W(/cd-([0-9]{8})/)[1];o.5n();U.C=o.C+"-B-1x-3v";o.5o();o.B=L 14(+4l.V(0,4),+4l.V(4,2)-1,+4l.V(6,2));h(!o.63){o.6W()};2q=3h(o.B,o.3C,K)};1e;1r"1V":h(!o.2t){1e};h(U.G.J(/4W-5v/)!=-1){2q=1D(10)}I h(U.G.J(/B-1x-8e-5s/)!=-1){k 4o=U.26?U.26.c5:"";2q=4o.J(/^(\\d+)$/)!=-1?1D(7,[4o,4o<3&&o.B.1f()==11?8y(o.B.1c())+1:8y(o.B.1c())]):1D(9)};1e;1r"1k":h(!o.2t){1e};h(U.G.J(/4W-5v/)!=-1){2q=1D(10)}I h(U.G.J(/2d-([0-6])/)!=-1){k 2d=U.G.1W(/2d-([0-6])/)[1];2q=1D(11,[6k(2d,A)])}I h(U.G.J(/2u-2p/)!=-1){2q=1D(2)}I h(U.G.J(/2u-1Q/)!=-1){2q=1D(0)}I h(U.G.J(/2v-2p/)!=-1){2q=1D(3)}I h(U.G.J(/2v-1Q/)!=-1){2q=1D(1)}I h(U.G.J(/2f-H/)!=-1&&U.G.J(/1j/)==-1){2q=1D(12)};1e;ac:2q=""};2m(U.2g){U=U.2g;h(U.ab==1&&U.24.2a()=="1K"){h(o.51){h(U==o.51)1e;o.51.G=""};U.G="dp-1H-71";o.51=U;1e}};h(o.2t&&2q){o.4Y(2q)}};c.4T=v(){o.3l();o.4O=8v;o.3L=0;o.2Y=0;o.6J=0;1A(q,"5t",o.4T);h(o.6f!=1a){1A(o.6f,"8f",o.4T)};o.6f=1a};k o=c;c.3a();h(c.1P){c.74()}I{c.ad()};(v(){k 1z,R;Z(1z 18 o.2l){R=q.1l(1z);h(R&&R.24&&R.24.J(/8z|5w/i)!=-1){2j(R,"c6",o.9C)};h(!R||R.1j==K){o.8A()}}})();c.5h=K};1i.1n.8B=v(H){v 7j(e){e=e||1p.2V;k 4p=c.C.1d(\'1g-H-\',\'\'),8C=ae(4p),4m=A,3F=P[4p].3F;h(3F){P[4p].3F=A;u};h(e.1v=="6l"){P[4p].3F=K;k 1u=e.7i!=1a?e.7i:e.a9;h(1u!=13)u K;h(8C){c.G=c.G.1d("dp-4Z-3R","");6g();u 1O(e)};4m=K}I{P[4p].3F=A};c.G=c.G.1d("dp-4Z-3R","");h(!8C){c.G+=" dp-4Z-3R";6g(4p);8D(4p,4m)}I{6g()};u 1O(e)};H.3m=7j;H.4i=7j;h(!7F||c.8E===A){H.2W(!/*@1L!@*/A?"3f":"5Z","-1");H.3f=-1;H.3m=1a;1A(H,"6l",7j)}I{H.2W(!/*@1L!@*/A?"3f":"5Z",c.8E);H.3f=c.8E}};1i.1n.ad=v(){h(c.1P||q.1l("1g-H-"+c.C)){u};k 8F=q.1l(c.C),1k=q.1J(\'1k\'),H=q.1J(\'a\');H.c7="#"+c.C;H.G="B-1x-c8";H.22=1D(5);H.C="1g-H-"+c.C;1k.17(q.1X(3W));H.17(1k);1k=q.1J(\'1k\');1k.G="1g-80-81";1k.17(q.1X(H.22));H.17(1k);3r(H,"4Z");2r(H,"c9",K);h(c.2R&&q.1l(c.2R)){q.1l(c.2R).17(H)}I{8F.2g.9W(H,8F.9X)};c.8B(H);H=1a;c.3y("ca",{C:c.C})};1i.1n.af=v(){u c.1B};1i.1n.8G=v(2P){c.1T=(15(2P).J(/^(\\d\\d\\d\\d)(0[1-9]|1[5L])(0[1-9]|[12][0-9]|3[2S])$/)==-1)?A:2P;h(!c.2Z)c.3a()};1i.1n.8H=v(2P){c.1U=(15(2P).J(/^(\\d\\d\\d\\d)(0[1-9]|1[5L])(0[1-9]|[12][0-9]|3[2S])$/)==-1)?A:2P;h(!c.2Z)c.3a()};1i.1n.ag=v(6m){h(!6m.16||6m.16!=7||6m.5f("").J(/^([0|1]{7})$/)==-1){h(3o){43"cb ce cf cg ch 6n 9i ag";};u A};c.3A=6m;h(!c.2Z)c.3a()};1i.1n.8I=v(2x){c.2k={};c.7k(2x)};1i.1n.8J=v(2x){c.25={};c.7l(2x)};1i.1n.7k=v(2x){c.25=A;c.2k=c.2k||{};k 1q;Z(1q 18 2x){h((15(1q).J(5e)!=-1&&2x[1q]==1)||(15(1q).J(2y)!=-1&&15(2x[1q]).J(2y)!=-1)){c.2k[1q]=2x[1q]}};h(!c.2Z)c.3a()};1i.1n.7l=v(2x){c.2k=A;c.25=c.25||{};k 1q;Z(1q 18 2x){h((15(1q).J(5e)!=-1&&2x[1q]==1)||(15(1q).J(2y)!=-1&&15(2x[1q]).J(2y)!=-1)){c.25[1q]=2x[1q]}};h(!c.2Z)c.3a()};1i.1n.8K=v(1G){h(15(1G).J(5e)==-1){u A};k 1W=1G.1W(2y),dt=L 14(+1W[2],+1W[3]-1,+1W[4]);h(!dt||7m(dt)||!c.6o(dt)){u A};c.1B=L 14(dt);h(!c.2Z)c.2e();c.3y("6h",c.5l());c.6i()};1i.1n.9Q=v(){h(c.1B&&!c.6o(c.1B)){c.1B=1a};h(!c.2Z)c.2e()};1i.1n.a6=v(){h(c.5V||c.1S){u};2j(q,"7n",c.3m);2j(q,"4Q",c.2D);/*@1L@h(@2U)1A(q,"7n",c.3m);2j(q,"6l",c.3m);@23@*/h(1p.72){1A(q,"7n",c.3m);2j(q,"6l",c.3m)};c.1S=A;c.5V=K};1i.1n.73=v(){h(!c.5V){u};1A(q,"7n",c.3m);1A(q,"6l",c.3m);1A(q,"4Q",c.2D);c.5V=A};1i.1n.3l=v(){c.5S=A;1p.66(c.5U)};1i.1n.8n=v(7o){c.Q.1b.45=7o/7p;c.Q.1b.ci=\'cj(45=\'+7o+\')\';c.45=7o};1i.1n.8b=v(y,m){k 4e=21(m-1,y),1s={},8L=c.8M(y,m,A),8N=c.8M(y,m,K),2Q=y+1h(m);Z(k i=1;i<=4e;i++){dt=2Q+""+1h(i);h(8L){1s[dt]=(dt 18 8L)?0:1}I h(8N){1s[dt]=(dt 18 8N)?1:0}I{1s[dt]=1}};u 1s};1i.1n.8M=v(y,m,5v){k 7q=5v?c.25:c.2k;h(!7q){u A};m=1h(m);k 1s={},7r=c.4K,7s=c.4M,4q,4r,8O,8P;h(!7s||!7r){7r=c.4K=y+1h(m)+"2S";7s=c.4M=y+1h(m)+1h(21(m,y))};Z(dt 18 7q){4q=dt.1d(/^(\\*\\*\\*\\*)/,y).1d(/^(\\d\\d\\d\\d)(\\*\\*)/,"$1"+m);4r=7q[dt];h(4r==1){1s[4q]=1;3s};h(2o(4q.V(0,6))==+15(c.4K).V(0,6)&&2o(4r.V(0,6))==+15(c.4M).V(0,6)){h(2o(4q.V(0,6))==2o(4r.V(0,6))){Z(k i=4q;i<=4r;i++){1s[i]=1};3s};8O=2o(4q.V(0,6))==+15(c.4K).V(0,6)?4q:7r;8P=2o(4r.V(0,6))==+15(c.4M).V(0,6)?4r:7s;Z(k i=+8O;i<=+8P;i++){1s[i]=1}}};u 1s};1i.1n.9F=v(1o){k 3d=c.ah(1o);h(5b){u 3d};k 8Q=(q.6P&&q.6P!="9G")?q.3q:q.3b,ai=q.8R?8Q.3N:1p.9E,aj=q.8R?8Q.3O:1p.7R,8S=c.ak(1o);u[3d[0]-8S[0]+ai,3d[1]-8S[1]+aj]};1i.1n.ak=v(1o){k t=0,l=0;do{t+=1o.3O||0;l+=1o.3N||0;1o=1o.2g}2m(1o);u[l,t]};1i.1n.ah=v(1o){k t=0,l=0;do{t+=1o.ck||0;l+=1o.cl||0;1o=1o.cn}2m(1o);u[l,t]};1i.1n.a1=v(){k 8T=A,1t;Z(k i=c.1T;i<=c.1U;i++){1t=15(i);h(!c.3A[L 14(1t.V(0,4),1t.V(6,2),1t.V(4,2)).3x()-1]){8T=K;1e}};h(!8T){c.3A=[0,0,0,0,0,0,0]}};1i.1n.3i=v(1t){h(!c.1T&&!c.1U){u A};k 7t=A;h(!1t){7t=K;1t=c.B};k d=1h(1t.1C()),m=1h(1t.1f()+1),y=1t.1c(),dt=15(y)+15(m)+15(d);h(c.1T&&+dt<+c.1T){h(!7t){u K};c.B=L 14(c.1T.V(0,4),c.1T.V(4,2)-1,c.1T.V(6,2),5,0,0);u A};h(c.1U&&+dt>+c.1U){h(!7t){u K};c.B=L 14(c.1U.V(0,4),c.1U.V(4,2)-1,c.1U.V(6,2),5,0,0)};u A};1i.1n.6o=v(1t){h(!1t)u A;k d=1h(1t.1C()),m=1h(1t.1f()+1),y=1t.1c(),dt=15(y)+15(m)+15(d),dd=c.8b(y,m),al=1t.3x()==0?7:1t.3x();h((c.1T&&+dt<+c.1T)||(c.1U&&+dt>+c.1U)||(dd[dt]==0)||c.3A[al-1]){u A};u K};1i.1n.4Y=v(4s){2m(c.2t.26){c.2t.3g(c.2t.26)};h(4s&&c.3C.J(/-S|S-/)!=-1&&4s.J(/([0-9]{1,2})(6p|3E|6q|1V)/)!=-1){4s=4s.1d(/([0-9]{1,2})(6p|3E|6q|1V)/,"$1<4t>$2</4t>").5O(/<4t>|<\\/4t>/);k dc=q.co();Z(k i=0,3E;3E=4s[i];i++){h(/^(6p|3E|6q|1V)$/.5H(3E)){k 4t=q.1J("4t");4t.17(q.1X(3E));dc.17(4t)}I{dc.17(q.1X(3E))}};c.2t.17(dc)}I{c.2t.17(q.1X(4s?4s:1D(9)))}};1i.1n.3a=v(){k cp=c.1B,m=A,dt,1z,R,4u,d,y,7u;c.1B=1a;Z(1z 18 c.2l){R=q.1l(1z);h(!R){u};7u=15(R.1w);4u=c.2l[1z];dt=A;h(!(7u=="")){Z(k i=0,1I;1I=c.4G[1z][i];i++){dt=52(7u,1I);h(dt){1e}}};h(dt){h(4u.J(L 2K(\'[\'+7G+\']\'))!=-1){d=dt.1C()};h(4u.J(L 2K(\'[\'+7H+\']\'))!=-1){m=dt.1f()};h(4u.J(L 2K(\'[\'+7I+\']\'))!=-1){y=dt.1c()}}};dt=A;h(d&&!(m===A)&&y){h(+d>21(+m,+y)){d=21(+m,+y);dt=A}I{dt=L 14(+y,+m,+d)}};h(!dt||7m(dt)){k 6r=L 14(y||L 14().1c(),!(m===A)?m:L 14().1f(),1);c.B=c.1E?L 14(+c.1E.V(0,4),+c.1E.V(4,2)-1,+c.1E.V(6,2)):L 14(6r.1c(),6r.1f(),1M.3I(+d||L 14().1C(),21(6r.1f(),6r.1c())));c.B.6K(5);c.3i();c.3y("6h",c.5l());c.2e();u};dt.6K(5);c.B=L 14(dt);c.3i();h(dt.5D()==c.B.5D()&&c.6o(c.B)){c.1B=L 14(c.B)};c.3y("6h",c.5l());h(c.5h)c.2e();c.6i(K)};1i.1n.am=v(R,ao){Z(k 6s=R.E.16-1;6s>=0;6s--){h(R.E[6s].1w==ao){R.cq=6s;u}}};1i.1n.6i=v(1S){h(!c.1B){u};k d=1h(c.1B.1C()),m=1h(c.1B.1f()+1),y=c.1B.1c(),U=A,1z,R,4u,7v;1S=!!1S;Z(1z 18 c.2l){R=q.1l(1z);h(!R)u;h(!U)U=R;4u=c.2l[1z];7v=3h(c.1B,4u,6A);h(R.24.2a()=="5w"){R.1w=7v}I{c.am(R,7v)}};h(c.1P){c.1S=K;c.2e();c.1S=A};h(c.5h){h(U.1v&&U.1v!="3c"&&!1S){U.61()}}};1i.1n.8A=v(){h(c.1j)u;h(c.1P){c.73();c.5n();c.1S=K;c.Q.G=c.Q.G.1d(/dp-1j/,"")+" dp-1j";c.1y.4R=c.1y.4i=c.1y.4S=c.1y.2D=1a;1A(q,"4Q",c.2D);1A(q,"5t",c.4T)}I{h(c.2X)c.3S();k H=q.1l("1g-H-"+c.C);h(H){H.G=H.G.1d(/dp-1j/,"")+" dp-1j";2r(H,"1j",K);H.3m=H.4i=v(){u A};H.2W(!/*@1L!@*/A?"3f":"5Z","-1");H.3f=-1}};66(c.5U);c.1j=K};1i.1n.ap=v(){h(!c.1j)u;h(c.1P){c.5n();c.1S=K;c.2e();c.Q.G=c.Q.G.1d(/dp-1j/,"");c.1j=A;c.1y.4R=c.4R;c.1y.4S=c.4S;c.1y.4i=c.4i;c.1y.2D=c.2D}I{k H=q.1l("1g-H-"+c.C);h(H){H.G=H.G.1d(/dp-1j/,"");2r(H,"1j",A);c.8B(H)}};c.1j=A};1i.1n.6W=v(){k 2f=L 14();c.6c.G=c.6c.G.1d("1g-1j","");h(c.3i(2f)||(c.B.1C()==2f.1C()&&c.B.1f()==2f.1f()&&c.B.1c()==2f.1c())){c.6c.G+=" 1g-1j"}};1i.1n.7a=v(){k 6a=c.1Y?8:7,5x=c.1Y?1:0,d,H;Z(k 1m=5x;1m<6a;1m++){d=(c.2M+(1m-5x))%7;c.2w[1m].22=6k(d,A);h(1m>5x){H=c.2w[1m].1N("1k")[0];2m(H.26){H.3g(H.26)};H.17(q.1X(6k(d,K)));H.22=c.2w[1m].22;H.G=H.G.1d(/2d-([0-6])/,"")+" 2d-"+d;H=1a}I{2m(c.2w[1m].26){c.2w[1m].3g(c.2w[1m].26)};c.2w[1m].17(q.1X(6k(d,K)))};c.2w[1m].G=c.2w[1m].G.1d(/B-1x-71/g,"");h(c.4N[d]){c.2w[1m].G+=" B-1x-71"}};h(c.2L){c.2e()}};1i.1n.3y=v(1v,aq){h(!1v||!(1v 18 c.5j)){u A};k 8U=A;Z(k 7w=0;7w<c.5j[1v].16;7w++){8U=c.5j[1v][7w](aq||c.C)};u 8U};1i.1n.84=v(1t){h(!c.5y){u};k 53=1t.1f(),54=1t.1c();h(c.3i(L 14((54-1),53,21(+53,54-1)))){h(c.5y.G.J(/1g-1j/)==-1){c.5y.G+=" 1g-1j"};h(c.3L==-1)c.3l()}I{c.5y.G=c.5y.G.1d(/1g-1j/g,"")};h(c.3i(L 14(54,(+53-1),21(+53-1,54)))){h(c.6b.G.J(/1g-1j/)==-1){c.6b.G+=" 1g-1j"};h(c.2Y==-1)c.3l()}I{c.6b.G=c.6b.G.1d(/1g-1j/g,"")};h(c.3i(L 14((54+1),+53,1))){h(c.6d.G.J(/1g-1j/)==-1){c.6d.G+=" 1g-1j"};h(c.3L==1)c.3l()}I{c.6d.G=c.6d.G.1d(/1g-1j/g,"")};h(c.3i(L 14(54,+53+1,1))){h(c.6e.G.J(/1g-1j/)==-1){c.6e.G+=" 1g-1j"};h(c.2Y==1)c.3l()}I{c.6e.G=c.6e.G.1d(/1g-1j/g,"")}};k 3k={4v:["cr","cs","ct","cu","ar","cv","cw","cx","cz","cA","cB","cC"],4w:["cD","cE","cF","cG","ar","cH","cI","cJ","cK","cL","cM","cN"],4x:["cO","cP","cQ","cR","cS","cT","cU"],3Q:["cV","cW","cX","cY","cZ","d0","d1"],2F:["as 1Q","at 1Q","as 2p","at 2p","au","d2 d3","d4","av [[%0%]] 2O [[%1%]]","av","d5 a B","d6 \\d7 d8 6n d9","da \\db[[%0%]]\\de df","dg 6n au\\dh B","di B :"],2M:0,7x:A};k dj=v(){h(!8V.16){u[]}k 7y=[];Z(k i=0;i<8V.16;i++){Z(k j=0,8W;8W=8V[i][j];j++){7y[7y.16]=8W}};u 7y};k 8X=v(){k dp,8Y;Z(dp 18 P){Z(8Y 18 P[dp].2l){h(!q.1l(8Y)){P[dp].4P();P[dp]=1a;6t P[dp];1e}}}};k 6g=v(8Z){k dp;Z(dp 18 P){h(!P[dp].2L||(8Z&&8Z==P[dp].C))3s;P[dp].3S()}};k aw=v(O){h(O 18 P){h(!P[O].2L||P[O].1P)u;P[O].3S()}};k 8D=v(O,4m){h(!(O 18 P))u A;P[O].46=!!!4m;P[O].8x(4m);u K};k 4P=v(e){e=e||1p.2V;h(e.dk){u};Z(dp 18 P){P[dp].4P();P[dp]=1a;6t P[dp]};P=1a;1A(1p,\'ax\',7E.4P)};k ay=v(C){h(C&&(C 18 P)){P[C].4P();P[C]=1a;6t P[C]}};k 1D=v(91,55){55=55||[];h(1Z.2F.16>91){k 4o=1Z.2F[91];h(55&&55.16){Z(k i=0;i<55.16;i++){4o=4o.1d("[[%"+i+"%]]",55[i])}};u 4o.1d(/[[%(\\d)%]]/g,"")};u""};k 6k=v(2d,7z){k 2F=1Z[7z?"3Q":"4x"];u 2F.16&&2F.16>2d?2F[2d]:""};k 9S=v(1Q,7z){k 2F=1Z[7z?"4w":"4v"];u 2F.16&&2F.16>1Q?2F[1Q]:""};k 21=v(6u,7A){6u=(6u+12)%12;u(((0==(7A%4))&&((0!=(7A%7p))||(0==(7A%dl))))&&6u==1)?29:[31,28,31,30,31,30,31,31,30,31,30,31][6u]};k 8y=v(Y){h(Y 18 5I){u 5I[Y]};k 92,93,dm;4X(92=L 14(Y,0,4)){2B(1C()-(6+3x())%7)};4X(93=L 14(Y,11,28)){2B(1C()+(7-3x())%7)};5I[Y]=1M.4h((93-92)/dn);u 5I[Y]};k 8d=v(y,m,d){k d=L 14(y,m,d,0,0,0);k az=d.3x();d.2B(d.1C()-(az+6)%7+3);k aA=d.aB();d.62(0);d.2B(4);u 1M.4h((aA-d.aB())/(7*dq))+1};k 3h=v(B,1I,57){h(!B||7m(B)){u""};k 3Z=1I.5O("-"),X=[],d=B.1C(),D=B.3x(),m=B.1f(),y=B.1c(),94={"1R":" ","dt":".","4A":"/","ds":"-","cc":",","d":1h(d),"D":57?1Z.3Q[D==0?6:D-1]:3k.3Q[D==0?6:D-1],"l":57?1Z.4x[D==0?6:D-1]:3k.4x[D==0?6:D-1],"j":d,"N":D==0?7:D,"w":D,"W":8d(B),"M":57?1Z.4w[m]:3k.4w[m],"F":57?1Z.4v[m]:3k.4v[m],"m":1h(m+1),"n":m+1,"t":21(m,y),"y":15(y).V(2,2),"Y":y,"S":["1V","6p","3E","6q"][d%10>3?0:(d%7p-d%10!=10)*d%10]};Z(k 2A=0,2b;2b=3Z[2A];2A++){X.2c(!(2b 18 94)?"":94[2b])};u X.5f("")};k 52=v(X,1I){k d=A,m=A,y=A,aC=L 14(),3Z=1I.1d(/-1R(-1R)+/g,"-1R").5O("-"),dr={"dt":".","4A":"/","ds":"-","cc":","},X=""+X;95:Z(k 2A=0,2b;2b=3Z[2A];2A++){h(X.16==0){u A};7M(2b){1r"1R":1r"dt":1r"4A":1r"ds":1r"cc":X=X.1d(/^(\\s|\\.|\\/|,|-){1,}/,"");1e;1r"d":1r"j":h(X.J(/^(3[2S]|[12][0-9]|0?[1-9])/)!=-1){d=+X.1W(/^(3[2S]|[12][0-9]|0?[1-9])/)[0];X=X.V(X.1W(/^(3[2S]|[12][0-9]|0?[1-9])/)[0].16);1e}I{u""};1r"D":1r"l":l=3k.4x.3T(3k.3Q);h(1Z.7x){l=l.3T(1Z.4x).3T(1Z.3Q)};Z(k i=0;i<l.16;i++){h(L 2K("^"+l[i],"i").5H(X)){X=X.V(l[i].16);3s 95}};1e;1r"N":1r"w":h(X.J(2b=="N"?/^([1-7])/:/^([0-6])/)!=-1){X=X.V(1)};1e;1r"S":h(X.J(/^(6p|3E|6q|1V)/i)!=-1){X=X.V(2)};1e;1r"W":h(X.J(/^([1-9]|[aD[0-9]|5[0-3])/)!=-1){X=X.V(X.1W(/^([1-9]|[aD[0-9]|5[0-3])/)[0].16)};1e;1r"M":1r"F":l=3k.4v.3T(3k.4w);h(1Z.7x){l=l.3T(1Z.4v).3T(1Z.4w)};Z(k i=0;i<l.16;i++){h(X.J(L 2K("^"+l[i],"i"))!=-1){X=X.V(l[i].16);m=((i+12)%12);3s 95}};u"";1r"m":1r"n":l=/^(1[5L]|0?[1-9])/;h(X.J(l)!=-1){m=+X.1W(l)[0]-1;X=X.V(X.1W(l)[0].16);1e}I{u""};1r"t":h(X.J(/2[89]|3[2S]/)!=-1){X=X.V(2);1e};1e;1r"Y":h(X.J(/^(\\d{4})/)!=-1){y=X.V(0,4);X=X.V(4);1e}I{u""};1r"y":h(X.J(/^(\\d{4})/)!=-1){y=X.V(0,4);X=X.V(4);1e}I h(X.J(/^(0[0-9]|[1-9][0-9])/)!=-1){y=X.V(0,2);y=+y<50?\'20\'+""+15(y):\'19\'+""+15(y);X=X.V(2);1e}I u"";ac:u""}};h(!(X=="")||(d===A&&m===A&&y===A)){u A};m=m===A?11:m;y=y===A?aC.1c():y;d=d===A?21(+m,+y):d;h(d>21(+m,+y)){u A};k 1t=L 14(y,m,d);u!1t||7m(1t)?A:1t};k aE=v(1o){k 4y;h(1o.2g&&1o.2g.24.2a()=="4y")du=1o.2g;I{k 5E=q.1N(\'4y\');Z(k 58=0;58<5E.16;58++){h((5E[58][\'aF\']&&5E[58][\'aF\']==1o.C)||(5E[58].7K(\'Z\')==1o.C)){4y=5E[58];1e}}};h(4y&&!4y.C){4y.C=1o.C+"dv"};u 4y};k 98=v(){h(2z(1p.3G)=="3V"){1Z={2F:3G.2F,4v:3G.4v,4w:3G.4w,4x:3G.4x,3Q:3G.3Q,2M:("2M"18 3G)?3G.2M:0,7x:K}}I h(!1Z){1Z=3k}};k 9a=v(){98();Z(dp 18 P){h(!P[dp].2L)3s;P[dp].2e()}};k aG=v(R){u!(!R||!R.24||!((R.24.2a()=="5w"&&(R.1v=="3X"||R.1v=="3c"))||R.24.2a()=="8z"))};k aH=v(E){98();h(!E.2l){h(3o)43"dw dx dy dz 9b dA dB";u};E.C=(E.C&&(E.C 18 E.2l))?E.C:"";E.4G={};k aI=[7G,7H,7I],6v=[0,0,0],3U,6w,9c,9d,1I,3n,dC,59,2h,2i;Z(k 1z 18 E.2l){R=q.1l(1z);h(!aG(R)){h(3o)43"9e 1o 4X 9f C 2O \'"+1z+"\' dD 2O 44 dE 1v dF dG 3K dH 9b 44 dI";u A};h(!E.C)E.C=1z;1I=E.2l[1z];h(!(1I.1W(5d))){h(3o)43"9e 1o 4X 9f C 2O \'"+1z+"\' aJ 44 aK aL B 7B aM 6n aN: "+1I;u A};3n=[1I];h(E.6x&&(1z 18 E.6x)&&E.6x[1z].16){59=[];Z(k f=0,6y;6y=E.6x[1z][f];f++){h(!(6y.1W(5d))){h(3o)43"9e 1o 4X 9f C 2O \'"+1z+"\' aJ 44 aK aL B 7B aM 6n aN 9b 44 6x dJ: "+6y;u A};59.2c(6y)};3n=3n.3T(59)};3U=[0,0,0];Z(k i=0,5F;5F=aI[i];i++){h(1I.J(L 2K(\'(\'+5F+\')\'))!=-1){6v[i]=3U[i]=1;h(R.24.2a()=="5w"){6w=1I.1W(L 2K(\'(\'+5F+\')\'))[0];9c=15(6w+"|"+5F.1d(L 2K("("+6w+")"),"")).1d("||","|");9d=9c.5O("|");59=[];Z(k z=0,9g;9g=3n[z];z++){Z(k x=0,7C;7C=9d[x];x++){h(7C==6w)3s;59.2c(9g.1d(L 2K(\'(\'+5F+\')(-|$)\',\'g\'),7C+"-").1d(/-$/,""))}};3n=3n.3T(59)}}};E.4G[1z]=3n.3T();h(R.24.2a()=="8z"){2h=2i=0;k 5a=R.E;h(3U[0]&&3U[1]&&3U[2]){k 1G,1E=A;h("2k"18 E){6t(E.2k)};E.25={};Z(i=0;i<5a.16;i++){Z(k f=0,1I;1I=3n[f];f++){dt=52(5a[i].1w,1I);h(dt){1G=dt.1c()+""+1h(dt.1f()+1)+""+1h(dt.1C());h(!1E)1E=1G;E.25[1G]=1;h(!2h||2o(1G)<2h){2h=1G};h(!2i||2o(1G)>2i){2i=1G};1e}}};h(!E.1E&&1E)E.1E=1E}I h(3U[1]&&3U[2]){k 4g;Z(i=0;i<5a.16;i++){Z(k f=0,1I;1I=3n[f];f++){dt=52(5a[i].1w,1I);h(dt){4g=dt.1c()+""+1h(dt.1f()+1);h(!2h||2o(4g)<2h){2h=4g};h(!2i||2o(4g)>2i){2i=4g};1e}}};2h+=""+"2S";2i+=""+21(+2i.V(4,2)-1,+2i.V(0,4))}I h(3U[2]){k 3t;Z(i=0;i<5a.16;i++){Z(k f=0,1I;1I=3n[f];f++){dt=52(5a[i].1w,1I);h(dt){3t=dt.1c();h(!2h||2o(3t)<2h){2h=3t};h(!2i||2o(3t)>2i){2i=3t};1e}}};2h+="dK";2i+="dL"};h(2h&&(!E.1T||(+E.1T<+2h)))E.1T=2h;h(2i&&(!E.1U||(+E.1U>+2h)))E.1U=2i}};h(!(6v[0]&&6v[1]&&6v[2])){h(3o)43"5R 3K dM 8R 2O 44 dN B 3Z Z 1o: "+R.C;u A};k 5G={2l:E.2l,C:E.C,4G:E.4G,1P:!!(E.1P),2R:E.2R&&q.1l(E.2R)?E.2R:"",1T:E.1T&&15(E.1T).J(2y)!=-1?E.1T:"",1U:E.1U&&15(E.1U).J(2y)!=-1?E.1U:"",3C:E.3C&&15(E.3C).J(5d)!=-1?E.3C:"",8o:!!(E.1P)?K:!!(E.8o),8j:5J||!!(E.1P)?K:!!(E.8j),7D:E.7D&&2z E.7D==\'7S\'?2N(E.7D,10):0,4k:E.4k&&2z E.4k==\'7S\'&&(E.4k>20&&E.4k<=7p)?1M.3I(+E.4k,99):(!!(E.1P)?99:90),8l:!!(E.8l),63:!!(E.dO),1Y:!!(E.1Y),5q:!!(E.5q),4L:"4L"18 E?!!(E.4L):K,1E:E.1E&&15(E.1E).J(2y)!=-1?E.1E:"",8i:aE(R),2G:(E.2G&&q.1l(E.2G))?E.2G:2G&&q.1l(2G)?2G:"",5j:E.aO?E.aO:{},4N:E.4N&&E.4N.16&&E.4N.16==7?E.4N:[0,0,0,0,0,1,1],3A:E.3A&&E.3A.16&&E.3A.16==7?E.3A:[0,0,0,0,0,0,0]};h(E.2k){h(E.25)6t(E.25);5G.2k={};k 1q;Z(1q 18 E.2k){h((15(1q).J(5e)!=-1&&E.2k[1q]==1)||(15(1q).J(2y)!=-1&&15(E.2k[1q]).J(2y)!=-1)){5G.2k[1q]=E.2k[1q]}}}I h(E.25){k 1q;5G.25={};Z(1q 18 E.25){h((15(1q).J(5e)!=-1&&E.25[1q]==1)||(15(1q).J(2y)!=-1&&15(E.25[1q]).J(2y)!=-1)){5G.25[1q]=E.25[1q]}}};P[E.C]=L 1i(5G);P[E.C].3y("74",P[E.C].5l())};k ae=v(C){u(!C||!(C 18 P))?A:P[C].2X};2j(1p,\'ax\',4P);u{2j:v(1s,1v,2n){u 2j(1s,1v,2n)},1A:v(1s,1v,2n){u 1A(1s,1v,2n)},1O:v(e){u 1O(e)},8x:v(O){u 8D(O,A)},3S:v(O){u aw(O)},dP:v(E){aH(E)},dQ:v(O){ay(O)},8X:v(){8X()},3h:v(dt,1I,57){u 3h(dt,1I,57)},3a:v(O){h(!O||!(O 18 P))u A;P[O].3a()},8G:v(O,1G){h(!O||!(O 18 P)){u A};P[O].8G(1G)},8H:v(O,1G){h(!O||!(O 18 P)){u A};P[O].8H(1G)},52:v(X,7B){u 52(X,7B)},dR:v(3p){7J(3p)},8K:v(O,1G){h(!O||!(O 18 P)){u A};P[O].8K(1G)},dS:v(O,dt){h(!O||!(O 18 P))u A;u P[O].6o(dt)},7k:v(O,2Q){h(!O||!(O 18 P))u A;P[O].7k(2Q)},8I:v(O,2Q){h(!O||!(O 18 P))u A;P[O].8I(2Q)},7l:v(O,2Q){h(!O||!(O 18 P))u A;P[O].7l(2Q)},8J:v(O,2Q){h(!O||!(O 18 P))u A;P[O].8J(2Q)},dT:v(O){h(!O||!(O 18 P))u A;P[O].8A()},dU:v(O){h(!O||!(O 18 P))u A;P[O].ap()},83:v(O,1G){h(!O||!(O 18 P))u A;P[O].83(1G)},dV:v(O){u(!O||!(O 18 P))?A:P[O].af()},9a:v(){9a()},dW:v(aP){3o=!!(aP)}}})();',62,865,"||||||||||||this|||||if|||var||||||document||||return|function|||||false|date|id||options||className|but|else|search|true|new|||inpID|datePickers|div|elem||td|el|substr||str||for|||||Date|String|length|appendChild|in||null|style|getFullYear|replace|break|getMonth|fd|pad|datePicker|disabled|span|getElementById|col|prototype|element|window|startD|case|obj|tmpDate|kc|type|value|picker|table|elemID|removeEvent|dateSet|getDate|getTitleTranslation|cursorDate|iePopUp|yyyymmdd|row|fmt|createElement|tr|cc_on|Math|getElementsByTagName|stopEvent|staticPos|month|sp|noFocus|rangeLow|rangeHigh|th|match|createTextNode|showWeeks|localeImport||daysInMonth|title|end|tagName|enabledDates|firstChild||||toLowerCase|part|push|day|updateTable|today|parentNode|myMin|myMax|addEvent|disabledDates|formElements|while|fn|Number|year|statusText|setARIAProperty|cName|statusBar|prev|next|ths|dateObj|rangeRegExp|typeof|pt|setDate|currentStub|onmousedown|details|titles|describedBy|err|try|catch|RegExp|created|firstDayOfWeek|parseInt|of|range|dts|positioned|01|script|_win32|event|setAttribute|visible|monthInc|inUpdate|||||||||||setDateFromInput|body|hidden|pos|px|tabIndex|removeChild|printFormattedDate|outOfRange|currentDate|localeDefaults|stopTimer|onkeydown|fmtBag|debug|json|documentElement|setARIARole|continue|yyyy|display|hover|out|getDay|callback|curr|disabledDays|onmousewheel|statusFormat|rows|nd|kbEvent|fdLocale|languageTag|min|top|not|yearInc|opacityTo|scrollLeft|scrollTop|spnC|dayAbbrs|active|hide|concat|tmpPartsFound|object|nbsp|text|mousewheel|parts||||throw|the|opacity|clickActivated|isIE7|||left|selectable|cellAdded|firstColIndex|dpm|weekDay|yyyymm|round|onclick|cols|finalOpacity|cellDate|autoFocus|butt|txt|inpId|dt1|dt2|msg|sup|elemFmt|fullMonths|monthAbbrs|fullDays|label|titleFormat|sl|scriptFiles|fullParts|tmpParts|parentWindow|thing|formatMasks|_jscript_version|visibility|spn|firstDateShown|constrainSelection|lastDateShown|highlightDays|timerInc|destroy|mousedown|onmouseover|onmouseout|clearTimer|colspan|tableHead|drag|with|updateStatus|button||currentTR|parseDateString|tdm|tdy|replacements||useImportedLocale|lbl|newFormats|selOptions|isOpera|placeholder|validFmtRegExp|wcDateRegExp|join|on|fullCreate|interval|callbacks|prop|createCbArgObj|offsetHeight|removeOldFocus|setNewFocus|lm|fillGrid|wkThs|header|mouseup|dragEnabledCN|enabled|input|colOffset|butPrevYear|fade|target|origEl|delta|getTime|labelList|testPart|opts|test|weeksInYearCache|nodrag|formatParts|012|lang|bases|split|addEventListener|JSON|Could|timerSet|fadeTimer|timer|kbEventsAdded|selectedTD|delayedUpdate|osh|tabindex|ymd|focus|setMonth|noToday|stub|titleBar|clearTimeout|createTH|unselectable|tableBody|colspanTotal|butPrevMonth|butToday|butNextYear|butNextMonth|mouseDownElem|hideAll|dateset|returnFormattedDate|inc|getDayTranslation|keydown|dayArray|to|canDateBeSelected|st|rd|newDate|opt|delete|nMonth|partsFound|matchedPart|dateFormats|bDft|languageInfo|returnLocaleDate|mouseWheel|cellFormat|head|src|html|string|describedby|parse|dayInc|setHours|mm|block|osw|trueBody|compatMode|abs|onblur|onfocus|unused|no|setTimeout|disableTodayButton|bespokeRenderClass|nm|currentYYYYMM|selected|highlight|devicePixelRatio|removeOnFocusEvents|create|thClassName|none|tableFoot|datepicker|tbody|updateTableHeaders|pageX|clientX|pageY|clientY|incs|check|dateYYYYMM|keyCode|buttonEvent|addDisabledDates|addEnabledDates|isNaN|keypress|op|100|deDates|lower|upper|level|elemVal|fmtDate|func|imported|nodeList|abbreviation|nYear|format|indPart|bespokeTabindex|datePickerController|buttonTabIndex|dParts|mParts|yParts|affectJSON|getAttribute|key|switch|removeEventListener|role|mx|my|pageYOffset|number|reposition|0px|offsetWidth|sOffsets|width|height|selection|screen|reader|cloneNode|setCursorDate|showHideButtons|dateSetD|weekDayC|daySub|stubN||stubP|getDates|tds|getWeekNumber|week|mouseout|DOMMouseScroll|createThAndButton|labelledBy|dragDisabled|presentation|hideInput|diff|setOpacity|noFadeEffect|trackDrag|diffx|diffy|stopDrag|srcElement|hideDP|800|cnt|show|getWeeksInYear|select|disableDatePicker|addButtonEvents|dpVisible|showDatePicker|bespokeTabIndex|inp|setRangeLow|setRangeHigh|setDisabledDates|setEnabledDates|setSelectedDate|dds|getGenericDates|eds|rngLower|rngUpper|iebody|all|posReal|clearDayFound|ret|arguments|item|cleanUp|fe|exception||num|X1|X2|flags|loopLabel|||updateLanguage||loadLanguage|within|newParts|indParts|The|and|bFmt|Object|call|opera|isMoz|navigator|userAgent|parseUILanguage|scriptInner|parseJSON|loc|javascript|buttontabindex|cellformat|parseCellFormat|titleformat|attachEvent|detachEvent|stopPropagation|Function|parent|property|changeHandler|getScrollOffsets|pageXOffset|truePosition|BackCompat|fitsBottom|fitsTop|clientWidth|addAccessibleDate|noS|setFullYear|abbr|weekDayN|weekDayP|checkSelectedDate|mmdd|getMonthTranslation|resizeInlineDiv|locate|associated|insertBefore|nextSibling|tfoot|thead|scope|equaliseDates|mousemove|zIndex|reg|previousSibling|addOnFocusEvents|wheelDelta|detail|charCode|ctrlKey|nodeType|default|createButton|isVisible|returnSelectedDate|setDisabledDays|cumulativeOffset|dsocleft|dsoctop|realOffset|wd|setSelectIndex||indx|enableDatePicker|args|May|Previous|Next|Today|Week|hideDatePicker|unload|destroySingleDatePicker|DoW|ms|valueOf|now|1234|findLabelForElement|htmlFor|checkElem|addDatePicker|testParts|has|following|incorrect|assigned|it|callbackFunctions|dbg|toString|Opera|mozilla|compatible|webkit|uniqueId|fromCharCode|160|dividors|dvParts|innerHTML|lastIndexOf|js|charSet|utf|base|childNodes|xml|en|0000|preventDefault|cancelBubble|returnValue|self|Array|Image|ActiveXObject|gim|bfunction|aria|cursorTD|defaults|dynDisabledDates|maxHeight|undefined|clientHeight|noCallback|redraw|firstDateDisplayed|lastDateDisplayed|floor|mouseover|colSpan|labelledby|datePickerTable|iframe|iehack|scrolling|frameBorder|name|iePopUpHack|static|300|grid|statusbar|u00AB|u2039|u203A|u00BB|gridcell|columnheader|rowheader|trs|weeks|displayed|domcreate|9999|accellerator|1200|10000|120|version|104|tmp|cursorYYYYMM|toElement|relatedTarget|nodeValue|change|href|control|haspopup|dombuttoncreate|Invalid|||values|located|when|attempting|filter|alpha|offsetTop|offsetLeft||offsetParent|createDocumentFragment|origDateSet|selectedIndex|January|February|March|April|June|July|August||September|October|November|December|Jan|Feb|Mar|Apr|Jun|Jul|Aug|Sep|Oct|Nov|Dec|Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday|Mon|Tue|Wed|Thu|Fri|Sat|Sun|Show|Calendar|wk|Select|Click|u0026|Drag|move|Display|u201C|||u201D|first|Go|u2019s|Disabled|joinNodeLists|persisted|400|NW|604800000|||864e5|divds|||lebel|_label|No|form|elements|stipulated|initialisation|parameters|fmtParts|is|wrong|or|does|exist|DOM|parameter|0101|1231|find|required|noTodayButton|createDatePicker|destroyDatePicker|setGlobalVars|dateValidForSelection|disable|enable|getSelectedDate|setDebug".split("|"),0,{}));var TextEditor=Class.create(BaseTextEditor,{editor_initialize:function(){this.createInput();this.eventHandler=this.handleKeyPress.bindAsEventListener(this);Event.observe(this.input,"keypress",this.eventHandler)},destroy:function(){Event.stopObserving(this.input,"keypress",this.eventHandler)},handleKeyPress:function(a){switch(a.keyCode){case 13:if(Prototype.Browser.IE?a.ctrlKey:a.altKey){this.switchTo("multiline")}break}}});if(BaseEditor.isTableEditorExists()){TableEditor.Editors.text=TextEditor}var MultiLineEditor=Class.create(BaseTextEditor,{__do_nothing_on_enter:true,editor_initialize:function(){this.createInput();this.eventHandler=this.handleKeyPress.bindAsEventListener(this);Event.observe(this.input,"keypress",this.eventHandler)},createInput:function(){this.input=new Element("textarea");this.setDefaultStyle();this.input.setStyle(this.style)},handleKeyPress:function(a){switch(a.keyCode){case 13:if(a.ctrlKey){this.doneEdit()}break;default:if(this.maxInputSize&&this.input.value.length>=this.maxInputSize){if(a.charCode!=undefined&&a.charCode!=0){Event.stop(a)}}break}},destroy:function(){Event.stopObserving(this.input,"keypress",this.eventHandler)},getValue:function(){var a=this.input.value;return a.gsub("\r\n","\n").replace(/\n$/,"")}});if(BaseEditor.isTableEditorExists()){TableEditor.Editors.multiline=MultiLineEditor}var NumericEditor=Class.create(BaseTextEditor,{min:null,max:null,editor_initialize:function(b){this.createInput();var a=this;this.input.onkeypress=function(c){return a.keyPressed(c||window.event)};if(b){this.min=b.min;this.max=b.max}},isValid:function(b){var c=Number(b);var a=isNaN(c)||(this.min&&c<this.min)||(this.max&&c>this.max);return !a},keyPressed:function(c){var a=this.input.getValue();if(c.charCode==0){return true}var b=c.charCode==undefined?c.keyCode:c.charCode;if(b==45){return a.indexOf("-")<0}if(b==46){return a.indexOf(".")<0}return b>=48&&b<=57}});if(BaseEditor.isTableEditorExists()){TableEditor.Editors.numeric=NumericEditor}var DropdownEditor=Class.create(BaseEditor,{editor_initialize:function(e){this.createInput();this.addOption("","");var c=e.choices;var b=e.displayValues;var a=Math.min(c.length,b.length);for(var d=0;d<a;++d){this.addOption(c[d],b[d])}},createInput:function(){this.input=new Element("select");this.input.style.border="1px solid threedface";this.input.style.margin="0px";this.input.style.padding="0px";this.input.style.width="101%";this.input.setStyle(this.style)},addOption:function(c,b){var a=new Element("option");a.value=c;a.innerHTML=b;this.input.appendChild(a)}});if(BaseEditor.isTableEditorExists()){TableEditor.Editors.combo=DropdownEditor}var FormulaEditor=Class.create(BaseTextEditor,{editor_initialize:function(){this.createInput();this.eventHandler=this.handleKeyPress.bindAsEventListener(this);Event.observe(this.input,"keypress",this.eventHandler)},destroy:function(){Event.stopObserving(this.input,"keypress",this.eventHandler)},handleKeyPress:function(a){}});if(BaseEditor.isTableEditorExists()){TableEditor.Editors.formula=FormulaEditor}var BooleanEditor=Class.create(BaseEditor,{editor_initialize:function(){this.input=new Element("input");this.input.setAttribute("type","checkbox")},getValue:function(){return this.input.checked},setValue:function(a){this.input.checked=a=="true"?true:false}});if(BaseEditor.isTableEditorExists()){TableEditor.Editors["boolean"]=BooleanEditor}var DateEditor=Class.create(BaseTextEditor,{editor_initialize:function(){this.createInput();this.input.style.width="-moz-calc(100% - 28px)";this.input.style.width="-webkit-calc(100% - 28px)";this.input.style.width="calc(100% - 28px)";var a=this;this.input.onkeydown=function(b){return a.keyPressed(b||window.event)};this.input.oncontextmenu=function(b){return false};this.input.onclick=function(){datePickerController.show(a.getId())}},show:function($super,c){$super(c);var a=this.getId();var d={formElements:{},noFadeEffect:true,finalOpacity:100};d.formElements[a]="m-sl-d-sl-Y";var b={noDrag:true};datePickerController.setGlobalVars(b);datePickerController.createDatePicker(d)},destroy:function(a){datePickerController.destroyDatePicker(this.getId())},keyPressed:function(a){var b=a.keyCode;switch(b){case Event.KEY_BACKSPACE:case Event.KEY_DELETE:this.input.value="";break}return false}});if(BaseEditor.isTableEditorExists()){TableEditor.Editors.date=DateEditor}var MultiselectEditor=Class.create(BaseTextEditor,{multiselectPanel:null,entries:null,choices:null,separator:null,separatorEscaper:null,destroyed:null,editor_initialize:function(c){var k=this;this.createInput();this.choices=c.choices;this.entries=$H();this.multiselectPanel=new Element("div");this.multiselectPanel.className="multiselect_container_outer";var j=new Element("div");j.className="multiselect_buttons";j.innerHTML='<input type="button" value="Select All"> <input type="button" value="Done">';var h=j.down(),g=h.next();h.onclick=function(){k.setAllCheckBoxes(this.value=="Select All");this.value=(this.value=="Select All"?"Deselect All":"Select All")};g.onclick=function(){k.finishEdit()};this.multiselectPanel.appendChild(j);var a=new Element("div");a.className="multiselect_container";var f=c.choices,e=c.displayValues;for(var b=0,d=f.length;b<d;++b){var i=new Element("div");i.innerHTML='<input type="checkbox">'+e[b].escapeHTML();a.appendChild(i);this.entries[f[b]]=i.down()}this.multiselectPanel.appendChild(a);this.input.onclick=function(l){k.open()};this.input.onkeydown=function(l){k.open();return false};this.input.oncontextmenu=function(l){return false};this.documentClickListener=this.documentClickHandler.bindAsEventListener(this);this.separator=c.separator||",";this.separatorEscaper=c.separatorEscaper;this.destroyed=true},open:function(){var b=Element.positionedOffset(this.input);b[1]+=this.input.getHeight();this.multiselectPanel.style.left=b[0]+"px";this.multiselectPanel.style.top=b[1]+"px";this.input.up().appendChild(this.multiselectPanel);this.destroyed=false;var a=this.entries;this.splitValue(this.input.value).each(function(c){if(c){var d=a[c.strip()];if(d){d.checked=true}}});Event.observe(document,"click",this.documentClickListener)},close:function(){if(!this.destroyed){Event.stopObserving(document,"click",this.documentClickListener);Element.remove(this.multiselectPanel);this.destroyed=true}},finishEdit:function(){this.setValue(this.combineValue());this.handleF3();this.destroy()},splitValue:function(e){if(this.separatorEscaper){var b=";;;";var c=this.separatorEscaper+this.separator;e=e.replace(c,b);var d=e.split(this.separator);var a=[];d.each(function(f){if(f.indexOf(b)>-1){f=f.replace(b,c)}a.push(f)});return a}return e.split(this.separator)},combineValue:function(){var a=this.entries;return this.choices.findAll(function(b){return a[b].checked}).join(this.separator)},destroy:function(){this.close()},setAllCheckBoxes:function(b){var a=this.entries;this.choices.findAll(function(c){a[c].checked=b})},documentClickHandler:function(b){var a=Event.element(b);var c=false;if(!this.is(a)){this.close()}},is:function($super,a){if($super(a)){return true}else{do{if(a==this.multiselectPanel){return true}}while(a=a.parentNode)}return false}});if(BaseEditor.isTableEditorExists()){TableEditor.Editors.multiselect=MultiselectEditor}var ArrayEditor=Class.create(BaseTextEditor,{separator:null,entryEditor:null,editor_initialize:function(a){this.createInput();if(a){this.separator=a.separator;this.entryEditor=a.entryEditor}},isValid:function(d){var c=true;var b=this;if(b.entryEditor&&d){var a=d.split(this.separator);a.each(function(e){if(!b.entryEditor.isValid(e)){c=false}})}return c}});if(BaseEditor.isTableEditorExists()){TableEditor.Editors.array=ArrayEditor}var NumberRangeEditor=Class.create(BaseTextEditor,{rangePanel:null,check0:null,minValue:null,generalSeparator:" .. ",stableSeparators:["more than ","less than "," and more"," - "],unstableSeparators:[" ... ",";","+"],dashSeparator:"-",currentSeparator:null,destroyed:null,entryEditor:null,checkboxes:null,values:null,btns:null,equals:false,moreThan:false,editor_initialize:function(c){var l=this;this.createInput();this.rangePanel=new Element("div");var a=new Element("div");var k=new Element("table",{"class":"hide-on-screen"});k.setAttribute("style","padding-top: 5px;");l.check0=new Element("td");l.check0.setAttribute("align","center");l.check0.setAttribute("valign","middle");k.appendChild(this.check0);l.minValue=new Element("td");l.minValue.setAttribute("align","center");l.minValue.setAttribute("valign","middle");k.appendChild(this.minValue);var e=new Element("td").update('<input type="button" id="btnMore" value=">"/> <br/> <input type="button" id="btnLess" value="<"/> <br/> <input type="button" id="btnRange" value="-"/> <br/> <input type="button" id="btnEquals" value="="/>');k.appendChild(e);var f=new Element("td").update('To <br/> <input type="text" style="width: 40px"/>');f.setAttribute("align","center");f.setAttribute("valign","middle");k.appendChild(f);var b=new Element("td").update('Include <br/> <input type="checkbox"/>');b.setAttribute("align","center");b.setAttribute("valign","middle");k.appendChild(b);a.appendChild(k);l.rangePanel.appendChild(a);l.checkboxes=new Array();l.values=new Array();l.btns=new Array();l.values[0]=l.minValue;l.values[0].value="";l.btns[0]=e.down();l.btns[1]=l.btns[0].next().next();l.btns[2]=l.btns[1].next().next();l.btns[3]=l.btns[2].next().next();l.values[1]=f.down().next();l.checkboxes[1]=b.down().next();l.checkboxes[1].onclick=function(){l.currentSeparator=l.generalSeparator;l.changeRange()};l.values[1].onkeyup=function(){if(l.currentSeparator==l.stableSeparators[0]){l.currentSeparator=l.generalSeparator}if(l.currentSeparator==l.stableSeparators[2]){l.currentSeparator=l.generalSeparator}l.changeRange()};for(var d=0;d<l.btns.length;d++){l.btns[d].setAttribute("style","width: 20px; height: 20px;");l.btns[d].onclick=function(){l.currentSeparator=l.generalSeparator;l.changeSign(this.id)}}var h=new Element("div");h.id="range";this.rangePanel.appendChild(h);var j=new Element("div");j.innerHTML='<br/> <input type="button" id="btnDone" value="Done">';var g=j.down().next();g.onclick=function(){l.finishEdit()};this.rangePanel.appendChild(j);if(c){this.entryEditor=c.entryEditor}this.input.onclick=function(i){l.open()};this.input.onkeydown=function(i){l.open();return false};this.input.oncontextmenu=function(i){return false};this.documentClickListener=this.documentClickHandler.bindAsEventListener(this);this.destroyed=true},open:function(){this.rangePanel.setAttribute("style","width: 230px; height: 160px; background: white; border:1px solid gray;");this.rangePanel.setAttribute("align","center");this.input.up().appendChild(this.rangePanel);this.destroyed=false;var c=this.input.value;var b=this;var a;b.stableSeparators.each(function(d){if(c.indexOf(d)!==-1){b.currentSeparator=d;a=b.splitValue(c,d);if(d==" - "){b.disableLeftSide(2);b.values[0].value=a[0];b.values[1].value=a[1];b.checkboxes[0].setAttribute("checked","checked");b.checkboxes[1].setAttribute("checked","checked")}else{b.disableLeftSide(0);if(d!="less than "){b.moreThan="true"}if(a[0]){b.values[1].value=a[0];b.checkboxes[1].setAttribute("checked","checked")}else{b.values[1].value=a[1]}}}});b.unstableSeparators.each(function(d){if(c.indexOf(d)!==-1){b.currentSeparator=b.generalSeparator;a=b.splitValue(c,d);if(d==";"){b.disableLeftSide(2);if(a[0].charAt(0)=="["){b.checkboxes[0].setAttribute("checked","checked")}if(a[1].charAt(a[1].length-1)=="]"){b.checkboxes[1].setAttribute("checked","checked")}b.values[0].value=a[0].substring(1);b.values[1].value=a[1].substring(0,a[1].length-1)}else{if(d==" ... "){b.disableLeftSide(2);b.values[0].value=a[0];b.values[1].value=a[1];b.checkboxes[0].setAttribute("checked","checked");b.checkboxes[1].setAttribute("checked","checked")}else{b.disableLeftSide(0);b.moreThan="true";b.values[1].value=a[0];b.checkboxes[1].setAttribute("checked","checked")}}}});if((c.indexOf(b.generalSeparator)!=-1)||(c.charAt(0)=="<")||(c.charAt(0)==">")){b.currentSeparator=b.generalSeparator;if((c.charAt(0)=="<")||(c.charAt(0)==">")){if(c.charAt(0)=="<"){if(c.charAt(1)=="="){b.checkboxes[1].setAttribute("checked","checked");b.values[1].value=c.substring(2)}else{b.values[1].value=c.substring(1)}}else{b.moreThan="true";if(c.charAt(1)=="="){b.values[1].value=c.substring(2)}else{b.values[1].value=c.substring(1)}}b.disableLeftSide(0)}else{b.disableLeftSide(2);if((c.charAt(0)=="[")||(c.charAt(0)=="(")){if(c.charAt(0)=="["){b.checkboxes[0].setAttribute("checked","checked")}if(c.charAt(c.length-1)=="]"){b.checkboxes[1].setAttribute("checked","checked")}a=b.splitValue(c.substring(1,c.length-1),b.currentSeparator)}else{a=b.splitValue(c,b.currentSeparator)}b.values[0].value=a[0];b.values[1].value=a[1]}}if(!b.currentSeparator){b.currentSeparator=b.dashSeparator;a=b.splitValue(c,b.currentSeparator);if(a[0]&&a[1]){b.disableLeftSide(2);b.values[0].value=a[0];b.values[1].value=a[1];b.checkboxes[0].setAttribute("checked","checked");b.checkboxes[1].setAttribute("checked","checked")}else{if(a[0]||a[1]){if(a[0]){b.values[1].value=a[0]}else{b.values[1].value=-a[1]}b.equals=true;b.checkboxes[1].setAttribute("disabled","disabled");b.disableLeftSide(0)}else{document.getElementById("btnDone").setAttribute("disabled","disabled")}}}b.changeRange();Event.observe(document,"click",b.documentClickListener)},changeRange:function(){var a="";if(this.values[0].value){if(this.checkboxes[0].checked){a="["}else{a="("}a=a+this.values[0].value+"-"+this.values[1].value;if(this.checkboxes[1].checked){a=a+"]"}else{a=a+")"}}else{if(this.values[1].value){if(!this.equals){if(this.moreThan){a=">"}else{a="<"}if(this.checkboxes[1].checked){a=a+"="}}a=a+this.values[1].value}}document.getElementById("range").innerHTML="<br/>"+a;if(a==""){document.getElementById("btnDone").setAttribute("disabled","disabled")}else{document.getElementById("btnDone").removeAttribute("disabled")}},changeSign:function(c){var a=this;if(c=="btnRange"){a.checkboxes[1].removeAttribute("disabled");a.equals=false;a.disableLeftSide(2)}else{a.values[0].value="";if(c=="btnEquals"){a.checkboxes[1].removeAttribute("checked");a.checkboxes[1].setAttribute("disabled","disabled");a.equals=true;a.disableLeftSide(3)}else{a.checkboxes[1].removeAttribute("disabled");a.equals=false;a.disableLeftSide(1)}}if(c=="btnMore"){a.moreThan=true}else{a.moreThan=false}for(var b=0;b<this.btns.length;b++){if(a.btns[b].id!=c){a.btns[b].setAttribute("style","color: black; width: 20px; height: 20px;")}else{a.btns[b].setAttribute("style","color: red; width: 20px; height: 20px;")}}a.changeRange()},disableLeftSide:function(b){var a=this;if(b==2){a.check0.update('Include <br/> <input type="checkbox"/>');a.check0.setAttribute("style","width: 40px;");a.minValue.update('From <br/> <input type="text" style="width: 40px"/>');a.values[0]=a.minValue.down().next();a.checkboxes[0]=a.check0.down().next();a.checkboxes[0].onclick=function(){a.changeRange()};a.values[0].onkeyup=function(){if(a.currentSeparator==a.stableSeparators[1]){a.currentSeparator=a.generalSeparator}a.changeRange()}}else{if(b==3){a.check0.update("")}else{a.check0.update('<span style="font-size:20px"> &infin; </span>')}a.check0.setAttribute("style","width: 80px;");a.minValue.update("")}},close:function(){if(!this.destroyed){Event.stopObserving(document,"click",this.documentClickListener);Element.remove(this.rangePanel);this.destroyed=true}},finishEdit:function(){if(this.isValid(this.values[0].value)&&this.isValid(this.values[1].value)){this.setValue(this.combineValue());this.handleF3();this.destroy()}},isValid:function(d){var c=true;var b=this;if((d.charAt(0)=="<")||(d.charAt(0)==">")){d=d.substring(1);if(d.charAt(0)=="="){d=d.substring(1)}}if((d.charAt(0)=="(")||(d.charAt(0)=="[")){d=d.substring(1,d.length-1)}if(b.entryEditor&&d){var a=d.split(b.currentSeparator);if((a.length==3)&&(b.currentSeparator==b.dashSeparator)&&(d.charAt(0)=="-")){a.splice(1,1)}if(!a[0]){a.splice(0,1)}if(!a[1]){a.splice(1,1)}a.each(function(e){if(b.entryEditor=="integer"){var f=e.match(/^-?[0-9]+$/);if(!f){c=false}}else{var g=e.match(/^-?[0-9]+(\.?[0-9]+)?$/);if(!g){c=false}}})}return c},combineValue:function(){var a;var d=new Array();d[0]=this.values[0].value;d[1]=this.values[1].value;if(d[0]&&d[1]){a=d.join(this.currentSeparator)}else{if((this.currentSeparator=="more than ")||(this.currentSeparator=="less than ")){a=this.currentSeparator+d[1]}else{if(this.currentSeparator==" and more"){a=d[1]+this.currentSeparator}else{a=d.join("")}}}if((this.currentSeparator==this.generalSeparator)&&(d[0]!=d[1])){var e="";var f="";if(d[0]&&d[1]){var b;var c;if(!(this.checkboxes[0].checked&&this.checkboxes[1].checked)){if(this.checkboxes[0].checked){e="["}else{e="("}if(this.checkboxes[1].checked){f="]"}else{f=")"}}}else{if(!this.equals){if(this.moreThan){if(this.checkboxes[0].checked){e=">="}else{e=">"}}else{if(this.checkboxes[1].checked){e="<="}else{e="<"}}}}a=e+a+f}return a},splitValue:function(a,b){return a.split(b)},destroy:function(){this.close()},documentClickHandler:function(b){var a=Event.element(b);var c=false;if(!this.is(a)){this.close()}},is:function($super,a){if($super(a)){return true}else{do{if(a==this.rangePanel){return true}}while(a=a.parentNode)}return false}});if(BaseEditor.isTableEditorExists()){TableEditor.Editors.range=NumberRangeEditor}var ColorPicker=Class.create({palette:[["#FFFFFF","#FFDDDD","#DDFFDD","#DDDDFF","#FFFFAA","#FFE4BE","#FFDDFF","#FFD6AF","#E5F5FF","#DBFFEB"],["#EEEEEE","#FFAAAA","#AAFFAA","#AAAAFF","#FFFF77","#FFC29C","#FFBBFF","#FFBF80","#D2EDFF","#C2FFDD"],["#CCCCCC","#FF6666","#66FF66","#6666FF","#FFFF33","#FF9275","#F19CEC","#FAA857","#AEDEFE","#8FFFC0"],["#999999","#FF3333","#45F745","#3333FF","#FFFF00","#FF7256","#CD69C9","#FF7F00","#87CEFF","#54FF9F"],["#666666","#EA0B0B","#25DA25","#2222D3","#EEEE00","#EE6A50","#B23AEE","#EE7600","#7EC0EE","#4EEE94"],["#333333","#AA0000","#00AA00","#1717AB","#CDCD00","#CD5B45","#9A32CD","#CD6600","#6CA6CD","#43CD80"],["#000000","#660000","#006600","#000066","#8B8B00","#8B3E2F","#68228B","#8B4500","#4A708B","#2E8B57"]],colorPicker:null,documentClickListener:null,opened:false,initialize:function(d,b,a,c){this.actionElement=$(d);this.onSelect=a;this.parent=b;this.optParams=c;if(this.optParams.showOn!=false&&!this.optParams.showOn){this.showOn="click"}if(this.showOn){this.showHandler=this.show.bindAsEventListener(this);Event.observe(this.actionElement,this.showOn,this.showHandler)}this.documentClickListener=this.documentClickHandler.bindAsEventListener(this)},show:function(){var a=this;if(a.optParams.onShow){if(a.optParams.onShow()===false){return}}if(!this.opened){if(!this.colorPicker){this.colorPicker=this.createColorPicker()}this.parent.appendChild(this.colorPicker);if(a.optParams.onMouseOver){this.colorPicker.observe("mouseover",function(b){a.optParams.onMouseOver()})}if(a.optParams.onMouseOut){this.colorPicker.observe("mouseout",function(b){a.optParams.onMouseOut()})}Event.observe(document,"click",this.documentClickListener);$$("#"+this.actionElement.id+"_colorPicker .cp_palette table td div").each(function(b){b.observe("mouseover",function(c){this.addClassName("cp_selected");if(a.optParams.onColorMouseOver){a.optParams.onColorMouseOver(a.toRgb(this.style.backgroundColor))}});b.observe("mouseout",function(c){this.removeClassName("cp_selected");if(a.optParams.onColorMouseOut){a.optParams.onColorMouseOut()}});b.observe("click",function(c){this.removeClassName("cp_selected");a.hide();a.onSelect(a.toRgb(this.style.backgroundColor))})});this.opened=true}},documentClickHandler:function(f){var c=this;var d=Event.element(f);var a=false;if(d==this.actionElement){a=true}else{do{if(d==this.multiselectPanel){a=true}}while(d=d.parentNode)}if(!a){if(c.optParams.onCancel){if(c.optParams.onCancel()===false){return}}this.hide()}},getInitPosition:function(){var a=Element.positionedOffset(this.actionElement);a[1]+=this.actionElement.getHeight();return a},createColorPicker:function(){var b=new Element("div");b.id=this.actionElement.id+"_colorPicker";b.update(this.createColorPalette());var a=this.getInitPosition();b.style.left=a[0]+"px";b.style.top=a[1]+"px";b.addClassName("colorPicker");b.addClassName("corner_all");b.addClassName("shadow_all");return b},createColorPalette:function(){var b=this.palette.length;var c=this.palette[0].length;var d="<div class='cp_palette'><table>";for(var e=0;e<b;e++){d+="<tr>";for(var a=0;a<c;a++){d+="<td><div style='background: "+this.palette[e][a]+"'>";d+="</div></td>"}d+="</tr>"}d+="</table></div>";return d},hide:function(){var a=this;if(a.optParams.onHide){if(a.optParams.onHide()===false){return}}if(this.opened){Event.stopObserving(document,"click",this.documentClickListener);Element.remove(this.colorPicker);this.opened=false}},toRgb:function(b){if(b.indexOf("rgb")==0){return b}if(b.indexOf("#")==0){b=b.substr(1)}var c=/^([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})$/i.exec(b).slice(1);var e=parseInt(c[0],16);var d=parseInt(c[1],16);var a=parseInt(c[2],16);return"rgb("+e+","+d+","+a+")"}});var Popup=Class.create({popup:null,initialize:function(a,c,b,d){this.content=a;this.left=c;this.top=b;this.params=d},show:function(){var a=this;if(!this.popup){this.popup=this.createPopup();document.body.appendChild(this.popup)}},createPopup:function(){var a=new Element("div");a.update(this.content);a.addClassName("popup");a.style.left=this.left+"px";a.style.top=this.top+"px";if(this.params){if(this.params.width){a.style.width=this.params.width}if(this.params.height){a.style.height=this.params.height}}return a},hide:function(){this.hide(0)},hide:function(b){var a=this;if(!b||b<0){b=0}window.setTimeout(function(){if(a.popup){document.body.removeChild(a.popup);a.popup=null}},b)},has:function(a){if(!this.popup||!a){return false}return a.descendantOf(this.popup)},bind:function(b,a){Event.observe(this.popup,b,a)},unbind:function(b,a){Event.stopObserving(this.popup,b,a)}});