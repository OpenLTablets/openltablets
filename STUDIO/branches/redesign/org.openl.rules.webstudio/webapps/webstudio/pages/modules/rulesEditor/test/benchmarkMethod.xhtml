<?xml version="1.0" encoding="UTF-8"?>
<ui:composition
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:a4j="http://richfaces.org/a4j"
    xmlns:rich="http://richfaces.org/rich"
    template="/pages/layout/content.xhtml">

    <ui:define name="page">
        <script>
            //<![CDATA[
        	function toggleSelectAll(nItems) {
        	    var selectAllCheckBox = document.getElementById("BMForm:BMTable:selectAll");
        	    for(i = 0; i < nItems; i++) {
                    var checkbox = document.getElementById("BMForm:BMTable:" + i + ":BM");
                    if (checkbox) {
                        checkbox.checked = selectAllCheckBox.checked;
                    }
                }
        	}
            //]]>
        </script>

        <style>
            .matrix {
                border-collapse: collapse;
            }
            .matrixColumn {
                border: 1px solid #999999;
                padding: 5px 7px;
            }
        </style>

        <h3>Results of benchmarking #{benchmarkMethodBean.testName}</h3>
        <table>
            <tr style="vertical-align: top">
                <ui:include src="/pages/modules/rulesEditor/test/showTestCase.xhtml">
                    <ui:param name="args" value="#{benchmarkMethodBean.executionParams}" />
                </ui:include>
            </tr>
        </table>
        <h:form id="BMForm">
            <h:dataTable id="BMTable" value="#{benchmarkMethodBean.benchmarks}" var="item"
                binding="#{benchmarkMethodBean.htmlDataTableBM}" styleClass="matrix"
                columnClasses="none,matrixColumn,matrixColumn,matrixColumn,matrixColumn,matrixColumn,matrixColumn,matrixColumn">
                <h:column>
                    <h:outputText value="#{benchmarkMethodBean.i}." />
                </h:column>
                <h:column>
                    <f:facet name="header">
                        <h:outputText value="Name" />
                    </f:facet>
                    <h:outputText value="#{item.name}" />
                </h:column>
                <h:column>
                    <f:facet name="header">
                        <h:outputText value="Runs(ms)" />
                    </f:facet>
                    <h:outputText value="#{benchmarkMethodBean.msrun}" />
                </h:column>
                <h:column>
                    <f:facet name="header">
                        <h:outputText value="Runs/sec" />
                    </f:facet>
                    <h:outputText value="#{benchmarkMethodBean.runssec}" />
                </h:column>
                <h:column>
                    <f:facet name="header">
                        <h:outputText value="Unit Type" />
                    </f:facet>
                    <h:outputText
                        value="#{benchmarkMethodBean.unitName}" />
                </h:column>
                <h:column>
                    <f:facet name="header">
                        <h:outputText value="Units" />
                    </f:facet>
                    <h:outputText
                        value="#{benchmarkMethodBean.unitRuns}" />
                </h:column>
                <h:column>
                    <f:facet name="header">
                        <h:outputText value="Unit(ms)" />
                    </f:facet>
                    <h:outputText
                        value="#{benchmarkMethodBean.msrununit}" />
                </h:column>
                <h:column>
                    <f:facet name="header">
                        <h:outputText value="Units/sec" />
                    </f:facet>
                    <h:outputText
                        value="#{benchmarkMethodBean.runsunitsec}" />
                </h:column>
                <h:column>
                    <f:facet name="header">
                        <h:selectBooleanCheckbox id="selectAll"
                            onclick="toggleSelectAll(#{benchmarkMethodBean.benchmarkCount})" />
                    </f:facet>
                    <h:selectBooleanCheckbox id="BM" value="#{benchmarkMethodBean.bencmarkSelected}" />
                </h:column>
            </h:dataTable>
            
            <br />

            <a4j:commandButton action="#{benchmarkMethodBean.compare}"
                value="Compare" render="comparedBMTable"/>
            <a4j:commandButton action="#{benchmarkMethodBean.delete}"
                value="Delete" render="comparedBMTable BMTable"/>
        <h:dataTable id="comparedBMTable" value="#{benchmarkMethodBean.comparedBenchmarks}" var="item"
            binding="#{benchmarkMethodBean.htmlDataTableBMCompared}" styleClass="matrix"
            columnClasses="none,matrixColumn,matrixColumn,matrixColumn,matrixColumn,matrixColumn,matrixColumn,matrixColumn">
            <h:column>
                <h:outputText value="#{benchmarkMethodBean.comparedI}." />
            </h:column>
            <h:column>
                <h:outputText value="#{item.name}" />
            </h:column>
            <h:column>
                <h:outputText
                    value="#{benchmarkMethodBean.comparedRunsunitsec}" />
            </h:column>
            <h:column>
                <h:outputText
                    style="#{benchmarkMethodBean.styleForOrder}"
                    value="#{benchmarkMethodBean.comparedOrder}" />
            </h:column>
            <h:column>
                <h:outputText
                    value="#{benchmarkMethodBean.comparedRatio}" />
            </h:column>
        </h:dataTable>

        </h:form>
    </ui:define>
</ui:composition>