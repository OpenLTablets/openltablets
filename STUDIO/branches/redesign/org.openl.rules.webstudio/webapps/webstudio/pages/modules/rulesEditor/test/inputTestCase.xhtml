<ui:composition
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:c="http://java.sun.com/jsp/jstl/core"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:a4j="http://richfaces.org/a4j"
    xmlns:rich="http://richfaces.org/rich">

    <style>
        .dynamicTree a img {
            padding: 0 3px 0 5px;
        }
    </style>

    <table class="testtable" style="border: 1px solid white">
        <tr>
            <a4j:repeat var="argument" value="#{inputArgsBean.arguments}">
                <th>
                    <h:outputText value="#{argument.paramName}" />
                </th>
            </a4j:repeat>
        </tr>

        <tr style="vertical-align: top; text-align: left">
            <a4j:repeat var="argumentTreeNode" value="#{inputArgsBean.argumentTreeNodes}"
                binding="#{inputArgsBean.currentArgTreeNode}">
                <td><rich:panel id="dynamicTreePanel">
                        <rich:tree toggleType="client" selectionType="client" value="#{inputArgsBean.root}" var="item"
                            nodeType="#{item.nodeType}" binding="#{inputArgsBean.currentTreeNode}" styleClass="dynamicTree">
                            <rich:treeNode type="collection">
                                <a4j:commandLink action="#{inputArgsBean.deleteFromCollection}"
                                    rendered="#{item.elementOfCollection}" render="dynamicTreePanel"
                                    title="Delete from collection">
                                    <h:graphicImage value="/images/delete.gif" />
                                </a4j:commandLink>
                                <h:outputText value="#{item.treeText}" />
                                <a4j:commandLink action="#{inputArgsBean.initCollection}" rendered="#{item.valueNull}"
                                    render="dynamicTreePanel" title="Init">
                                    <h:graphicImage value="/images/newtable.gif" />
                                </a4j:commandLink>
                                <a4j:commandLink action="#{inputArgsBean.disposeObject}"
                                    rendered="#{not item.valueNull}" render="dynamicTreePanel" title="Dispose">
                                    <h:graphicImage value="/images/close.gif" />
                                </a4j:commandLink>
                                <a4j:commandLink action="#{inputArgsBean.addToCollection}"
                                    rendered="#{not item.valueNull}" render="dynamicTreePanel" styleClass="addButton"
                                    title="Add new element to collection">
                                    <h:graphicImage value="/images/add_obj.gif" />
                                </a4j:commandLink>
                            </rich:treeNode>
                            <rich:treeNode type="complex">
                                <a4j:commandLink action="#{inputArgsBean.deleteFromCollection}"
                                    rendered="#{item.elementOfCollection}" render="dynamicTreePanel"
                                    title="Delete from collection">
                                    <h:graphicImage value="/images/delete.gif" />
                                </a4j:commandLink>
                                <h:outputText value="#{item.treeText}" />
                                <a4j:commandLink action="#{inputArgsBean.initObject}" rendered="#{item.valueNull}"
                                    render="dynamicTreePanel" title="Init">
                                    <h:graphicImage value="/images/newtable.gif" />
                                </a4j:commandLink>
                                <a4j:commandLink action="#{inputArgsBean.disposeObject}"
                                    rendered="#{not item.valueNull}" render="dynamicTreePanel" title="Dispose">
                                    <h:graphicImage value="/images/close.gif" />
                                </a4j:commandLink>
                            </rich:treeNode>
                            <rich:treeNode type="simple">
                                <a4j:commandLink action="#{inputArgsBean.deleteFromCollection}"
                                    rendered="#{item.elementOfCollection}" render="dynamicTreePanel"
                                    title="Delete from collection">
                                    <h:graphicImage value="/images/delete.gif" />
                                </a4j:commandLink>
                                <h:outputText value="#{item.fieldName} = " rendered="#{not empty item.fieldName}" />
                                <h:inputText id="nodeValue" value="#{item.displayedValue}" />
                                <h:message for="nodeValue" />
                            </rich:treeNode>
                        </rich:tree>
                    </rich:panel>
                </td>
            </a4j:repeat>
        </tr>
    </table>

</ui:composition>
