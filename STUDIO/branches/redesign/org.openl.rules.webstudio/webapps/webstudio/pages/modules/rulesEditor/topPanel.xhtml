<?xml version="1.0" encoding="UTF-8"?>
<ui:composition
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:c="http://java.sun.com/jsp/jstl/core"
    xmlns:a4j="http://richfaces.org/a4j">

    <c:set var="rProject" value="#{studio.currentProject}" />

    <h:panelGroup id="topPanel" style="margin-left: 10px" layout="block">
        <h:form id="headerForm">
            <span class="buttonPanel">
                <a4j:ajax render=":topPanel :projects :bottomPanel" oncomplete="refreshCurrent()">
                    <h:commandLink action="#{mainBean.reload}" title="Refresh Projects"><img
                        src="webresource/images/refresh.png" />
                    </h:commandLink>

                    <h:commandLink action="#{mainBean.checkInProject}" title="Check in Project"
                        rendered="#{!empty rProject and rProject.checkedOut}"><img
                        src="webresource/images/repository/checkin.gif" />
                    </h:commandLink>
                    <h:commandLink action="#{mainBean.checkOutProject}" title="Check out Project"
                        rendered="#{!empty rProject and !rProject.localOnly and !rProject.locked}"><img
                        src="webresource/images/repository/checkout.gif" />
                    </h:commandLink>
                </a4j:ajax>

                <h:outputLink value="test/runAllTests.xhtml" target="content"
                    title="Run All Tests" rendered="#{treeBean.projectHasTests}"><img
                    src="webresource/images/test_ok.gif" /></h:outputLink>
                
                <span style="margin:0 21px"></span>
                
                <h:outputLink rendered="#{studio.model.editable}" value="create/index.xhtml"
                    target="content" title="Create new table" styleClass="button">Create New</h:outputLink>

                <h:outputLink rendered="#{!empty rProject and studio.model.editable}"
                    value="revertModuleChanges.xhtml" target="content" title="Revert Changes"
                    styleClass="button2">Revert</h:outputLink>

                <h:outputLink rendered="#{!empty rProject and studio.model.projectCompiledSuccessfully}"
                    value="rulesDependencies.xhtml" target="content"
                    title="Rules Dependencies">Dependencies</h:outputLink>
            </span>
        </h:form>
        <h:panelGroup style="position: absolute; right: 21px; top: 3px">
            <h:panelGroup rendered="#{!empty rProject and studio.model.projectCompiledSuccessfully}">
                <span style="font-size: 90%">
                    <h:outputLink value="search/advancedSearch.xhtml" target="content">Advanced</h:outputLink>
                    <span style="margin: 0 3px">|</span>
                    <h:outputLink value="search/businessSearch.xhtml" target="content">Business</h:outputLink>
                </span>
                <form style="display: inline;"
                    onsubmit="goTo('search/simpleSearch.xhtml?searchQuery=' + $j('#searchQuery').val()); return false;">
                    <input type="text" id="searchQuery" placeholder="Search..." />
                    <input type="image" src="#{contextPath}/webresource/images/search.png" />
                </form>
            </h:panelGroup>

            <a target="_blank" style="margin-left: 15px"
                onclick="window.open('#{rulesEditor}/compare.xhtml','Compare','width=1000,height=800,screenX=50,screenY=100,resizable=yes,scrollbars=yes,status=yes');return false;"
                href="#" title="Compare Excel files"><img
                src="webresource/images/compare.gif" /></a>
            
        </h:panelGroup>
    </h:panelGroup>

</ui:composition>
