<?xml version="1.0" encoding="UTF-8"?>
<ui:composition
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:c="http://java.sun.com/jsp/jstl/core"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:a4j="http://richfaces.org/a4j">

    <a4j:repeat var="sr" value="#{searchResults}" binding="#{searchResultsBean.searchResults}">
        <c:set var="uri" value="#{sr[0]}" />
        <c:set var="result" value="#{sr[1]}" />

        <table style="width: 80%">
            <h:panelGroup rendered="#{searchResultsBean.xlsFile and !searchResultsBean.canViewTable}">
            <tr>
                <td style="width: 16px">
                    <h:graphicImage url="/webresource/images/viewTable.gif" />
                </td>
                <td style="vertical-align: top">
                    <h:outputLink title="View Table in Table Editor"
                        value="#{contextPath}/faces/pages/modules/rulesEditor/showTable.xhtml" target="content">
                        <f:param name="uri" value="#{uri}" />
                        <h:outputText value="View Table" />
                    </h:outputLink>
                </td>
            </tr>
            </h:panelGroup>
            <tr>
                <td style="width: 16px">
                    <h:graphicImage url="/webresource/images/excel.png" rendered="#{searchResultsBean.xlsFile}" />
                    <h:graphicImage url="/webresource/images/word.png" rendered="#{searchResultsBean.docFile}" />
                </td>
                <td style="vertical-align: top">
                    <h:outputText value="#{searchResultsBean.fileHeader}"
                        rendered="#{!studio.model.editable and !searchResultsBean.canViewTable}" />
                    <h:outputLink value="#{contextPath}/action/launch" target="hidden" title="View Result"
                        rendered="#{studio.model.editable or searchResultsBean.canViewTable}">
                        <f:param name="uri" value="#{uri}" />
                        <h:outputText value="#{searchResultsBean.fileHeader}" />
                    </h:outputLink>
                </td>
            </tr>
            <tr>
                <td />
                <td>
                    <h:outputText value="#{result}" escape="false" />
                </td>
            </tr>
        </table>
        <p />
    </a4j:repeat>

</ui:composition>
