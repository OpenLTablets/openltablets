<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:a4j="http://richfaces.org/a4j"
    xmlns:c="http://java.sun.com/jsp/jstl/core">

    <c:set var="contextPath" value="#{facesContext.externalContext.request.contextPath}" />
    <c:set var="sourceModified" value="#{studio.model.sourceModified}" />

    <h:head></h:head>

    <h:body>
        <script>
            function sourceModified() {
                if (confirm('Project source file was modified.\nClick \'OK\' to reload WebStudio with changes, and \'Cancel\' to ignore changes.')) {
                    top.location.href = '#{contextPath}/faces/pages/modules/rulesEditor/index.xhtml?reload=reload';
                }
            }
        </script>

        <h:form>
            <a4j:poll id="poll" enabled="#{!sourceModified}" interval="4000"
                oncomplete="#{sourceModified ? 'sourceModified()' : ''}"  render="poll" />
        </h:form>
    </h:body>

</html>
