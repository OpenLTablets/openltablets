<?xml version="1.0" encoding="UTF-8"?>
<ui:composition
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:rich="http://richfaces.org/rich"
    xmlns:c="http://java.sun.com/jsp/jstl/core"
    template="/pages/layout/view.xhtml">

    <ui:define name="toolbar">
        <c:set var="project" value="#{studio.currentProject}" />
        <h:panelGroup rendered="#{project != null}" layout="block" styleClass="treeMenu">
            <h:selectOneMenu value="#{treeBean.currentView}">
                <f:selectItems value="#{treeBean.views}" />
                <f:ajax event="change" render="projectTree" />
            </h:selectOneMenu>
        </h:panelGroup>
    </ui:define>

    <ui:define name="workspace">
        <rich:tree id="projectTree" styleClass="tree" value="#{treeBean.tree}" var="node" nodeType="#{node.type}"
            toggleType="client" nodeClass="#{node.active ? '' : 'treeNodeInactive'}" selection="#{treeBean.selected}">
            <rich:treeNode type="folder"
                iconCollapsed="#{node.state == 1 ? 'webresource/images/dtree/folder-error.png' : 'webresource/images/dtree/folder.png'}"
                iconExpanded="#{node.state == 1 ? 'webresource/images/dtree/folder-error.png' : 'webresource/images/dtree/folder.png'}">
                <h:outputText value="#{node.name}" />
            </rich:treeNode>
            <rich:treeNode type="workbook"
                iconCollapsed="#{node.state == 1 ? 'webresource/images/excel-workbook-error.png' : 'webresource/images/excel-workbook.png'}"
                iconExpanded="#{node.state == 1 ? 'webresource/images/excel-workbook-error.png' : 'webresource/images/excel-workbook.png'}">
                <h:outputText value="#{node.name}" />
            </rich:treeNode>
            <rich:treeNode type="worksheet"
                iconCollapsed="#{node.state == 1 ? 'webresource/images/worksheet-error.png' : 'webresource/images/worksheet.gif'}"
                iconExpanded="#{node.state == 1 ? 'webresource/images/worksheet-error.png' : 'webresource/images/worksheet.gif'}">
                <h:outputText value="#{node.name}" />
            </rich:treeNode>
            <rich:treeNode type="problem">
                <h:outputLink value="#{node.url}" title="#{node.title}" target="content">
                    <h:outputText value="#{node.name}" />
                </h:outputLink>
            </rich:treeNode>
            <rich:treeNode type="table.xls.dt"
                iconCollapsed="#{node.state == 1 ? 'webresource/images/dt3-error.png' : (node.state == 2 ? 'webresource/images/dt3-check.png' : 'webresource/images/dt3.png')}"
                iconExpanded="#{node.state == 1 ? 'webresource/images/dt3-error.png' : (node.state == 2 ? 'webresource/images/dt3-check.png' : 'webresource/images/dt3.png')}"
                iconLeaf="#{node.state == 1 ? 'webresource/images/dt3-error.png' : (node.state == 2 ? 'webresource/images/dt3-check.png' : 'webresource/images/dt3.png')}">
                <h:outputLink value="#{node.url}" title="#{node.title}" target="content">
                    <h:outputText value="#{node.name}" />
                </h:outputLink>
            </rich:treeNode>
            <rich:treeNode type="table.xls.spreadsheet"
                iconCollapsed="#{node.state == 1 ? 'webresource/images/spreadsheet-error.gif' : 'webresource/images/spreadsheet.gif'}"
                iconExpanded="#{node.state == 1 ? 'webresource/images/spreadsheet-error.gif' : 'webresource/images/spreadsheet.gif'}"
                iconLeaf="#{node.state == 1 ? 'webresource/images/spreadsheet-error.gif' : 'webresource/images/spreadsheet.gif'}">
                <h:outputLink value="#{node.url}" title="#{node.title}" target="content">
                    <h:outputText value="#{node.name}" />
                </h:outputLink>
            </rich:treeNode>
            <rich:treeNode type="table.xls.tbasic"
                iconCollapsed="#{node.state == 1 ? 'webresource/images/tbasic-error.gif' : (node.state == 2 ? 'webresource/images/tbasic-check.gif' : 'webresource/images/tbasic.gif')}"
                iconExpanded="#{node.state == 1 ? 'webresource/images/tbasic-error.gif' : (node.state == 2 ? 'webresource/images/tbasic-check.gif' : 'webresource/images/tbasic.gif')}"
                iconLeaf="#{node.state == 1 ? 'webresource/images/tbasic-error.gif' : (node.state == 2 ? 'webresource/images/tbasic-check.gif' : 'webresource/images/tbasic.gif')}">
                <h:outputLink value="#{node.url}" title="#{node.title}" target="content">
                    <h:outputText value="#{node.name}" />
                </h:outputLink>
            </rich:treeNode>
            <rich:treeNode type="table.xls.columnmatch"
                iconCollapsed="#{node.state == 1 ? 'webresource/images/cmatch-error.gif' : (node.state == 2 ? 'webresource/images/cmatch-check.gif' : 'webresource/images/cmatch.gif')}"
                iconExpanded="#{node.state == 1 ? 'webresource/images/cmatch-error.gif' : (node.state == 2 ? 'webresource/images/cmatch-check.gif' : 'webresource/images/cmatch.gif')}"
                iconLeaf="#{node.state == 1 ? 'webresource/images/cmatch-error.gif' : (node.state == 2 ? 'webresource/images/cmatch-check.gif' : 'webresource/images/cmatch.gif')}">
                <h:outputLink value="#{node.url}" title="#{node.title}" target="content">
                    <h:outputText value="#{node.name}" />
                </h:outputLink>
            </rich:treeNode>
            <rich:treeNode type="table.xls.data"
                iconCollapsed="#{node.state == 1 ? 'webresource/images/data-error.png' : 'webresource/images/data.gif'}"
                iconExpanded="#{node.state == 1 ? 'webresource/images/data-error.png' : 'webresource/images/data.gif'}"
                iconLeaf="#{node.state == 1 ? 'webresource/images/data-error.png' : 'webresource/images/data.gif'}">
                <h:outputLink value="#{node.url}" title="#{node.title}" target="content">
                    <h:outputText value="#{node.name}" />
                </h:outputLink>
            </rich:treeNode>
            <rich:treeNode type="table.xls.datatype"
                iconCollapsed="#{node.state == 1 ? 'webresource/images/dataobject-error.png' : 'webresource/images/dataobject.gif'}"
                iconExpanded="#{node.state == 1 ? 'webresource/images/dataobject-error.png' : 'webresource/images/dataobject.gif'}"
                iconLeaf="#{node.state == 1 ? 'webresource/images/dataobject-error.png' : 'webresource/images/dataobject.gif'}">
                <h:outputLink value="#{node.url}" title="#{node.title}" target="content">
                    <h:outputText value="#{node.name}" />
                </h:outputLink>
            </rich:treeNode>
            <rich:treeNode type="table.xls.environment"
                iconLeaf="#{node.state == 1 ? 'webresource/images/config_obj-error.png' : 'webresource/images/config_obj.gif'}">
                <h:outputLink value="#{node.url}" title="#{node.title}" target="content">
                    <h:outputText value="#{node.name}" />
                </h:outputLink>
            </rich:treeNode>
            <rich:treeNode type="table.xls.method"
                iconCollapsed="#{node.state == 1 ? 'webresource/images/method-error.png' : 'webresource/images/method.gif'}"
                iconExpanded="#{node.state == 1 ? 'webresource/images/method-error.png' : 'webresource/images/method.gif'}"
                iconLeaf="#{node.state == 1 ? 'webresource/images/method-error.png' : 'webresource/images/method.gif'}">
                <h:outputLink value="#{node.url}" title="#{node.title}" target="content">
                    <h:outputText value="#{node.name}" />
                </h:outputLink>
            </rich:treeNode>
            <rich:treeNode type="table.xls.test.method"
                iconCollapsed="#{node.state == 1 ? 'webresource/images/test_ok-error.gif' : 'webresource/images/test_ok.gif'}"
                iconExpanded="#{node.state == 1 ? 'webresource/images/test_ok-error.gif' : 'webresource/images/test_ok.gif'}"
                iconLeaf="#{node.state == 1 ? 'webresource/images/test_ok-error.gif' : 'webresource/images/test_ok.gif'}">
                <h:outputLink value="#{node.url}" title="#{node.title}" target="content">
                    <h:outputText value="#{node.name}" />
                </h:outputLink>
            </rich:treeNode>
            <rich:treeNode type="table.xls.run.method"
                iconCollapsed="#{node.state == 1 ? 'webresource/images/test-error.png' : 'webresource/images/test.gif'}"
                iconExpanded="#{node.state == 1 ? 'webresource/images/test-error.png' : 'webresource/images/test.gif'}"
                iconLeaf="#{node.state == 1 ? 'webresource/images/test-error.png' : 'webresource/images/test.gif'}">
                <h:outputLink value="#{node.url}" title="#{node.title}" target="content">
                    <h:outputText value="#{node.name}" />
                </h:outputLink>
            </rich:treeNode>
            <rich:treeNode type="table.xls.properties"
                iconLeaf="#{node.state == 1 ? 'webresource/images/data-error.png' : 'webresource/images/data.gif'}">
                <h:outputLink value="#{node.url}" title="#{node.title}" target="content">
                    <h:outputText value="#{node.name}" />
                </h:outputLink>
            </rich:treeNode>
            <rich:treeNode type="table.xls.other">
                <h:outputLink value="#{node.url}" title="#{node.title}" target="content">
                    <h:outputText value="#{node.name}" />
                </h:outputLink>
            </rich:treeNode>
        </rich:tree>
    </ui:define>

</ui:composition>
