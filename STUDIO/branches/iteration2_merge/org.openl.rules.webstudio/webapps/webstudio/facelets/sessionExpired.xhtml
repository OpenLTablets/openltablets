<?xml version="1.0" encoding="utf-8"?>
<ui:composition
  xmlns:f="http://java.sun.com/jsf/core"
  xmlns:h="http://java.sun.com/jsf/html"
  xmlns:a4j="https://ajax4jsf.dev.java.net/ajax"
  xmlns:rich="http://richfaces.ajax4jsf.org/rich"
  xmlns:ui="http://java.sun.com/jsf/facelets">

  <rich:modalPanel id="modalSessionExpired" width="300" minWidth="300" height="130" minHeight="110">
    <f:facet name="header">
      <h:outputText value="Session Expired" />
    </f:facet>

    <f:facet name="controls">
        <h:graphicImage value="/webresource/images/modal/wait.gif" />
    </f:facet>

      <h:outputText value="While you were absent, your session has expired." />
      <br />
      <br />
      <h:outputText value="Relogin in " />
      <span id="sessionExpiredCountDown">?</span>
      <h:outputText value=" seconds..." />
      <br />
      <br />

      <h:panelGrid columns="1" styleClass="buttonPanel" cellpadding="4px;" cellspacing="0px;">
        <h:commandButton id="sessionExpiredBtn" styleClass="button" value="Login Now" onclick="return relogin();" />
      </h:panelGrid>
  </rich:modalPanel>

    <script type="text/javascript">
        function relogin() {
            top.location.href = "<h:outputText value='#{facesContext.externalContext.request.contextPath}' />";
            return false;
        }
//<!--
        function reloginCountDown(countDown) {
            if (countDown == null) {
                countDown = window._countDown;
            }
            if (countDown <= 0) {
                relogin();
            } else {
                var txt = document.getElementById('sessionExpiredCountDown');
                txt.innerHTML = countDown;
                window._countDown = countDown - 1;
                setTimeout(reloginCountDown, 1000, countDown - 1);
            }
        }

        // Richfaces.showModalPanel('modalSessionExpired');

        // reloginCountDown(15);
        relogin();
//-->
    </script>
</ui:composition>
