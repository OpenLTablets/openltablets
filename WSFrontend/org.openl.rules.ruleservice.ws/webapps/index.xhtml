<!DOCTYPE html>
<html
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:rich="http://richfaces.org/rich">

    <h:head>
        <meta charset="UTF-8" />

        <title>OpenL Tablets Web Services</title>

        <link href="#{request.contextPath}/css/common.css" rel="stylesheet" />

        <style>

            /* Specific */

            .url,
            .date-time {
                padding-left: 3px;
            }

            .date-time {
                color: #9a9a9a;
            }

            .services .rf-trn-lbl,
            .services a {
                margin: 0;
                font-family: verdana, helvetica, arial, sans-serif;
                font-size: 12px;
            }

            .services .rf-trn-lbl {
                color: #444;
            }

            .method-node .rf-trn-lbl {
                font-size: 11px;
            }

            .services > td > div {
                padding-top: 2px;
                padding-bottom: 2px;
            }

            /* Hide tree icons */
            .service-node span.rf-trn-ico,
            .service-node .rf-trn-hnd-lf {
                display: none;
            }

        </style>
    </h:head>

    <h:body>
        <div id="header">OpenL Tablets Web Services</div>
        <div id="main">
            <div>
                <h:form>
                    <h:panelGroup layout="block" rendered="#{!empty servicesListBean.servicesGroup}">
                        <ui:repeat value="#{servicesListBean.servicesGroup}" var="servicesGroup">
                            <h2>Available #{servicesGroup.groupName} services:</h2>

                            <table class="table">
                                <tbody>
                                <ui:repeat value="#{servicesGroup.availableServices}" var="service">
                                    <tr class="services">
                                        <td>
                                            <div class="date-time">
                                                Started time:
                                                <h:outputText value="#{service.startedTime}">
                                                    <!--TODO get datetime pattern from properties-->
                                                    <f:convertDateTime type="both" pattern="MM/dd/yyyy hh:mm:ss a" />
                                                </h:outputText>
                                            </div>
                                            <rich:tree styleClass="tree" value="#{servicesListBean.getTree(service)}" var="node" toggleType="client" nodeType="#{node.type}" >
                                                <rich:treeNode type="service" styleClass="service-node">
                                                    <h:outputText value="#{node.text}" />
                                                </rich:treeNode>
                                                <rich:treeNode type="method" styleClass="method-node" iconLeaf="#{request.contextPath}/images/bullet.png">
                                                    <h:outputText value="#{node.text}" />
                                                </rich:treeNode>
                                            </rich:tree>
                                            <h:panelGroup layout="block" styleClass="url" rendered="#{!empty service.url}">
                                                #{service.urlDescription}:
                                                <a href="#{request.contextPath}/#{service.url}">#{request.contextPath}/#{service.url}</a>
                                            </h:panelGroup>
                                        </td>
                                    </tr>
                                </ui:repeat>
                                </tbody>
                            </table>
                        </ui:repeat>
                    </h:panelGroup>

                    <h:panelGroup layout="block" rendered="#{empty servicesListBean.servicesGroup}">
                        <h2>There are no available Web Services</h2>
                    </h:panelGroup>

                </h:form>
            </div>
        </div>
        <div id="footer">
            &#169; 2014 <a style="text-decoration: none" href="http://openl-tablets.sf.net" target="_blank">OpenL Tablets</a>
        </div>
    </h:body>
</html>